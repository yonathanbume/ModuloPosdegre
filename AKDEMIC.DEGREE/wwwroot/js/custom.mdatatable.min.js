var mDatatablePluginName="mDatatable",mDatatablePfx="m-",mDatatableUtil=mUtil,mDatatablePlugin={extractTable:function(a,t){var e=[],l=$(t).find("tr:first-child th").get().map((function(t,l){var n=$(t).data("field");void 0===n&&(n=$(t).text().trim());var o={};for(var i in o=$(t).data("title")?{field:n,title:n}:{field:n,title:$(t).html()},a.columns)a.columns[i].field===n&&(o=$.extend(!0,{},a.columns[i],o));return e.push(o),n}));a.columns=e;var n=[],o=[];$(t).find("tr").each((function(){$(this).find("td").length&&n.push($(this).prop("attributes"));var a={};$(this).find("td").each((function(t,e){a[l[t]]=e.innerHTML.trim()})),mDatatableUtil.isEmpty(a)||o.push(a)})),a.data.attr.rowProps=n,a.data.source=o},setupSystemColumn:function(a,t,e){if(t.dataSet=t.dataSet||[],0!==t.dataSet.length){var l=a.columns;$(t.tableBody).find("."+mDatatablePfx+"datatable__row").each((function(a,t){$(t).find("."+mDatatablePfx+"datatable__cell").each((function(a,t){var n=$.grep(l,(function(a,e){return $(t).data("field")===a.field}))[0];if(void 0!==n){var o=$(t).text();if(void 0!==n.selector&&!1!==n.selector){if($(t).find("."+mDatatablePfx+'checkbox [type="checkbox"]').length>0)return;$(t).addClass(mDatatablePfx+"datatable__cell--check");var i=$("<label/>").addClass(mDatatablePfx+"checkbox "+mDatatablePfx+"checkbox--single").append($("<input/>").attr("type","checkbox").attr("value",o).on("click",(function(){$(this).is(":checked")?e.setActive(this):e.setInactive(this)}))).append($("<span/>"));void 0!==n.selector.class&&$(i).addClass(n.selector.class),void 0!==n.selector.name&&$(i).children("input[type='checkbox']:first").attr("name",n.selector.name),$(t).children().html(i)}if(void 0!==n.subtable&&n.subtable){if($(t).find("."+mDatatablePfx+"datatable__toggle-subtable").length>0)return;$(t).children().html($("<a/>").addClass(mDatatablePfx+"datatable__toggle-subtable").attr("href","#").attr("data-value",o).append($("<i/>").addClass(e.getOption("layout.icons.rowDetail.collapse"))))}}}))}));var n=function(a){var t=$.grep(l,(function(a,t){return void 0!==a.selector&&!1!==a.selector}))[0];if(void 0!==t&&void 0!==t.selector&&!1!==t.selector){var n=$(a).find('[data-field="'+t.field+'"]');if($(n).find("."+mDatatablePfx+'checkbox [type="checkbox"]').length>0)return;$(n).addClass(mDatatablePfx+"datatable__cell--check");var o=$("<label/>").addClass(mDatatablePfx+"checkbox "+mDatatablePfx+"checkbox--single "+mDatatablePfx+"checkbox--all").append($("<input/>").attr("type","checkbox").on("click",(function(){$(this).is(":checked")?e.setActiveAll(!0):e.setActiveAll(!1)}))).append($("<span/>"));void 0!==t.selector.class&&$(o).addClass(t.selector.class),$(n).children().html(o)}};a.layout.header&&n($(t.tableHead).find("."+mDatatablePfx+"datatable__row").first()),a.layout.footer&&n($(t.tableFoot).find("."+mDatatablePfx+"datatable__row").first())}}};$.fn.mDatatable=function(a){if(0!==$(this).length){var t=this;t.debug=!1,t.API={record:null,value:null,params:null};var e={isInit:!1,offset:110,stateId:"meta",ajaxParams:{},init:function(a){var l=!1;return null===a.data.source&&(e.extractTable(),l=!0),e.setupBaseDOM.call(),e.setupDOM(t.table),e.spinnerCallback(!0),e.setDataSourceQuery(e.getOption("data.source.read.params.query")),$(t).on(mDatatablePfx+"datatable--on-layout-updated",e.afterRender),t.debug&&e.stateRemove(e.stateId),$.each(e.getOption("extensions"),(function(a,e){"function"==typeof $.fn[mDatatablePluginName][a]&&new $.fn[mDatatablePluginName][a](t,e)})),"remote"!==a.data.type&&"local"!==a.data.type||((!1===a.data.saveState||!1===a.data.saveState.cookie&&!1===a.data.saveState.webstorage)&&e.stateRemove(e.stateId),"local"===a.data.type&&"object"==typeof a.data.source&&(t.dataSet=t.originalDataSet=e.dataMapCallback(a.data.source)),e.dataRender()),l||(e.setHeadTitle(),e.getOption("layout.footer")&&e.setHeadTitle(t.tableFoot)),void 0!==a.layout.header&&!1===a.layout.header&&$(t.table).find("thead").remove(),void 0!==a.layout.footer&&!1===a.layout.footer&&$(t.table).find("tfoot").remove(),null!==a.data.type&&"local"!==a.data.type||(e.setupCellField.call(),e.setupTemplateCell.call(),e.setupSubDatatable.call(),e.setupSystemColumn.call(),e.redraw()),$(window).resize(e.fullRender),$(t).height(""),$(e.getOption("search.input")).on("keyup",(function(a){e.getOption("search.onEnter")&&13!==a.which||e.search($(this).val())})),t},extractTable:function(){mDatatablePlugin.extractTable(a,t)},layoutUpdate:function(){e.setupSubDatatable.call(),e.setupSystemColumn.call(),e.setupHover.call(),void 0===a.detail&&1===e.getDepth()&&e.lockTable.call(),e.columnHide.call(),e.resetScroll(),e.isInit||($(t).trigger(mDatatablePfx+"datatable--on-init",{table:$(t.wrap).attr("id"),options:a}),e.isInit=!0),$(t).trigger(mDatatablePfx+"datatable--on-layout-updated",{table:$(t.wrap).attr("id")})},lockTable:function(){var a={lockEnabled:!1,init:function(){a.lockEnabled=e.lockEnabledColumns(),0===a.lockEnabled.left.length&&0===a.lockEnabled.right.length||a.enable()},enable:function(){$(t.table).find("thead,tbody,tfoot").each((function(){var l=this;0===$(this).find("."+mDatatablePfx+"datatable__lock").length&&$(this).ready((function(){!function(l){if($(l).find("."+mDatatablePfx+"datatable__lock").length>0)e.log("Locked container already exist in: ",l);else if(0!==$(l).find("."+mDatatablePfx+"datatable__row").length){var n=$("<div/>").addClass(mDatatablePfx+"datatable__lock "+mDatatablePfx+"datatable__lock--left"),o=$("<div/>").addClass(mDatatablePfx+"datatable__lock "+mDatatablePfx+"datatable__lock--scroll"),i=$("<div/>").addClass(mDatatablePfx+"datatable__lock "+mDatatablePfx+"datatable__lock--right");$(l).find("."+mDatatablePfx+"datatable__row").each((function(){var a=$("<tr/>").addClass(mDatatablePfx+"datatable__row").appendTo(n),t=$("<tr/>").addClass(mDatatablePfx+"datatable__row").appendTo(o),e=$("<tr/>").addClass(mDatatablePfx+"datatable__row").appendTo(i);$(this).find("."+mDatatablePfx+"datatable__cell").each((function(){var l=$(this).data("locked");void 0!==l?(void 0===l.left&&!0!==l||$(this).appendTo(a),void 0!==l.right&&$(this).appendTo(e)):$(this).appendTo(t)})),$(this).remove()})),a.lockEnabled.left.length>0&&($(t.wrap).addClass(mDatatablePfx+"datatable--lock"),$(n).appendTo(l)),(a.lockEnabled.left.length>0||a.lockEnabled.right.length>0)&&$(o).appendTo(l),a.lockEnabled.right.length>0&&($(t.wrap).addClass(mDatatablePfx+"datatable--lock"),$(i).appendTo(l))}else e.log("No row exist in: ",l)}(l)}))}))}};return a.init(),a},fullRender:function(){e.isLocked()&&($(t.tableHead).empty(),e.setHeadTitle(),e.getOption("layout.footer")&&($(t.tableFoot).empty(),e.setHeadTitle(t.tableFoot)),e.spinnerCallback(!0),$(t.wrap).removeClass(mDatatablePfx+"datatable--loaded"),e.insertData())},lockEnabledColumns:function(){var t=$(window).width(),e=a.columns,l={left:[],right:[]};return $.each(e,(function(a,e){void 0!==e.locked&&(void 0!==e.locked.left&&mDatatableUtil.getBreakpoint(e.locked.left)<=t&&l.left.push(e.locked.left),void 0!==e.locked.right&&mDatatableUtil.getBreakpoint(e.locked.right)<=t&&l.right.push(e.locked.right))})),l},afterRender:function(a,l){l.table==$(t.wrap).attr("id")&&$(t).ready((function(){e.isLocked()||(e.redraw(),e.getOption("rows.autoHide")&&(e.autoHide(),$(t.table).find("."+mDatatablePfx+"datatable__row").css("height",""))),e.rowEvenOdd.call(),e.isLocked()&&e.redraw(),$(t.tableBody).css("visibility",""),$(t.wrap).addClass(mDatatablePfx+"datatable--loaded"),e.sorting.call(),e.scrollbar.call(),e.spinnerCallback(!1)}))},hoverTimer:0,isScrolling:!1,setupHover:function(){$(window).scroll((function(a){clearTimeout(e.hoverTimer),e.isScrolling=!0})),$(t.tableBody).find("."+mDatatablePfx+"datatable__cell").off("mouseenter","mouseleave").on("mouseenter",(function(){if(e.hoverTimer=setTimeout((function(){e.isScrolling=!1}),200),!e.isScrolling){var a=$(this).closest("."+mDatatablePfx+"datatable__row").addClass(mDatatablePfx+"datatable__row--hover"),t=$(a).index()+1;$(a).closest("."+mDatatablePfx+"datatable__lock").parent().find("."+mDatatablePfx+"datatable__row:nth-child("+t+")").addClass(mDatatablePfx+"datatable__row--hover")}})).on("mouseleave",(function(){var a=$(this).closest("."+mDatatablePfx+"datatable__row").removeClass(mDatatablePfx+"datatable__row--hover"),t=$(a).index()+1;$(a).closest("."+mDatatablePfx+"datatable__lock").parent().find("."+mDatatablePfx+"datatable__row:nth-child("+t+")").removeClass(mDatatablePfx+"datatable__row--hover")}))},adjustLockContainer:function(){if(!e.isLocked())return 0;var a=$(t.tableHead).width(),l=$(t.tableHead).find("."+mDatatablePfx+"datatable__lock--left").width(),n=$(t.tableHead).find("."+mDatatablePfx+"datatable__lock--right").width();void 0===l&&(l=0),void 0===n&&(n=0);var o=Math.floor(a-l-n);return $(t.table).find("."+mDatatablePfx+"datatable__lock--scroll").css("width",o),o},dragResize:function(){var a,e,l=!1,n=void 0;$(t.tableHead).find("."+mDatatablePfx+"datatable__cell").mousedown((function(t){n=$(this),l=!0,a=t.pageX,e=$(this).width(),$(n).addClass(mDatatablePfx+"datatable__cell--resizing")})).mousemove((function(o){if(l){var i=$(n).index(),r=$(t.tableBody),d=$(n).closest("."+mDatatablePfx+"datatable__lock");if(d){var s=$(d).index();r=$(t.tableBody).find("."+mDatatablePfx+"datatable__lock").eq(s)}$(r).find("."+mDatatablePfx+"datatable__row").each((function(t,l){$(l).find("."+mDatatablePfx+"datatable__cell").eq(i).width(e+(o.pageX-a)).children().width(e+(o.pageX-a))})),$(n).children().css("width",e+(o.pageX-a))}})).mouseup((function(){$(n).removeClass(mDatatablePfx+"datatable__cell--resizing"),l=!1})),$(document).mouseup((function(){$(n).removeClass(mDatatablePfx+"datatable__cell--resizing"),l=!1}))},initHeight:function(){if(a.layout.height&&a.layout.scroll){var e=$(t.tableHead).find("."+mDatatablePfx+"datatable__row").height(),l=$(t.tableFoot).find("."+mDatatablePfx+"datatable__row").height(),n=a.layout.height;e>0&&(n-=e),l>0&&(n-=l),$(t.tableBody).css("max-height",n),$(t.tableBody).find("."+mDatatablePfx+"datatable__lock--scroll").css("height",n)}},setupBaseDOM:function(){t.initialDatatable=$(t).clone(),"TABLE"===$(t).prop("tagName")?(t.table=$(t).removeClass(mDatatablePfx+"datatable").addClass(mDatatablePfx+"datatable__table"),0===$(t.table).parents("."+mDatatablePfx+"datatable").length&&(t.table.wrap($("<div/>").addClass(mDatatablePfx+"datatable").addClass(mDatatablePfx+"datatable--"+a.layout.theme)),t.wrap=$(t.table).parent())):(t.wrap=$(t).addClass(mDatatablePfx+"datatable").addClass(mDatatablePfx+"datatable--"+a.layout.theme),t.table=$("<table/>").addClass(mDatatablePfx+"datatable__table").appendTo(t)),void 0!==a.layout.class&&$(t.wrap).addClass(a.layout.class),$(t.table).removeClass(mDatatablePfx+"datatable--destroyed").css("display","block"),void 0===$(t).attr("id")&&(e.setOption("data.saveState",!1),$(t.table).attr("id",mDatatableUtil.getUniqueID(mDatatablePfx+"datatable--"))),e.getOption("layout.minHeight")&&$(t.table).css("min-height",e.getOption("layout.minHeight")),e.getOption("layout.height")&&$(t.table).css("max-height",e.getOption("layout.height")),null===a.data.type&&$(t.table).css("width","").css("display",""),t.tableHead=$(t.table).find("thead"),0===$(t.tableHead).length&&(t.tableHead=$("<thead/>").prependTo(t.table)),t.tableBody=$(t.table).find("tbody"),0===$(t.tableBody).length&&(t.tableBody=$("<tbody/>").appendTo(t.table)),void 0!==a.layout.footer&&a.layout.footer&&(t.tableFoot=$(t.table).find("tfoot"),0===$(t.tableFoot).length&&(t.tableFoot=$("<tfoot/>").appendTo(t.table)))},setupCellField:function(e){void 0===e&&(e=$(t.table).children());var l=a.columns;$.each(e,(function(a,t){$(t).find("."+mDatatablePfx+"datatable__row").each((function(a,t){$(t).find("."+mDatatablePfx+"datatable__cell").each((function(a,t){void 0!==l[a]&&$(t).data(l[a])}))}))}))},setupTemplateCell:function(l){void 0===l&&(l=t.tableBody);var n=a.columns;$(l).find("."+mDatatablePfx+"datatable__row").each((function(a,l){var o=$(l).data("obj")||{},i=e.getOption("rows.callback");"function"==typeof i&&i($(l),o,a);var r=e.getOption("rows.beforeTemplate");"function"==typeof r&&r($(l),o,a),void 0===o&&(o={},$(l).find("."+mDatatablePfx+"datatable__cell").each((function(a,t){var e=$.grep(n,(function(a,e){return $(t).data("field")===a.field}))[0];void 0!==e&&(o[e.field]=$(t).text())}))),$(l).find("."+mDatatablePfx+"datatable__cell").each((function(l,i){var r=$.grep(n,(function(a,t){return $(i).data("field")===a.field}))[0];if(void 0!==r&&void 0!==r.template){var d="";"string"==typeof r.template&&(d=e.dataPlaceholder(r.template,o)),"function"==typeof r.template&&(d=r.template(o,a,t));var s=document.createElement("span");s.innerHTML=d,$(i).html(s),void 0!==r.overflow&&($(s).css("overflow",r.overflow),$(s).css("position","relative"))}}));var d=e.getOption("rows.afterTemplate");"function"==typeof d&&d($(l),o,a)}))},setupSystemColumn:function(){mDatatablePlugin.setupSystemColumn(a,t,e)},adjustCellsWidth:function(){var a=$(t.tableHead).width(),l=$(t.tableHead).find("."+mDatatablePfx+"datatable__row:first-child").find("."+mDatatablePfx+"datatable__cell:visible").length;if(l>0){a-=20*l;var n=Math.floor(a/l);n<=e.offset&&(n=e.offset),$(t.table).find("."+mDatatablePfx+"datatable__row").find("."+mDatatablePfx+"datatable__cell:visible").each((function(a,t){var e=n,l=$(t).data("width");void 0!==l&&(e=l),$(t).children().css("width",parseInt(e))}))}return t},adjustCellsHeight:function(){$.each($(t.table).children(),(function(a,t){for(var e=$(t).find("."+mDatatablePfx+"datatable__row").first().parent().find("."+mDatatablePfx+"datatable__row").length,l=1;l<=e;l++){var n=$(t).find("."+mDatatablePfx+"datatable__row:nth-child("+l+")");if($(n).length>0){var o=Math.max.apply(null,$(n).map((function(){return $(this).height()})).get());$(n).css("height",Math.ceil(parseInt(o)))}}}))},setupDOM:function(a){$(a).find("> thead").addClass(mDatatablePfx+"datatable__head"),$(a).find("> tbody").addClass(mDatatablePfx+"datatable__body"),$(a).find("> tfoot").addClass(mDatatablePfx+"datatable__foot"),$(a).find("tr").addClass(mDatatablePfx+"datatable__row"),$(a).find("tr > th, tr > td").addClass(mDatatablePfx+"datatable__cell"),$(a).find("tr > th, tr > td").each((function(a,t){0===$(t).find("span").length&&$(t).wrapInner($("<span/>").css("width",e.offset))}))},scrollbar:function(){var l={scrollable:null,tableLocked:null,mcsOptions:{scrollInertia:0,autoDraggerLength:!0,autoHideScrollbar:!0,autoExpandScrollbar:!1,alwaysShowScrollbar:0,mouseWheel:{scrollAmount:120,preventDefault:!1},advanced:{updateOnContentResize:!0,autoExpandHorizontalScroll:!0},theme:"minimal-dark"},init:function(){var n=mDatatableUtil.getViewPort().width;if(a.layout.scroll){$(t.wrap).addClass(mDatatablePfx+"datatable--scroll");var o=$(t.tableBody).find("."+mDatatablePfx+"datatable__lock--scroll");$(o).find("."+mDatatablePfx+"datatable__row").length>0&&$(o).length>0?(l.scrollHead=$(t.tableHead).find("> ."+mDatatablePfx+"datatable__lock--scroll > ."+mDatatablePfx+"datatable__row"),l.scrollFoot=$(t.tableFoot).find("> ."+mDatatablePfx+"datatable__lock--scroll > ."+mDatatablePfx+"datatable__row"),l.tableLocked=$(t.tableBody).find("."+mDatatablePfx+"datatable__lock:not(."+mDatatablePfx+"datatable__lock--scroll)"),e.getOption("layout.customScrollbar")&&10!=mDatatableUtil.detectIE()&&n>mDatatableUtil.getBreakpoint("lg")?l.initCustomScrollbar(o[0]):l.initDefaultScrollbar(o)):$(t.tableBody).find("."+mDatatablePfx+"datatable__row").length>0&&(l.scrollHead=$(t.tableHead).find("> ."+mDatatablePfx+"datatable__row"),l.scrollFoot=$(t.tableFoot).find("> ."+mDatatablePfx+"datatable__row"),e.getOption("layout.customScrollbar")&&10!=mDatatableUtil.detectIE()&&n>mDatatableUtil.getBreakpoint("lg")?l.initCustomScrollbar(t.tableBody):l.initDefaultScrollbar(t.tableBody))}else $(t.table).css("overflow-x","auto")},initDefaultScrollbar:function(a){$(a).css("overflow","auto").off().on("scroll",l.onScrolling)},onScrolling:function(a){var t=$(this).scrollLeft(),e=$(this).scrollTop();$(l.scrollHead).css("left",-t),$(l.scrollFoot).css("left",-t),$(l.tableLocked).each((function(a,t){$(t).css("top",-e)}))},initCustomScrollbar:function(a){l.scrollable=a,e.initScrollbar(a),$(a).off().on("scroll",l.onScrolling)}};return l.init(),l},initScrollbar:function(a,e){if($(t.tableBody).css("overflow",""),mDatatableUtil.hasClass(a,"ps"))$(a).data("ps").update();else{var l=new PerfectScrollbar(a);$(a).data("ps",l)}},setHeadTitle:function(l){void 0===l&&(l=t.tableHead),l=$(l)[0];var n=a.columns,o=l.getElementsByTagName("tr")[0],i=l.getElementsByTagName("td");void 0===o&&(o=document.createElement("tr"),l.appendChild(o)),$.each(n,(function(a,e){var l=i[a];if(void 0===l&&(l=document.createElement("th"),o.appendChild(l)),void 0!==e.title&&(l.innerHTML=e.title,l.setAttribute("data-field",e.field),mDatatableUtil.addClass(l,e.class),$(l).data(e)),void 0!==e.attr&&$.each(e.attr,(function(a,t){l.setAttribute(a,t)})),void 0!==e.textAlign){var n=void 0!==t.textAlign[e.textAlign]?t.textAlign[e.textAlign]:"";mDatatableUtil.addClass(l,n)}})),e.setupDOM(l)},dataRender:function(l){$(t.table).siblings("."+mDatatablePfx+"datatable__pager").removeClass(mDatatablePfx+"datatable--paging-loaded");var n=function(){t.dataSet=t.dataSet||[],e.localDataUpdate();var l=e.getDataSourceParam("pagination");0===l.perpage&&(l.perpage=a.data.pageSize||10),l.total=t.dataSet.length;var n=Math.max(l.perpage*(l.page-1),0),o=Math.min(n+l.perpage,l.total);return t.dataSet=$(t.dataSet).slice(n,o),l},o=function(l){var o=function(a,l){$(a.pager).hasClass(mDatatablePfx+"datatable--paging-loaded")||($(a.pager).remove(),a.init(l)),$(a.pager).off().on(mDatatablePfx+"datatable--on-goto-page",(function(t){$(a.pager).remove(),a.init(l)}));var n=Math.max(l.perpage*(l.page-1),0),o=Math.min(n+l.perpage,l.total);e.localDataUpdate(),t.dataSet=$(t.dataSet).slice(n,o),e.insertData()};if($(t.wrap).removeClass(mDatatablePfx+"datatable--error"),a.pagination)if(a.data.serverPaging&&"local"!==a.data.type){var i=e.getObject("meta",l||null);null!==i?e.paging(i):e.paging(n(),o)}else e.paging(n(),o);else e.localDataUpdate();e.insertData()};"local"===a.data.type||!1===a.data.serverSorting&&"sort"===l||!1===a.data.serverFiltering&&"search"===l?o():e.getData().done(o)},insertData:function(){t.dataSet=t.dataSet||[];var l=e.getDataSourceParam(),n=l.pagination,o=(Math.max(n.page,1)-1)*n.perpage,i=Math.min(n.page,n.pages)*n.perpage,r={};void 0!==a.data.attr.rowProps&&a.data.attr.rowProps.length&&(r=a.data.attr.rowProps.slice(o,i));var d=document.createElement("tbody");d.style.visibility="hidden";var s=a.columns.length;if($.each(t.dataSet,(function(n,o){var i=document.createElement("tr");i.setAttribute("data-row",n),$(i).data("obj",o),void 0!==r[n]&&$.each(r[n],(function(){i.setAttribute(this.name,this.value)}));for(var c=0;c<s;c+=1){var b=a.columns[c],f=[];if(e.getObject("sort.field",l)===b.field&&f.push(mDatatablePfx+"datatable__cell--sorted"),void 0!==b.textAlign){var p=void 0!==t.textAlign[b.textAlign]?t.textAlign[b.textAlign]:"";f.push(p)}void 0!==b.class&&f.push(b.class);var u=document.createElement("td");mDatatableUtil.addClass(u,f.join(" ")),u.setAttribute("data-field",b.field),u.innerHTML=e.getObject(b.field,o),i.appendChild(u)}d.appendChild(i)})),0===t.dataSet.length){var c=document.createElement("span");mDatatableUtil.addClass(c,mDatatablePfx+"datatable--error"),c.innerHTML=e.getOption("translate.records.noRecords"),d.appendChild(c),$(t.wrap).addClass(mDatatablePfx+"datatable--error "+mDatatablePfx+"datatable--loaded"),e.spinnerCallback(!1)}$(t.tableBody).replaceWith(d),t.tableBody=d,e.setupDOM(t.table),e.setupCellField([t.tableBody]),e.setupTemplateCell(t.tableBody),e.layoutUpdate()},updateTableComponents:function(){t.tableHead=$(t.table).children("thead"),t.tableBody=$(t.table).children("tbody"),t.tableFoot=$(t.table).children("tfoot")},getData:function(){e.spinnerCallback(!0);var l={dataType:"json",method:"GET",data:{},timeout:e.getOption("data.source.read.timeout")||3e4};if("local"===a.data.type&&(l.url=a.data.source),"remote"===a.data.type){l.url=e.getOption("data.source.read.url"),"string"!=typeof l.url&&(l.url=e.getOption("data.source.read")),"string"!=typeof l.url&&(l.url=e.getOption("data.source")),l.headers=e.getOption("data.source.read.headers"),l.method=e.getOption("data.source.read.method")||"GET";var n=e.getDataSourceParam();e.getOption("data.serverPaging")||delete n.pagination,e.getOption("data.serverSorting")||delete n.sort,l.data=$.extend(!0,l.data,n,e.getOption("data.source.read.params"))}return $.ajax(l).done((function(a,l,n){t.lastResponse=a,t.dataSet=t.originalDataSet=e.dataMapCallback(a),e.setAutoColumns(),$(t).trigger(mDatatablePfx+"datatable--on-ajax-done",[t.dataSet])})).fail((function(a,l,n){$(t).trigger(mDatatablePfx+"datatable--on-ajax-fail",[a]),$(t.tableBody).html($("<span/>").addClass(mDatatablePfx+"datatable--error").html(e.getOption("translate.records.noRecords"))),$(t.wrap).addClass(mDatatablePfx+"datatable--error "+mDatatablePfx+"datatable--loaded"),e.spinnerCallback(!1)})).always((function(){}))},paging:function(a,l){var n={meta:null,pager:null,paginateEvent:null,pagerLayout:{pagination:null,info:null},callback:null,init:function(a){n.meta=a,n.meta.page=parseInt(n.meta.page),n.meta.pages=parseInt(n.meta.pages),n.meta.perpage=parseInt(n.meta.perpage),n.meta.total=parseInt(n.meta.total),n.meta.pages=Math.max(Math.ceil(n.meta.total/n.meta.perpage),1),n.meta.page>n.meta.pages&&(n.meta.page=n.meta.pages),n.paginateEvent=e.getTablePrefix(),n.pager=$(t.table).siblings("."+mDatatablePfx+"datatable__pager"),$(n.pager).hasClass(mDatatablePfx+"datatable--paging-loaded")||($(n.pager).remove(),0!==n.meta.pages&&(e.setDataSourceParam("pagination",{page:n.meta.page,pages:n.meta.pages,perpage:n.meta.perpage,total:n.meta.total}),n.callback=n.serverCallback,"function"==typeof l&&(n.callback=l),n.addPaginateEvent(),n.populate(),n.meta.page=Math.max(n.meta.page||1,n.meta.page),$(t).trigger(n.paginateEvent,n.meta),n.pagingBreakpoint.call(),$(window).resize(n.pagingBreakpoint)))},serverCallback:function(a,t){e.dataRender()},populate:function(){var a=e.getOption("layout.icons.pagination"),l=e.getOption("translate.toolbar.pagination.items.default");n.pager=$("<div/>").addClass(mDatatablePfx+"datatable__pager "+mDatatablePfx+"datatable--paging-loaded clearfix");var o=$("<ul/>").addClass(mDatatablePfx+"datatable__pager-nav");n.pagerLayout.pagination=o,$("<li/>").append($("<a/>").attr("title",l.first).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--first").append($("<i/>").addClass(a.first)).on("click",n.gotoMorePage).attr("data-page",1)).appendTo(o),$("<li/>").append($("<a/>").attr("title",l.prev).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--prev").append($("<i/>").addClass(a.prev)).on("click",n.gotoMorePage)).appendTo(o),$("<li/>").append($("<a/>").attr("title",l.more).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--more-prev").html($("<i/>").addClass(a.more)).on("click",n.gotoMorePage)).appendTo(o),$("<li/>").append($("<input/>").attr("type","text").addClass(mDatatablePfx+"pager-input form-control").attr("title",l.input).on("keyup",(function(){$(this).attr("data-page",Math.abs($(this).val()))})).on("keypress",(function(a){13===a.which&&n.gotoMorePage(a)}))).appendTo(o);var i=e.getOption("toolbar.items.pagination.pages.desktop.pagesNumber"),r=Math.ceil(n.meta.page/i)*i,d=r-i;r>n.meta.pages&&(r=n.meta.pages);for(var s=d;s<r;s++){var c=s+1;$("<li/>").append($("<a/>").addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link-number").text(c).attr("data-page",c).attr("title",c).on("click",n.gotoPage)).appendTo(o)}$("<li/>").append($("<a/>").attr("title",l.more).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--more-next").html($("<i/>").addClass(a.more)).on("click",n.gotoMorePage)).appendTo(o),$("<li/>").append($("<a/>").attr("title",l.next).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--next").append($("<i/>").addClass(a.next)).on("click",n.gotoMorePage)).appendTo(o),$("<li/>").append($("<a/>").attr("title",l.last).addClass(mDatatablePfx+"datatable__pager-link "+mDatatablePfx+"datatable__pager-link--last").append($("<i/>").addClass(a.last)).on("click",n.gotoMorePage).attr("data-page",n.meta.pages)).appendTo(o),e.getOption("toolbar.items.info")&&(n.pagerLayout.info=$("<div/>").addClass(mDatatablePfx+"datatable__pager-info").append($("<span/>").addClass(mDatatablePfx+"datatable__pager-detail"))),$.each(e.getOption("toolbar.layout"),(function(a,t){$(n.pagerLayout[t]).appendTo(n.pager)}));var b=$("<select/>").addClass("selectpicker "+mDatatablePfx+"datatable__pager-size").attr("title",e.getOption("translate.toolbar.pagination.items.default.select")).attr("data-width","70px").val(n.meta.perpage).on("change",n.updatePerpage).prependTo(n.pagerLayout.info),f=e.getOption("toolbar.items.pagination.pageSizeSelect");0==f.length&&(f=[10,20,30,50,100]),$.each(f,(function(a,t){var e=t;-1===t&&(e="All"),$("<option/>").attr("value",t).html(e).appendTo(b)})),$(t).ready((function(){$(".selectpicker").selectpicker().siblings(".dropdown-toggle").attr("title",e.getOption("translate.toolbar.pagination.items.default.select"))})),n.paste()},paste:function(){$.each($.unique(e.getOption("toolbar.placement")),(function(a,e){"bottom"===e&&$(n.pager).clone(!0).insertAfter(t.table),"top"===e&&$(n.pager).clone(!0).addClass(mDatatablePfx+"datatable__pager--top").insertBefore(t.table)}))},gotoMorePage:function(a){if(a.preventDefault(),"disabled"===$(this).attr("disabled"))return!1;var t=$(this).attr("data-page");return void 0===t&&(t=$(a.target).attr("data-page")),n.openPage(parseInt(t)),!1},gotoPage:function(a){a.preventDefault(),$(this).hasClass(mDatatablePfx+"datatable__pager-link--active")||n.openPage(parseInt($(this).data("page")))},openPage:function(a){n.meta.page=parseInt(a),$(t).trigger(n.paginateEvent,n.meta),n.callback(n,n.meta),$(n.pager).trigger(mDatatablePfx+"datatable--on-goto-page",n.meta)},updatePerpage:function(a){a.preventDefault(),n.pager=$(t.table).siblings("."+mDatatablePfx+"datatable__pager").removeClass(mDatatablePfx+"datatable--paging-loaded"),a.originalEvent&&(n.meta.perpage=parseInt($(this).val())),$(n.pager).find("select."+mDatatablePfx+"datatable__pager-size").val(n.meta.perpage).attr("data-selected",n.meta.perpage),e.setDataSourceParam("pagination",{page:n.meta.page,pages:n.meta.pages,perpage:n.meta.perpage,total:n.meta.total}),$(n.pager).trigger(mDatatablePfx+"datatable--on-update-perpage",n.meta),$(t).trigger(n.paginateEvent,n.meta),n.callback(n,n.meta),n.updateInfo.call()},addPaginateEvent:function(a){$(t).off(n.paginateEvent).on(n.paginateEvent,(function(a,l){e.spinnerCallback(!0),n.pager=$(t.table).siblings("."+mDatatablePfx+"datatable__pager");var o=$(n.pager).find("."+mDatatablePfx+"datatable__pager-nav");$(o).find("."+mDatatablePfx+"datatable__pager-link--active").removeClass(mDatatablePfx+"datatable__pager-link--active"),$(o).find("."+mDatatablePfx+'datatable__pager-link-number[data-page="'+l.page+'"]').addClass(mDatatablePfx+"datatable__pager-link--active"),$(o).find("."+mDatatablePfx+"datatable__pager-link--prev").attr("data-page",Math.max(l.page-1,1)),$(o).find("."+mDatatablePfx+"datatable__pager-link--next").attr("data-page",Math.min(l.page+1,l.pages)),$(n.pager).each((function(){$(this).find("."+mDatatablePfx+'pager-input[type="text"]').prop("value",l.page)})),$(n.pager).find("."+mDatatablePfx+"datatable__pager-nav").show(),l.pages<=1&&$(n.pager).find("."+mDatatablePfx+"datatable__pager-nav").hide(),e.setDataSourceParam("pagination",{page:n.meta.page,pages:n.meta.pages,perpage:n.meta.perpage,total:n.meta.total}),$(n.pager).find("select."+mDatatablePfx+"datatable__pager-size").val(l.perpage).attr("data-selected",l.perpage),$(t.table).find("."+mDatatablePfx+'checkbox > [type="checkbox"]').prop("checked",!1),$(t.table).find("."+mDatatablePfx+"datatable__row--active").removeClass(mDatatablePfx+"datatable__row--active"),n.updateInfo.call(),n.pagingBreakpoint.call()}))},updateInfo:function(){var a=Math.max(n.meta.perpage*(n.meta.page-1)+1,1),t=Math.min(a+n.meta.perpage-1,n.meta.total);$(n.pager).find("."+mDatatablePfx+"datatable__pager-info").find("."+mDatatablePfx+"datatable__pager-detail").html(e.dataPlaceholder(e.getOption("translate.toolbar.pagination.items.info"),{start:a,end:-1===n.meta.perpage?n.meta.total:t,pageSize:-1===n.meta.perpage||n.meta.perpage>=n.meta.total?n.meta.total:n.meta.perpage,total:n.meta.total}))},pagingBreakpoint:function(){var a=$(t.table).siblings("."+mDatatablePfx+"datatable__pager").find("."+mDatatablePfx+"datatable__pager-nav");if(0!==$(a).length){var l=e.getCurrentPage(),o=$(a).find("."+mDatatablePfx+"pager-input").closest("li");$(a).find("li").show(),$.each(e.getOption("toolbar.items.pagination.pages"),(function(t,i){if(mDatatableUtil.isInResponsiveRange(t)){switch(t){case"desktop":case"tablet":Math.ceil(l/i.pagesNumber),i.pagesNumber,i.pagesNumber;$(o).hide(),n.meta=e.getDataSourceParam("pagination"),n.paginationUpdate();break;case"mobile":$(o).show(),$(a).find("."+mDatatablePfx+"datatable__pager-link--more-prev").closest("li").hide(),$(a).find("."+mDatatablePfx+"datatable__pager-link--more-next").closest("li").hide(),$(a).find("."+mDatatablePfx+"datatable__pager-link-number").closest("li").hide()}return!1}}))}},paginationUpdate:function(){var a=$(t.table).siblings("."+mDatatablePfx+"datatable__pager").find("."+mDatatablePfx+"datatable__pager-nav"),l=$(a).find("."+mDatatablePfx+"datatable__pager-link--more-prev"),o=$(a).find("."+mDatatablePfx+"datatable__pager-link--more-next"),i=$(a).find("."+mDatatablePfx+"datatable__pager-link--first"),r=$(a).find("."+mDatatablePfx+"datatable__pager-link--prev"),d=$(a).find("."+mDatatablePfx+"datatable__pager-link--next"),s=$(a).find("."+mDatatablePfx+"datatable__pager-link--last"),c=$(a).find("."+mDatatablePfx+"datatable__pager-link-number"),b=Math.max($(c).first().data("page")-1,1);$(l).each((function(a,t){$(t).attr("data-page",b)})),1===b?$(l).parent().hide():$(l).parent().show();var f=Math.min($(c).last().data("page")+1,n.meta.pages);$(o).each((function(a,t){$(o).attr("data-page",f).show()})),f===n.meta.pages&&f===$(c).last().data("page")?$(o).parent().hide():$(o).parent().show(),1===n.meta.page?($(i).attr("disabled",!0).addClass(mDatatablePfx+"datatable__pager-link--disabled"),$(r).attr("disabled",!0).addClass(mDatatablePfx+"datatable__pager-link--disabled")):($(i).removeAttr("disabled").removeClass(mDatatablePfx+"datatable__pager-link--disabled"),$(r).removeAttr("disabled").removeClass(mDatatablePfx+"datatable__pager-link--disabled")),n.meta.page===n.meta.pages?($(d).attr("disabled",!0).addClass(mDatatablePfx+"datatable__pager-link--disabled"),$(s).attr("disabled",!0).addClass(mDatatablePfx+"datatable__pager-link--disabled")):($(d).removeAttr("disabled").removeClass(mDatatablePfx+"datatable__pager-link--disabled"),$(s).removeAttr("disabled").removeClass(mDatatablePfx+"datatable__pager-link--disabled"));var p=e.getOption("toolbar.items.pagination.navigation");p.first||$(i).remove(),p.prev||$(r).remove(),p.next||$(d).remove(),p.last||$(s).remove()}};return n.init(a),n},columnHide:function(){var e=mDatatableUtil.getViewPort().width;$.each(a.columns,(function(a,l){if(void 0!==l.responsive){var n=l.field,o=$.grep($(t.table).find("."+mDatatablePfx+"datatable__cell"),(function(a,t){return n===$(a).data("field")}));mDatatableUtil.getBreakpoint(l.responsive.hidden)>=e?$(o).hide():$(o).show(),mDatatableUtil.getBreakpoint(l.responsive.visible)<=e?$(o).show():$(o).hide()}}))},setupSubDatatable:function(){var l=e.getOption("detail.content");if("function"==typeof l&&!($(t.table).find("."+mDatatablePfx+"datatable__subtable").length>0)){$(t.wrap).addClass(mDatatablePfx+"datatable--subtable"),a.columns[0].subtable=!0;var n=function(n){n.preventDefault();var o=$(this).closest("."+mDatatablePfx+"datatable__row"),i=$(o).next("."+mDatatablePfx+"datatable__row-subtable");0===$(i).length&&(i=$("<tr/>").addClass(mDatatablePfx+"datatable__row-subtable "+mDatatablePfx+"datatable__row-loading").hide().append($("<td/>").addClass(mDatatablePfx+"datatable__subtable").attr("colspan",e.getTotalColumns())),$(o).after(i),$(o).hasClass(mDatatablePfx+"datatable__row--even")&&$(i).addClass(mDatatablePfx+"datatable__row-subtable--even")),$(i).toggle();var r=$(i).find("."+mDatatablePfx+"datatable__subtable"),d=$(this).closest("[data-field]:first-child").find("."+mDatatablePfx+"datatable__toggle-subtable").data("value"),s=$(this).find("i").removeAttr("class");$(o).hasClass(mDatatablePfx+"datatable__row--subtable-expanded")?($(s).addClass(e.getOption("layout.icons.rowDetail.collapse")),$(o).removeClass(mDatatablePfx+"datatable__row--subtable-expanded"),$(t).trigger(mDatatablePfx+"datatable--on-collapse-subtable",[o])):($(s).addClass(e.getOption("layout.icons.rowDetail.expand")),$(o).addClass(mDatatablePfx+"datatable__row--subtable-expanded"),$(t).trigger(mDatatablePfx+"datatable--on-expand-subtable",[o])),0===$(r).find("."+mDatatablePfx+"datatable").length&&($.map(t.dataSet,(function(t,e){return d===t[a.columns[0].field]&&(n.data=t,!0)})),n.detailCell=r,n.parentRow=o,n.subTable=r,l(n),$(r).children("."+mDatatablePfx+"datatable").on(mDatatablePfx+"datatable--on-init",(function(a){$(i).removeClass(mDatatablePfx+"datatable__row-loading")})),"local"===e.getOption("data.type")&&$(i).removeClass(mDatatablePfx+"datatable__row-loading"))},o=a.columns;$(t.tableBody).find("."+mDatatablePfx+"datatable__row").each((function(a,t){$(t).find("."+mDatatablePfx+"datatable__cell").each((function(a,t){var l=$.grep(o,(function(a,e){return $(t).data("field")===a.field}))[0];if(void 0!==l){var i=$(t).text();if(void 0!==l.subtable&&l.subtable){if($(t).find("."+mDatatablePfx+"datatable__toggle-subtable").length>0)return;$(t).html($("<a/>").addClass(mDatatablePfx+"datatable__toggle-subtable").attr("href","#").attr("data-value",i).attr("title",e.getOption("detail.title")).on("click",n).append($("<i/>").css("width",$(t).data("width")).addClass(e.getOption("layout.icons.rowDetail.collapse"))))}}}))}))}},dataMapCallback:function(a){var t=a;return"function"==typeof e.getOption("data.source.read.map")?e.getOption("data.source.read.map")(a):(void 0!==a&&void 0!==a.data&&(t=a.data),t)},isSpinning:!1,spinnerCallback:function(a){if(a){if(!e.isSpinning){var l=e.getOption("layout.spinner");!0===l.message&&(l.message=e.getOption("translate.records.processing")),e.isSpinning=!0,"undefined"!=typeof mApp&&mApp.block(t,l)}}else e.isSpinning=!1,"undefined"!=typeof mApp&&mApp.unblock(t)},sortCallback:function(a,t,e){var l=e.type||"string",n=e.format||"",o=e.field;return $(a).sort((function(a,e){var i=a[o],r=e[o];switch(l){case"date":if("undefined"==typeof moment)throw new Error("Moment.js is required.");var d=moment(i,n).diff(moment(r,n));return"asc"===t?d>0?1:d<0?-1:0:d<0?1:d>0?-1:0;case"number":return isNaN(parseFloat(i))&&null!=i&&(i=Number(i.replace(/[^0-9\.-]+/g,""))),isNaN(parseFloat(r))&&null!=r&&(r=Number(r.replace(/[^0-9\.-]+/g,""))),i=parseFloat(i),r=parseFloat(r),"asc"===t?i>r?1:i<r?-1:0:i<r?1:i>r?-1:0;default:return"asc"===t?i>r?1:i<r?-1:0:i<r?1:i>r?-1:0}}))},log:function(a,e){void 0===e&&(e=""),t.debug&&console.log(a,e)},autoHide:function(){$(t.table).find("."+mDatatablePfx+"datatable__cell").show(),$(t.tableBody).each((function(){for(;$(this)[0].offsetWidth<$(this)[0].scrollWidth;)$(t.table).find("."+mDatatablePfx+"datatable__row").each((function(a){var t=$(this).find("."+mDatatablePfx+"datatable__cell").not(":hidden").last();$(t).hide()})),e.adjustCellsWidth.call()}));var l=function(t){t.preventDefault();var l=$(this).closest("."+mDatatablePfx+"datatable__row"),n=$(l).next();if($(n).hasClass(mDatatablePfx+"datatable__row-detail"))$(this).find("i").removeClass(e.getOption("layout.icons.rowDetail.expand")).addClass(e.getOption("layout.icons.rowDetail.collapse")),$(n).remove();else{$(this).find("i").removeClass(e.getOption("layout.icons.rowDetail.collapse")).addClass(e.getOption("layout.icons.rowDetail.expand"));var o=$(l).find("."+mDatatablePfx+"datatable__cell:hidden").clone().show();n=$("<tr/>").addClass(mDatatablePfx+"datatable__row-detail").insertAfter(l);var i=$("<td/>").addClass(mDatatablePfx+"datatable__detail").attr("colspan",e.getTotalColumns()).appendTo(n),r=$("<table/>");$(o).each((function(){var t=$(this).data("field"),l=$.grep(a.columns,(function(a,e){return t===a.field}))[0];$(r).append($('<tr class="'+mDatatablePfx+'datatable__row"></tr>').append($('<td class="'+mDatatablePfx+'datatable__cell"></td>').append($("<span/>").css("width",e.offset).append(l.title))).append(this))})),$(i).append(r)}};$(t.tableBody).find("."+mDatatablePfx+"datatable__row").each((function(){$(this).prepend($("<td/>").addClass(mDatatablePfx+"datatable__cell "+mDatatablePfx+"datatable__toggle--detail").append($("<a/>").addClass(mDatatablePfx+"datatable__toggle-detail").attr("href","").on("click",l).append($("<i/>").css("width","21px").addClass(e.getOption("layout.icons.rowDetail.collapse"))))),0===$(t.tableHead).find("."+mDatatablePfx+"datatable__toggle-detail").length?($(t.tableHead).find("."+mDatatablePfx+"datatable__row").first().prepend('<th class="'+mDatatablePfx+"datatable__cell "+mDatatablePfx+'datatable__toggle-detail"><span style="width: 21px"></span></th>'),$(t.tableFoot).find("."+mDatatablePfx+"datatable__row").first().prepend('<th class="'+mDatatablePfx+"datatable__cell "+mDatatablePfx+'datatable__toggle-detail"><span style="width: 21px"></span></th>')):$(t.tableHead).find("."+mDatatablePfx+"datatable__toggle-detail").find("span").css("width","21px")}))},hoverColumn:function(){$(t.tableBody).on("mouseenter","."+mDatatablePfx+"datatable__cell",(function(){var a=$(e.cell(this).nodes()).index();$(e.cells().nodes()).removeClass(mDatatablePfx+"datatable__cell--hover"),$(e.column(a).nodes()).addClass(mDatatablePfx+"datatable__cell--hover")}))},setAutoColumns:function(){e.getOption("data.autoColumns")&&($.each(t.dataSet[0],(function(t,e){0===$.grep(a.columns,(function(a,e){return t===a.field})).length&&a.columns.push({field:t,title:t})})),$(t.tableHead).find("."+mDatatablePfx+"datatable__row").remove(),e.setHeadTitle(),e.getOption("layout.footer")&&($(t.tableFoot).find("."+mDatatablePfx+"datatable__row").remove(),e.setHeadTitle(t.tableFoot)))},isLocked:function(){return mDatatableUtil.hasClass(t.wrap[0],mDatatablePfx+"datatable--lock")||!1},getExtraSpace:function(a){return parseInt($(a).css("paddingRight"))+parseInt($(a).css("paddingLeft"))+(parseInt($(a).css("marginRight"))+parseInt($(a).css("marginLeft")))+Math.ceil($(a).css("border-right-width").replace("px",""))},dataPlaceholder:function(a,t){var e=a;return $.each(t,(function(a,t){e=e.replace("{{"+a+"}}",t)})),e},getTableId:function(a){void 0===a&&(a="");var e=$(t).attr("id");return void 0===e&&(e=$(t).attr("class").split(" ")[0]),e+a},getTablePrefix:function(a){return void 0!==a&&(a="-"+a),e.getTableId()+"-"+e.getDepth()+a},getDepth:function(){var a=0,e=t.table;do{e=$(e).parents("."+mDatatablePfx+"datatable__table"),a++}while($(e).length>0);return a},stateKeep:function(a,t){a=e.getTablePrefix(a),!1!==e.getOption("data.saveState")&&(e.getOption("data.saveState.webstorage")&&localStorage&&localStorage.setItem(a,JSON.stringify(t)),e.getOption("data.saveState.cookie")&&Cookies.set(a,JSON.stringify(t)))},stateGet:function(a,t){if(a=e.getTablePrefix(a),!1!==e.getOption("data.saveState")){var l=null;return null!=(l=e.getOption("data.saveState.webstorage")&&localStorage?localStorage.getItem(a):Cookies.get(a))?JSON.parse(l):void 0}},stateUpdate:function(a,t){var l=e.stateGet(a);null==l&&(l={}),e.stateKeep(a,$.extend({},l,t))},stateRemove:function(a){a=e.getTablePrefix(a),localStorage&&localStorage.removeItem(a),Cookies.remove(a)},getTotalColumns:function(a){return void 0===a&&(a=t.tableBody),$(a).find("."+mDatatablePfx+"datatable__row").first().find("."+mDatatablePfx+"datatable__cell").length},getOneRow:function(a,t,e){void 0===e&&(e=!0);var l=$(a).find("."+mDatatablePfx+"datatable__row:not(."+mDatatablePfx+"datatable__row-detail):nth-child("+t+")");return e&&(l=l.find("."+mDatatablePfx+"datatable__cell")),l},hasOverflowY:function(a){var t=$(a).find("."+mDatatablePfx+"datatable__row"),e=0;return t.length>0&&($(t).each((function(a,t){e+=Math.floor($(t).innerHeight())})),e>$(a).innerHeight())},sortColumn:function(a,e,l){void 0===e&&(e="asc"),void 0===l&&(l=!1);var n=$(a).index(),o=$(t.tableBody).find("."+mDatatablePfx+"datatable__row"),i=$(a).closest("."+mDatatablePfx+"datatable__lock").index();-1!==i&&(o=$(t.tableBody).find("."+mDatatablePfx+"datatable__lock:nth-child("+(i+1)+")").find("."+mDatatablePfx+"datatable__row"));var r=$(o).parent();$(o).sort((function(a,t){var o=$(a).find("td:nth-child("+n+")").text(),i=$(t).find("td:nth-child("+n+")").text();return l&&(o=parseInt(o),i=parseInt(i)),"asc"===e?o>i?1:o<i?-1:0:o<i?1:o>i?-1:0})).appendTo(r)},sorting:function(){var l={init:function(){a.sortable&&($(t.tableHead).find("."+mDatatablePfx+"datatable__cell:not(."+mDatatablePfx+"datatable__cell--check)").addClass(mDatatablePfx+"datatable__cell--sort").off("click").on("click",l.sortClick),l.setIcon())},setIcon:function(){var a=e.getDataSourceParam("sort");if(!$.isEmptyObject(a)){var l=$(t.tableHead).find("."+mDatatablePfx+'datatable__cell[data-field="'+a.field+'"]').attr("data-sort",a.sort),n=$(l).find("span"),o=$(n).find("i"),i=e.getOption("layout.icons.sort");$(o).length>0?$(o).removeAttr("class").addClass(i[a.sort]):$(n).append($("<i/>").addClass(i[a.sort]))}},sortClick:function(n){var o=e.getDataSourceParam("sort"),i=$(this).data("field"),r=e.getColumnByField(i);if((void 0===r.sortable||!1!==r.sortable)&&($(t.tableHead).find("."+mDatatablePfx+"datatable__cell > span > i").remove(),a.sortable)){e.spinnerCallback(!0);var d="desc";e.getObject("field",o)===i&&(d=e.getObject("sort",o)),o={field:i,sort:d=void 0===d||"desc"===d?"asc":"desc"},e.setDataSourceParam("sort",o),l.setIcon(),setTimeout((function(){e.dataRender("sort"),$(t).trigger(mDatatablePfx+"datatable--on-sort",o)}),300)}}};l.init()},localDataUpdate:function(){var a=e.getDataSourceParam();void 0===t.originalDataSet&&(t.originalDataSet=t.dataSet);var l=e.getObject("sort.field",a),n=e.getObject("sort.sort",a),o=e.getColumnByField(l);if(void 0!==o&&!0!==e.getOption("data.serverSorting")?"function"==typeof o.sortCallback?t.dataSet=o.sortCallback(t.originalDataSet,n,o):t.dataSet=e.sortCallback(t.originalDataSet,n,o):t.dataSet=t.originalDataSet,"object"==typeof a.query&&!e.getOption("data.serverFiltering")){a.query=a.query||{};var i=function(a){for(var t in a)if(a.hasOwnProperty(t))if("string"==typeof a[t]){if(a[t].toLowerCase()==r||-1!==a[t].toLowerCase().indexOf(r))return!0}else if("number"==typeof a[t]){if(a[t]===r)return!0}else if("object"==typeof a[t])return i(a[t]);return!1},r=$(e.getOption("search.input")).val();void 0!==r&&""!==r&&(r=r.toLowerCase(),t.dataSet=$.grep(t.dataSet,i),delete a.query[e.getGeneralSearchKey()]),$.each(a.query,(function(t,e){""===e&&delete a.query[t]})),t.dataSet=e.filterArray(t.dataSet,a.query),t.dataSet=t.dataSet.filter((function(){return!0}))}return t.dataSet},filterArray:function(a,t,e){if("object"!=typeof a)return[];if(void 0===e&&(e="AND"),"object"!=typeof t)return a;if(e=e.toUpperCase(),-1===$.inArray(e,["AND","OR","NOT"]))return[];var l=Object.keys(t).length,n=[];return $.each(a,(function(a,o){var i=o,r=0;$.each(t,(function(a,t){if(t=t instanceof Array?t:[t],i.hasOwnProperty(a)){var e=i[a].toString().toLowerCase();t.forEach((function(a,t){a.toString().toLowerCase()!=e&&-1===e.indexOf(a.toString().toLowerCase())||r++}))}})),("AND"==e&&r==l||"OR"==e&&r>0||"NOT"==e&&0==r)&&(n[a]=o)})),a=n},resetScroll:function(){void 0===a.detail&&1===e.getDepth()&&($(t.table).find("."+mDatatablePfx+"datatable__row").css("left",0),$(t.table).find("."+mDatatablePfx+"datatable__lock").css("top",0),$(t.tableBody).scrollTop(0))},getColumnByField:function(t){var e;if(void 0!==t)return $.each(a.columns,(function(a,l){if(t===l.field)return e=l,!1})),e},getDefaultSortColumn:function(){var t;return $.each(a.columns,(function(a,e){if(void 0!==e.sortable&&-1!==$.inArray(e.sortable,["asc","desc"]))return t={sort:e.sortable,field:e.field},!1})),t},getHiddenDimensions:function(a,t){var e={position:"absolute",visibility:"hidden",display:"block"},l={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=$(a).parents().addBack().not(":visible");t="boolean"==typeof t&&t;var o=[];return n.each((function(){var a={};for(var t in e)a[t]=this.style[t],this.style[t]=e[t];o.push(a)})),l.width=$(a).width(),l.outerWidth=$(a).outerWidth(t),l.innerWidth=$(a).innerWidth(),l.height=$(a).height(),l.innerHeight=$(a).innerHeight(),l.outerHeight=$(a).outerHeight(t),n.each((function(a){var t=o[a];for(var l in e)this.style[l]=t[l]})),l},getGeneralSearchKey:function(){var a=$(e.getOption("search.input"));return $(a).prop("name")||$(a).prop("id")},getObject:function(a,t){return a.split(".").reduce((function(a,t){return null!==a&&void 0!==a[t]?a[t]:null}),t)},extendObj:function(a,t,e){var l=t.split("."),n=0;return function a(t){var o=l[n++];void 0!==t[o]&&null!==t[o]?"object"!=typeof t[o]&&"function"!=typeof t[o]&&(t[o]={}):t[o]={},n===l.length?t[o]=e:a(t[o])}(a),a},rowEvenOdd:function(){$(t.tableBody).find("."+mDatatablePfx+"datatable__row").removeClass(mDatatablePfx+"datatable__row--even"),$(t.wrap).hasClass(mDatatablePfx+"datatable--subtable")?$(t.tableBody).find("."+mDatatablePfx+"datatable__row:not(."+mDatatablePfx+"datatable__row-detail):even").addClass(mDatatablePfx+"datatable__row--even"):$(t.tableBody).find("."+mDatatablePfx+"datatable__row:nth-child(even)").addClass(mDatatablePfx+"datatable__row--even")},timer:0,redraw:function(){return e.adjustCellsWidth.call(),e.isLocked()&&(e.scrollbar(),e.resetScroll(),e.adjustCellsHeight.call()),e.adjustLockContainer.call(),e.initHeight.call(),t},load:function(){return e.reload(),t},reload:function(){return function(a,t){clearTimeout(e.timer),e.timer=setTimeout(a,t)}((function(){a.data.serverFiltering||e.localDataUpdate(),e.dataRender(),$(t).trigger(mDatatablePfx+"datatable--on-reloaded")}),e.getOption("search.delay")),t},getRecord:function(a){return void 0===t.tableBody&&(t.tableBody=$(t.table).children("tbody")),$(t.tableBody).find("."+mDatatablePfx+"datatable__cell:first-child").each((function(l,n){if(a==$(n).text()){var o=$(n).closest("."+mDatatablePfx+"datatable__row").index()+1;return t.API.record=t.API.value=e.getOneRow(t.tableBody,o),t}})),t},getColumn:function(a){return e.setSelectedRecords(),t.API.value=$(t.API.record).find('[data-field="'+a+'"]'),t},destroy:function(){$(t).parent().find("."+mDatatablePfx+"datatable__pager").remove();var a=$(t.initialDatatable).addClass(mDatatablePfx+"datatable--destroyed").show();return $(t).replaceWith(a),t=a,$(t).trigger(mDatatablePfx+"datatable--on-destroy"),e.isInit=!1,a=null},sort:function(a,l){l=void 0===l?"asc":l,e.spinnerCallback(!0);var n={field:a,sort:l};return e.setDataSourceParam("sort",n),setTimeout((function(){e.dataRender("sort"),$(t).trigger(mDatatablePfx+"datatable--on-sort",n),$(t.tableHead).find("."+mDatatablePfx+"datatable__cell > span > i").remove()}),300),t},getValue:function(){return $(t.API.value).text()},setActive:function(a){"string"==typeof a&&(a=$(t.tableBody).find("."+mDatatablePfx+'checkbox--single > [type="checkbox"][value="'+a+'"]')),$(a).prop("checked",!0);var e=$(a).closest("."+mDatatablePfx+"datatable__row").addClass(mDatatablePfx+"datatable__row--active"),l=$(e).index()+1;$(e).closest("."+mDatatablePfx+"datatable__lock").parent().find("."+mDatatablePfx+"datatable__row:nth-child("+l+")").addClass(mDatatablePfx+"datatable__row--active");var n=[];$(e).each((function(a,t){var e=$(t).find("."+mDatatablePfx+"checkbox--single:not(."+mDatatablePfx+'checkbox--all) > [type="checkbox"]').val();void 0!==e&&n.push(e)})),$(t).trigger(mDatatablePfx+"datatable--on-check",[n])},setInactive:function(a){"string"==typeof a&&(a=$(t.tableBody).find("."+mDatatablePfx+'checkbox--single > [type="checkbox"][value="'+a+'"]')),$(a).prop("checked",!1);var e=$(a).closest("."+mDatatablePfx+"datatable__row").removeClass(mDatatablePfx+"datatable__row--active"),l=$(e).index()+1;$(e).closest("."+mDatatablePfx+"datatable__lock").parent().find("."+mDatatablePfx+"datatable__row:nth-child("+l+")").removeClass(mDatatablePfx+"datatable__row--active");var n=[];$(e).each((function(a,t){var e=$(t).find("."+mDatatablePfx+"checkbox--single:not(."+mDatatablePfx+'checkbox--all) > [type="checkbox"]').val();void 0!==e&&n.push(e)})),$(t).trigger(mDatatablePfx+"datatable--on-uncheck",[n])},setActiveAll:function(a){var l=$(t.table).find("."+mDatatablePfx+"datatable__body ."+mDatatablePfx+"datatable__row").find("."+mDatatablePfx+"datatable__cell--check ."+mDatatablePfx+'checkbox [type="checkbox"]');a?e.setActive(l):e.setInactive(l)},setSelectedRecords:function(){return t.API.record=$(t.tableBody).find("."+mDatatablePfx+"datatable__row--active"),t},getSelectedRecords:function(){return e.setSelectedRecords(),t.API.record=t.rows("."+mDatatablePfx+"datatable__row--active").nodes(),t.API.record},getOption:function(t){return e.getObject(t,a)},setOption:function(t,l){a=e.extendObj(a,t,l)},search:function(t,l){void 0!==l&&(l=$.makeArray(l)),n=function(){var n=e.getDataSourceQuery();if(void 0===l&&void 0!==t){var o=e.getGeneralSearchKey();n[o]=t}"object"==typeof l&&($.each(l,(function(a,e){n[e]=t})),$.each(n,(function(a,t){(""===t||$.isEmptyObject(t))&&delete n[a]}))),e.setDataSourceQuery(n),a.data.serverFiltering||e.localDataUpdate(),e.dataRender("search")},o=e.getOption("search.delay"),clearTimeout(e.timer),e.timer=setTimeout(n,o);var n,o},setDataSourceParam:function(a,l){t.API.params=$.extend({},{pagination:{page:1,perpage:e.getOption("data.pageSize")},sort:e.getDefaultSortColumn(),query:{}},t.API.params,e.stateGet(e.stateId)),t.API.params=e.extendObj(t.API.params,a,l),e.stateKeep(e.stateId,t.API.params)},getDataSourceParam:function(a){return t.API.params=$.extend({},{pagination:{page:1,perpage:e.getOption("data.pageSize")},sort:e.getDefaultSortColumn(),query:{}},t.API.params,e.stateGet(e.stateId)),"string"==typeof a?e.getObject(a,t.API.params):t.API.params},getDataSourceQuery:function(){return e.getDataSourceParam("query")||{}},setDataSourceQuery:function(a){e.setDataSourceParam("query",a)},getCurrentPage:function(){return $(t.table).siblings("."+mDatatablePfx+"datatable__pager").last().find("."+mDatatablePfx+"datatable__pager-nav").find("."+mDatatablePfx+"datatable__pager-link."+mDatatablePfx+"datatable__pager-link--active").data("page")||1},getPageSize:function(){return $(t.table).siblings("."+mDatatablePfx+"datatable__pager").last().find("select."+mDatatablePfx+"datatable__pager-size").val()||10},getTotalRows:function(){return t.API.params.pagination.total},getDataSet:function(){return t.originalDataSet},hideColumn:function(e){$.map(a.columns,(function(a){return e===a.field&&(a.responsive={hidden:"xl"}),a}));var l=$.grep($(t.table).find("."+mDatatablePfx+"datatable__cell"),(function(a,t){return e===$(a).data("field")}));$(l).hide()},showColumn:function(e){$.map(a.columns,(function(a){return e===a.field&&delete a.responsive,a}));var l=$.grep($(t.table).find("."+mDatatablePfx+"datatable__cell"),(function(a,t){return e===$(a).data("field")}));$(l).show()},nodeTr:[],nodeTd:[],nodeCols:[],recentNode:[],table:function(){return t.table},row:function(a){return e.rows(a),e.nodeTr=e.recentNode=$(e.nodeTr).first(),t},rows:function(a){return e.nodeTr=e.recentNode=$(t.tableBody).find(a).filter("."+mDatatablePfx+"datatable__row"),t},column:function(a){return e.nodeCols=e.recentNode=$(t.tableBody).find("."+mDatatablePfx+"datatable__cell:nth-child("+(a+1)+")"),t},columns:function(a){var l=t.table;e.nodeTr===e.recentNode&&(l=e.nodeTr);var n=$(l).find("."+mDatatablePfx+'datatable__cell[data-field="'+a+'"]');return n.length>0?e.nodeCols=e.recentNode=n:e.nodeCols=e.recentNode=$(l).find(a).filter("."+mDatatablePfx+"datatable__cell"),t},cell:function(a){return e.cells(a),e.nodeTd=e.recentNode=$(e.nodeTd).first(),t},cells:function(a){var l=$(t.tableBody).find("."+mDatatablePfx+"datatable__cell");return void 0!==a&&(l=$(l).filter(a)),e.nodeTd=e.recentNode=l,t},remove:function(){return $(e.nodeTr.length)&&e.nodeTr===e.recentNode&&$(e.nodeTr).remove(),e.layoutUpdate(),t},visible:function(t){if($(e.recentNode.length)){var l=e.lockEnabledColumns();if(e.recentNode===e.nodeCols){var n=e.recentNode.index();if(e.isLocked()){var o=$(e.recentNode).closest("."+mDatatablePfx+"datatable__lock--scroll").length;o?n+=l.left.length+1:$(e.recentNode).closest("."+mDatatablePfx+"datatable__lock--right").length&&(n+=l.left.length+o+1)}}t?(e.recentNode===e.nodeCols&&delete a.columns[n].responsive,$(e.recentNode).show()):(e.recentNode===e.nodeCols&&e.setOption("columns."+n+".responsive",{hidden:"xl"}),$(e.recentNode).hide()),e.redraw()}},nodes:function(){return e.recentNode},dataset:function(){return t}};if($.each(e,(function(a,e){t[a]=e})),void 0!==a)if("string"==typeof a){var l=a;void 0!==(t=$(this).data(mDatatablePluginName))&&(a=t.options,e[l].apply(this,Array.prototype.slice.call(arguments,1)))}else t.data(mDatatablePluginName)||$(this).hasClass(mDatatablePfx+"datatable--loaded")||(t.dataSet=null,t.textAlign={left:mDatatablePfx+"datatable__cell--left",center:mDatatablePfx+"datatable__cell--center",right:mDatatablePfx+"datatable__cell--right"},a=$.extend(!0,{},$.fn[mDatatablePluginName].defaults,a),t.options=a,e.init.apply(this,[a]),$(t.wrap).data(mDatatablePluginName,t));else void 0===(t=$(this).data(mDatatablePluginName))&&$.error(mDatatablePluginName+" not initialized"),a=t.options;return t}console.log("No "+mDatatablePluginName+" element exist.")},$.fn.mDatatable.defaults={data:{type:"remote",source:null,pageSize:10,saveState:{cookie:!1,webstorage:!1},serverPaging:!1,serverFiltering:!1,serverSorting:!1,autoColumns:!1,attr:{rowProps:[]}},layout:{theme:"default",class:mDatatablePfx+"datatable--brand",scroll:!1,height:null,minHeight:0,footer:!1,header:!0,customScrollbar:!0,spinner:{overlayColor:"#000000",opacity:0,type:"loader",state:"brand",message:!0},icons:{sort:{asc:"la la-arrow-up",desc:"la la-arrow-down"},pagination:{next:"la la-angle-right",prev:"la la-angle-left",first:"la la-angle-double-left",last:"la la-angle-double-right",more:"la la-ellipsis-h"},rowDetail:{expand:"fa fa-caret-down",collapse:"fa fa-caret-right"}}},sortable:!0,resizable:!1,filterable:!1,pagination:!0,editable:!1,columns:[],search:{onEnter:!1,input:$("#search"),delay:400},rows:{callback:function(){},beforeTemplate:function(){},afterTemplate:function(){},autoHide:!1},toolbar:{layout:["pagination","info"],placement:["bottom"],items:{pagination:{type:"default",pages:{desktop:{layout:"default",pagesNumber:6},tablet:{layout:"default",pagesNumber:3},mobile:{layout:"compact"}},navigation:{prev:!0,next:!0,first:!0,last:!0},pageSizeSelect:[10,20,30,50,100]},info:!0}},translate:{records:{processing:"Cargando...",noRecords:"No se encontraron registros"},toolbar:{pagination:{items:{default:{first:"Primero",prev:"Anterior",next:"Siguiente",last:"ltimo",more:"Ms pginas",input:"Pgina",select:"Seleccionar tamao de pgina"},info:"Mostrando {{start}} - {{end}} de {{total}} registros"}}}},extensions:{}},function(a){a.fn.mDatatable=a.fn.mDatatable||{},a.fn.mDatatable.checkbox=function(t,e){var l={selectedAllRows:!1,selectedRows:[],unselectedRows:[],init:function(){l.selectorEnabled()&&(t.setDataSourceParam(e.vars.selectedAllRows,!1),t.stateRemove("checkbox"),e.vars.requestIds&&t.setDataSourceParam(e.vars.requestIds,!0),a(t).on("m-datatable--on-reloaded",(function(){t.stateRemove("checkbox"),t.setDataSourceParam(e.vars.selectedAllRows,!1),l.selectedAllRows=!1,l.selectedRows=[],l.unselectedRows=[]})),l.selectedAllRows=t.getDataSourceParam(e.vars.selectedAllRows),a(t).on("m-datatable--on-layout-updated",(function(e,n){n.table==a(t.wrap).attr("id")&&t.ready((function(){l.initVars(),l.initEvent(),l.initSelect()}))})),a(t).on("m-datatable--on-check",(function(e,n){n.forEach((function(a){l.selectedRows.push(a),l.unselectedRows=l.remove(l.unselectedRows,a)}));var o={};o.selectedRows=a.unique(l.selectedRows),o.unselectedRows=a.unique(l.unselectedRows),t.stateKeep("checkbox",o)})),a(t).on("m-datatable--on-uncheck",(function(e,n){n.forEach((function(a){l.unselectedRows.push(a),l.selectedRows=l.remove(l.selectedRows,a)}));var o={};o.selectedRows=a.unique(l.selectedRows),o.unselectedRows=a.unique(l.unselectedRows),t.stateKeep("checkbox",o)})))},initEvent:function(){a(t.tableHead).find('.m-checkbox--all > [type="checkbox"]').click((function(n){if(l.selectedRows=l.unselectedRows=[],t.stateRemove("checkbox"),a(this).is(":checked")?l.selectedAllRows=!0:l.selectedAllRows=!1,!e.vars.requestIds){a(this).is(":checked")&&(l.selectedRows=a.makeArray(a(t.tableBody).find('.m-checkbox--single > [type="checkbox"]').map((function(t,e){return a(e).val()}))));var o={};o.selectedRows=a.unique(l.selectedRows),t.stateKeep("checkbox",o)}t.setDataSourceParam(e.vars.selectedAllRows,l.selectedAllRows),a(t).trigger("m-datatable--on-click-checkbox",[a(this)])})),a(t.tableBody).find('.m-checkbox--single > [type="checkbox"]').click((function(n){var o=a(this).val();a(this).is(":checked")?(l.selectedRows.push(o),l.unselectedRows=l.remove(l.unselectedRows,o)):(l.unselectedRows.push(o),l.selectedRows=l.remove(l.selectedRows,o)),!e.vars.requestIds&&l.selectedRows.length<1&&a(t.tableHead).find('.m-checkbox--all > [type="checkbox"]').prop("checked",!1);var i={};i.selectedRows=a.unique(l.selectedRows),i.unselectedRows=a.unique(l.unselectedRows),t.stateKeep("checkbox",i),a(t).trigger("m-datatable--on-click-checkbox",[a(this)])}))},initSelect:function(){l.selectedAllRows&&e.vars.requestIds?(t.hasClass("m-datatable--error")||a(t.tableHead).find('.m-checkbox--all > [type="checkbox"]').prop("checked",!0),t.setActiveAll(!0),l.unselectedRows.forEach((function(a){t.setInactive(a)}))):(l.selectedRows.forEach((function(a){t.setActive(a)})),!t.hasClass("m-datatable--error")&&a(t.tableBody).find('.m-checkbox--single > [type="checkbox"]').not(":checked").length<1&&a(t.tableHead).find('.m-checkbox--all > [type="checkbox"]').prop("checked",!0))},selectorEnabled:function(){return a.grep(t.options.columns,(function(a,t){return a.selector||!1}))[0]},initVars:function(){var a=t.stateGet("checkbox");void 0!==a&&(l.selectedRows=a.selectedRows||[],l.unselectedRows=a.unselectedRows||[])},getSelectedId:function(a){if(l.initVars(),l.selectedAllRows&&e.vars.requestIds){void 0===a&&(a=e.vars.rowIds);var n=t.getObject(a,t.lastResponse)||[];return n.length>0&&l.unselectedRows.forEach((function(a){n=l.remove(n,parseInt(a))})),n}return l.selectedRows},remove:function(a,t){return a.filter((function(a){return a!==t}))}};return t.checkbox=function(){return l},"object"==typeof e&&(e=a.extend(!0,{},a.fn.mDatatable.checkbox.default,e),l.init.apply(this,[e])),t},a.fn.mDatatable.checkbox.default={vars:{selectedAllRows:"selectedAllRows",requestIds:"requestIds",rowIds:"meta.rowIds"}}}(jQuery);