var report_bachelor=function(){var e=function(){$("#careers").on("change",(function(){$(this).valid();for(var e=$(this).val(),a=new FormData,r=0;r<e.length;r++)a.append(`Select2Data[${r}]`,e[r]);$.ajax({type:"POST",url:"/admin/reporte-alumnos-bachilleres-y-titulados/programas-academicos".proto().parseURL(),data:a,contentType:!1,processData:!1}).done((function(e){$("#programs").empty(),$("#programs").select2({placeholder:"Todas",multiple:!0,data:e})}))}))},a=function(){$.ajax({type:"GET",url:"/admin/reporte-alumnos-bachilleres-y-titulados/facultades/get".proto().parseURL()}).done((function(e){$("#faculties").select2({placeholder:"Todas",data:e.items,multiple:!0}),null!=facultyList&&$("#faculties").val(facultyList).trigger("change")}))},r=function(){$("#faculties").on("change",(function(){$(this).valid();for(var e=$(this).val(),a=new FormData,r=0;r<e.length;r++)a.append(`Select2Data[${r}]`,e[r]);$.ajax({type:"POST",url:"/admin/reporte-alumnos-bachilleres-y-titulados/carreras".proto().parseURL(),data:a,contentType:!1,processData:!1}).done((function(e){$("#careers").empty(),$("#careers").select2({placeholder:"Todas",data:e,multiple:!0}),null!=careerList&&$("#careers").val(careerList).trigger("change")}))}))};return{load:function(){$("#form-valid").validate({submitHandler:function(e,a){$("#btnSend").addLoader(),$("#chart_div_report_bachelor").css("display","block"),mApp.block("#chart_div_report_bachelor",{type:"loader",message:"Cargando..."});var r=new FormData,t=$("#faculties").val(),o=$("#programs").val(),l=$("#careers").val(),n=$("#gradeType").val();if(null!=t)for(var s=0;s<t.length;s++)r.append(`LstFaculties[${s}]`,t[s]);if(null!=o)for(s=0;s<o.length;s++)r.append(`LstPrograms[${s}]`,o[s]);if(null!=l)for(s=0;s<l.length;s++)r.append(`LstCareers[${s}]`,l[s]);r.append("GradeType",n);var c="";switch(n){case"0":c+="Número de bachilleres y titulados";break;case"1":c+="Número de bachilleres";break;case"2":c+="Número de titulados"}$.ajax({type:"POST",url:"/admin/reporte-alumnos-bachilleres-y-titulados/reporte-cantidad".proto().parseURL(),processData:!1,contentType:!1,data:r,success:function(e){var a=0,r=[],t=[];if(null!=e&&null!=e)for(var o=0;o<e.length;o++)r.push(e[o].program),t.push(e[o].bachelorCount),a+=e[o].bachelorCount;Highcharts.chart("chart_div_report_bachelor",{title:{text:c},subtitle:{text:`Total :${a}`},xAxis:{categories:r},yAxis:{title:{text:""}},credits:{text:"",href:""},series:[{type:"column",colorByPoint:!0,data:t,showInLegend:!1}],exporting:{enabled:!0},lang:{contextButtonTitle:"Opciones",viewFullscreen:"Ver en pantalla completa",printChart:"Imprimir",downloadPNG:"Descargar PNG",downloadJPEG:"Descargar JPEG",downloadPDF:"Descargar PDF",downloadSVG:"Descargar SVG",downloadCSV:"Descargar CSV",downloadXLS:"Descargar XLS",openInCloud:"Abrir editor online"}})},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){$("#btnSend").removeLoader(),mApp.unblock("#chart_div_report_bachelor",{type:"loader",message:"Cargando..."})}})}}),$("#careers").select2({placeholder:"Todas"}),$("#programs").select2({placeholder:"Todas"}),$("#gradeType").select2({placeholder:"Todas"}),$("#programs").on("change",(function(){$(this).valid()})),a(),r(),e()}}}();$((function(){report_bachelor.load()}));