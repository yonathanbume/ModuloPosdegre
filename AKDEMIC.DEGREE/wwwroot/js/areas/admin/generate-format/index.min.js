var GenerateFormat=function(){var t={objects:{}},a=function(){$("#search").doneTyping((function(){t.objects["tbl-data"].draw()})),$("#searchBookNumber").doneTyping((function(){t.objects["tbl-data"].draw()}))},e={columnDefs:[{orderable:!1,targets:[1]}],ajax:{type:"GET",dataType:"JSON",url:"/admin/generacion-de-formato-registro/listado".proto().parseURL(),data:function(t){t.searchValue=$("#search").val(),t.searchBookNumber=$("#searchBookNumber").val(),t.dateStartFilter=$("#dateStartFilter").val(),t.dateEndFilter=$("#dateEndFilter").val()}},columns:[{data:"user"},{data:"dni"},{data:"careerName"},{data:null,render:function(t,a,e,r){return`<p> ${e.type} </p>`}}]},r=function(){t.objects["tbl-data"]=$("#tbl-data").DataTable(e)};return{init:function(){$("#dateStartFilter").datepicker(),$("#dateEndFilter").datepicker(),$("#dateStartFilter").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}).on("changeDate",(function(t){$("#dateEndFilter").datepicker("setStartDate",moment(t.date).toDate())})),$("#dateEndFilter").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}).on("changeDate",(function(t){$("#dateStartFilter").datepicker("setEndDate",t.date)})),$(".btn-format").on("click",(function(t){t.preventDefault();var a=$(this);a.addLoader(),$.fileDownload("/admin/generacion-de-formato-registro/generar-formatos".proto().parseURL(),{httpMethod:"GET",data:{searchValue:$("#search").val(),searchBookNumber:$("#searchBookNumber").val(),dateStartFilter:$("#dateStartFilter").val(),dateEndFilter:$("#dateEndFilter").val()}}).always((function(){a.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Ã‰xito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")}))})),r(),a(),$("#btn-search-dates").on("click",(function(a){a.preventDefault();var e=$("#dateStartFilter").val(),r=$("#dateEndFilter").val();if(null===e||null===r)return!1;t.objects["tbl-data"].draw()})),$("#btn-search-filters").on("click",(function(a){a.preventDefault(),t.objects["tbl-data"].draw()}))}}}();$((function(){GenerateFormat.init()}));