var degrees=function(){var t=null,a={data:{source:{read:{method:"GET",url:"/admin/gestion-grados-titulos/todos".proto().parseURL()}}},columns:[{field:"name",title:"Descripción",width:500},{field:"abbreviation",title:"Abreviatura",width:100},{field:"options",title:"Opciones",sortable:!1,filterable:!1,template:function(t){var a="";return a+=`<button data-id="${t.id}" class="btn btn-info btn-sm m-btn m-btn--icon btn-edit" ><span><i class="flaticon-edit"></i><span>Editar</span></span></button> `,a+=`<button data-id="${t.id}" class="btn btn-danger btn-sm m-btn m-btn--icon btn-delete"><span><i class="flaticon-delete-1"></i><span>Eliminar</span></span></button>`}}]},s=function(){null!==t&&(t.destroy(),t=null),(t=$(".m-datatable").mDatatable(a)).on("click",".btn-edit",(function(t){t.preventDefault();var a=$(this).data("id");$.ajax({type:"GET",url:`/admin/gestion-grados-titulos/obtener/${a}`.proto().parseURL(),success:function(t){$("#edit_area_modal").modal("show"),$('#edit_area_modal input[name="Id"]').val(t.id),$('#edit_area_modal input[name="Name"]').val(t.name),$('#edit_area_modal input[name="Abbreviation"]').val(t.abbreviation)}})})),t.on("click",".btn-delete",(function(a){a.preventDefault();var s=$(this).data("id");swal({type:"warning",title:"¿Desea eliminar el registro?",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((a=>{$.ajax({type:"POST",url:`/admin/gestion-grados-titulos/eliminar/${s}`.proto().parseURL()}).always((function(){swal.close()})).done((function(a){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.reload()})).fail((function(t,a,s){var e=t.responseText;""!=e&&400==t.status?toastr.error(e,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}))})}))};return{load:function(){s(),$(".btn-add").on("click",(function(){$("#add_area_modal").modal("show")})),$("#add-form").validate({submitHandler:function(a,s){$.ajax({type:"POST",url:"/admin/gestion-grados-titulos/agregar".proto().parseURL(),data:$(a).serialize(),success:function(){$("#add_area_modal").modal("hide"),$("#add-form").resetForm(),t.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.success(_app.constants.toastr.message.error.create,_app.constants.toastr.title.error)}})}}),$("#edit-form").validate({submitHandler:function(a,s){$.ajax({type:"POST",url:"/admin/gestion-grados-titulos/editar".proto().parseURL(),data:$(a).serialize(),success:function(){$("#edit_area_modal").modal("hide"),t.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.update)},error:function(){toastr.success(_app.constants.toastr.message.error.update,_app.constants.toastr.title.error)}})}})}}}();$((function(){degrees.load()}));