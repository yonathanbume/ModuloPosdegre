var DegreeRequirement=function(){var t={objects:{}},e=function(){$("#search").doneTyping((function(){t.objects["tbl-data"].draw()}))},a={columnDefs:[{orderable:!1,targets:[1]}],ajax:{type:"GET",dataType:"JSON",url:"/admin/gestion-de-requerimientos-de-grado/obtener-requerimientos".proto().parseURL(),data:function(t){t.searchValue=$("#search").val()}},columns:[{data:"name",title:"Descripción"},{data:"type",title:"Tipo"},{data:null,title:"Opciones",render:function(t,e,a,n){return`<button data-id="${t.id}" class="btn btn-sm btn-info edit"> <i class="fa fa-edit"></i> </button>\n                            <button type="button" data-id="${t.id}" class="btn btn-sm btn-danger delete"> <i class="fa fa-trash"></i> </button>`}}]},n=function(){$("#add-form").validate({submitHandler:function(e,a){a.preventDefault(),$.ajax({type:"POST",url:"/admin/gestion-de-requerimientos-de-grado/agregar".proto().parseURL(),data:$(e).serialize(),success:function(){$("#AddModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){$("#add-form").validate().resetForm()}})}})},s=function(){$("#edit-form").validate({submitHandler:function(e,a){a.preventDefault(),$.ajax({type:"POST",url:"/admin/gestion-de-requerimientos-de-grado/editar".proto().parseURL(),data:$(e).serialize(),success:function(){$("#EditModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){$("#edit-form").validate().resetForm()}})}})},o=function(){t.objects["tbl-data"].on("click",".delete",(function(){var e=$(this).data("id");swal({title:"¿Está seguro?",text:"El requerimiento será eliminado permanentemente",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(a){a.value&&$.ajax({url:`/admin/gestion-de-requerimientos-de-grado/eliminar/${e}`.proto().parseURL(),type:"POST",success:function(){t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(t){toastr.error("Existe data relacionada",_app.constants.toastr.title.error)}})}))})),t.objects["tbl-data"].on("click",".edit",(function(){var t=$(this).data("id");$.ajax({url:`/admin/gestion-de-requerimientos-de-grado/obtener-requerimiento/${t}`.proto().parseURL(),type:"GET",success:function(t){$("#edit-form input[name='Name']").val(t.name),$("#edit-form select[name='Type']").val(t.type).trigger("change"),$("#edit-form input[name='Id']").val(t.id),$("#EditModal").modal("show")}})}))},r=function(){t.objects["tbl-data"]=$("#tbl-data").DataTable(a),o()};return{init:function(){r(),e(),n(),s(),$("#AddModal").on("hidden.bs.modal",(function(){$("#add-form").validate().resetForm()})),$("#EditModal").on("hidden.bs.modal",(function(){$("#edit-form").validate().resetForm()}))}}}();$((function(){DegreeRequirement.init()}));