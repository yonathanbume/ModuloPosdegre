var detail=function(){var t=$("#Id").val(),a=function(){$("#btn-download-pdf").on("click",(function(){var a=$(this);a.addLoader(),$.fileDownload(`/profesor/evaluacion-extraordinaria/${t}/reporte-pdf`.proto().parseURL(),{httpMethod:"GET",successCallback:function(t){a.removeLoader(),toastr.success("Archivo descargado satisfactoriamente","Ã‰xito")},failCallback:function(t,a){toastr.error("No se pudo descargar el archivo","Error")}})}))},n=function(){$.ajax({url:`/profesor/evaluacion-extraordinaria/${t}/calificacion-pendiente/get`,type:"GET"}).done((function(t){t?$("#btn-download-pdf").css("display","none"):$("#btn-download-pdf").css("display","inline-block")})).fail((function(t){}))},e={students:{object:null,options:{ajax:{url:"/profesor/evaluacion-extraordinaria/get-estudiantes",data:function(t){delete t.columns,t.extraordinaryEvalutionId=$("#Id").val()},method:"GET",dataSrc:""},bPaginate:!1,bLengthChange:!1,bFilter:!0,bInfo:!1,columns:[{data:"userName",title:"Cod. Estudiante"},{data:"fullName",title:"Estudiante"},{data:null,title:"Nota",render:function(t){return t.isPending?"-":t.grade}},{data:null,title:"Opciones",render:function(t){var a="-";return t.isPending&&(a=`<button type='button' data-id="${t.id}" class="btn btn-info btn-sm m-btn m-btn--icon btn-grade"><span><i class="la la-edit"></i><span> Calificar </span></span></button>`),a}}]},reload:function(){this.object.ajax.reload(),n()},events:{qualify:function(){$("#data-table").on("click",".btn-grade",(function(){var t=$(this).data("id");i.grade.add.show(t)}))},init:function(){this.qualify()}},init:function(){this.object=$("#data-table").DataTable(this.options),this.events.init()}},init:function(){e.students.init()}},i={grade:{object:$("#grade-modal"),form:{object:$("#grade-form").validate({submitHandler:function(t,a){a.preventDefault();var n=new FormData(t);$("#grade-form").find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:$(t).attr("action"),type:"POST",data:n,contentType:!1,processData:!1}).done((function(t){e.students.reload(),i.grade.object.modal("hide"),swal({type:"success",title:"Hecho!",text:"Nota asiganda satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){$("#grade-form").find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}})},add:{show:function(t){$("#grade-form").attr("action","/profesor/evaluacion-extraordinaria/calificar"),i.grade.object.find("[name='Id']").val(t),i.grade.object.modal("show")}},events:{onHidden:function(){i.grade.object.on("hidden.bs.modal",(function(t){i.grade.form.object.resetForm()}))},init:function(){this.onHidden()}},init:function(){this.events.init()}},init:function(){this.grade.init()}};return{init:function(){e.init(),i.init(),n(),a()}}}();$((()=>{detail.init()}));