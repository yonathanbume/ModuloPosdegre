var ActivitiesTable=function(){var t,e=$("#GroupId").val(),a={pagination:!1,search:{input:$("#search")},data:{source:{read:{method:"GET",url:`/docente/gruposextracurriculares/section/${e}/students`.proto().parseURL()}}},columns:[{field:"student",title:"Estudiane"},{field:"assistance",title:"Asistencia",textAlign:"center",sortable:!1,filterable:!1,template:function(t){return"<span data-id='"+t.studentId+'\' class="m-switch m-switch--outline m-switch--icon m-switch--success"><label><input type="checkbox" name=""><span></span></label></span>'}}]},n=function(){$(".btn-save").on("click",(function(){var a=[];if($(".m-switch").each((function(){var t=$(this).data("id"),e=this.children[0].children[0].checked;a.push({StudentId:t,Assistance:e})})),a.length>0){var n=JSON.stringify(a);swal({title:"¿Está seguro?",text:"La asistencia de los estudiantes se guardará y no podrá ser modificada.",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, guardar.",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/docente/gruposextracurriculares/assistance/save".proto().parseURL(),type:"POST",data:{assistance:n,groupId:e},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"La asistencia de los estudiantes han sido guardadas con éxito",confirmButtonText:"Excelente"}),$(location).attr("href","/docente/gruposextracurriculares".proto().parseURL())},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Ocurrió un error al guardar las asistencias de los estudiantes"})}})}))})}}))};return{init:function(){void 0!==t&&t.destroy(),t=$("#datatable").mDatatable(a),$(t).on("m-datatable--on-layout-updated",(function(){n()}))},reload:function(){t.reload()}}}();$((function(){ActivitiesTable.init()}));