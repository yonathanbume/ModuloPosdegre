var detail=function(){var t=$("#Id").val(),a={students:{object:null,options:{ajax:{url:"/profesor/examenes-aplazados/get-alumnos-asignados",type:"GET",data:function(a){a.id=t,a.search=$("#search").val()}},columns:[{data:"username",title:"Usuario"},{data:"fullName",title:"Nombre Completo"},{data:"grade",title:"Nota Obtenida",orderable:!1},{data:null,title:"Opciones",orderable:!1,render:function(t){var a="-";return 1==t.termStatus&&1==t.status&&(a=`<button data-id="${t.id}" data-student="${t.fullName}" title="Calificar" class="btn-save-grade btn btn-primary btn-sm m-btn  m-btn m-btn--icon"><span><i class="la la-edit"></i><span>Calificar</span></span></button>`),a}}]},events:{onSaveGrade:function(){$("#ajax_data").on("click",".btn-save-grade",(function(){var t=$(this).data("id"),a=$(this).data("student");e.saveGrade.events.show(t,a)}))},init:function(){this.onSaveGrade()}},reload:function(){a.students.object.ajax.reload()},init:function(){a.students.object=$("#ajax_data").DataTable(a.students.options),a.students.events.init()}},init:function(){a.students.init()}},e={saveGrade:{object:$("#modal_save_grade"),form:{object:$("#form_save_grade").validate({submitHandler:function(t,n){n.preventDefault(),swal({title:"¿Está seguro?",text:`La nota(${$(t).find("[name='Grade']").val()}) será asignada.`,type:"info",showCancelButton:!0,confirmButtonText:"Sí, asignar",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((n=>{$.ajax({url:"/profesor/examenes-aplazados/calificar",data:$(t).serialize(),type:"POST"}).done((function(t){a.students.reload(),e.saveGrade.object.modal("hide"),swal({type:"success",title:"Completado",text:"La nota ha sido asignada",confirmButtonText:"Excelente"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:502===t.status?"No hay respuesta del servidor":t.responseText})}))}))})}})},events:{show:function(t,a){e.saveGrade.object.find("[name='Id']").val(t),$("#StudentName").text(a),e.saveGrade.object.modal("show")},onHidden:function(){e.saveGrade.object.on("hidden.bs.modal",(function(t){e.saveGrade.object.resetForm()}))},init:function(){this.onHidden()}},init:function(){e.saveGrade.events.init()}},init:function(){e.saveGrade.init()}},n={onSearch:function(){$("#search").doneTyping((function(){a.students.reload()}))},init:function(){this.onSearch()}};return{init:function(){n.init(),e.init(),a.init()}}}();$((()=>{detail.init()}));