var TeachersTable=function(){var t={academicDepartment:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/departamentos-academicos/get".proto().parseURL()}).done((function(t){$(".academicDepartment-select").select2({placeholder:"Sin asignar",data:t,allowClear:!0})}))},events:function(){$(".academicDepartment-select").on("change",(function(){e.teachers.reload()}))}},init:function(){this.academicDepartment.init()}},e={teachers:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/docentes/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.search=$("#search").val(),t.academicDepartmentId=$("#academicDepartmentId").val()}},pageLength:50,orderable:[],columns:[{title:"Foto",data:null,orderable:!1,render:function(t,e,n){var a="";return null!=n.picture?a+=`<img src="/imagenes/${n.picture}" width="50px" />`:a+='<img src="/images/demo/user.png" width="50px" />',a}},{title:"Nombre y Apellidos",data:"fullName"},{title:"DNI",data:"dni"},{title:"Usuario",data:"userName"},{title:"Teléfono",data:"phoneNumber"},{title:"Opciones",data:null,orderable:!1,render:function(t,e,n){return`<button data-id="${n.id}" class="btn btn-primary btn-sm m-btn m-btn--icon btn-edit" title="Editar"><span><i class="la la-edit"></i><span>Editar</span></span></button> <button data-id="${n.id}" class="btn btn-danger btn-sm m-btn m-btn--icon btn-delete" title="Eliminar"><i class="la la-trash"></i></button>`}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events()},events:function(){$("#data-table").on("click",".btn-edit",(function(){var t=$(this).data("id");location.href="/admin/docentes/editar/"+t})),$("#data-table").on("click",".btn-delete",(function(){var t=$(this).data("id");swal({title:"¿Está seguro?",text:"El usuario será eliminado",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((n=>{$.ajax({url:"/admin/docentes/eliminar/post".proto().parseURL(),type:"POST",data:{id:t},success:function(t){e.ajax.reload(),swal({type:"success",title:"Completado",text:"El usuario ha sido eliminado con éxito",confirmButtonText:"Entendido"})},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer el usuario tiene información relacionada"})}})}))})}))}},init:function(){this.teachers.init()}},n=function(){$("#search").doneTyping((function(){e.teachers.reload()}))};return{init:function(){t.init(),e.init(),n()}}}();$((function(){TeachersTable.init()}));