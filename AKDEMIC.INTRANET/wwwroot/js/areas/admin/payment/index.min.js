_app.datatable.elements={"payment-datatable":{selector:"#payment-datatable",settings:{data:{source:{read:{method:"GET",url:"/admin/tramites/get"}}},columns:[{field:"name",title:"Nombre del Trámite"},{field:"duration",title:"Duración",template:function(t){var e="";return e+=t.duration,e+=1!==t.duration?" días":" día"}},{field:"options",title:"Opciones",sortable:!1,filterable:!1,template:function(t){var e="";return e+='<a class="btn btn-primary btn-sm m-btn m-btn--icon" href="',e+=_app.url.parse("/admin/tramites/editar"),e+="/",e+=t.id,e+='"><span><i class="la la-edit"></i><span> Editar </span></span></a> ',e+='<button class="btn btn-danger m-btn btn-sm m-btn--icon m-btn--icon-only" data-action="delete" data-url="',e+=_app.url.parse("/admin/tramites/eliminar/post"),e+='" data-value="',e+=t.app().encode(),e+='" onclick="payment.swal.delete.show(this, event)"><i class="la la-trash"></i></button>'}}]}}},_app.validate.elements={"payment-modal-form":{selector:"#payment-modal-form",settings:{submitHandler:function(t,e){var a=t.getAttribute("data-action");payment.form[a].async.send(t,e)}}},"payment-category-modal-form":{selector:"#payment-category-modal-form",settings:{submitHandler:function(t,e){var a=t.getAttribute("data-action");paymentCategory.form[a].async.send(t,e)}}}};var payment={form:{create:{async:{send:function(t,e){var a=t.elements,s=t.getAttribute("data-url");this.settings.data={Name:a.Name.value,ProcedureCategoryId:a.ProcedureCategoryId.value,Duration:a.Duration.value,Score:a.Score.value},this.settings.url=s,this.settings.beforeSend=function(t,e){_app.form.loader.show(a.Send)},this.settings.complete=function(t,e){_app.form.loader.hide(a.Send)},_app.form.async.send(t,e,this)},settings:{error:function(t,e,a){toastr.error(_app.constant.toastr.message.error.create,_app.constant.toastr.title.error)},success:function(t,e,a){_app.datatable.reload.all(),$("#payment-modal").modal("hide"),toastr.success(_app.constant.toastr.message.success.create,_app.constant.toastr.title.success)}}}},update:{async:{send:function(t,e){var a=t.elements,s=t.getAttribute("data-url");this.settings.data={Id:a.Id.value,Name:a.Name.value,ProcedureCategoryId:a.ProcedureCategoryId.value,Duration:a.Duration.value,Score:a.Score.value},this.settings.url=s,this.settings.beforeSend=function(t,e){_app.form.loader.show(a.Send)},this.settings.complete=function(t,e){_app.form.loader.hide(a.Send)},_app.form.async.send(t,e,this)},settings:{error:function(t,e,a){toastr.error(_app.constant.toastr.message.error.update,_app.constant.toastr.title.error)},success:function(t,e,a){_app.datatable.reload.all(),$("#payment-modal").modal("hide"),toastr.success(_app.constant.toastr.message.success.update,_app.constant.toastr.title.success)}}}}},modal:{create:{selector:"#payment-modal",show:function(t,e){var a=t.getAttribute("data-action"),s=t.getAttribute("data-url");_app.form.reset("payment-modal-form"),_app.form.fill("payment-modal-form",{},a,s),_app.modal.show(t,e,this)}},update:{selector:"#payment-modal",show:function(t,e){var a=t.getAttribute("data-action"),s=t.getAttribute("data-url"),n=t.getAttribute("data-value"),r={Id:(n=n.app().decode()).id,Name:n.name};_app.form.fill("payment-modal-form",r,a,s);var o=n.paymentCategory.id;_app.ajax.elements[0].status!==_app.constant.ajax.status.success&&(_app.select.elements["payment-category-select2"].settings={data:[{id:o,name:n.paymentCategory.name}]}),_app.select.elements["payment-category-select2"].settings.selected=o,_app.select.elements["payment-score-select2"].settings.selected=n.score,_app.select.load.multiple(["payment-category-select2","payment-score-select2"]),_app.select2.load.multiple(["payment-category-select2","payment-score-select2"]),_app.modal.show(t,e,this)}}},swal:{delete:{promise:{},settings:{title:"¿Desea eliminar el registro?",type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0},show:function(t,e){var a=t.getAttribute("data-url"),s=t.getAttribute("data-value");s=s.app().decode(),this.settings.text=s.name,this.settings.preConfirm=function(){return new Promise((function(t,e){var n={data:{Id:s.id},url:a,complete:function(e,a){t()},error:function(t,e,a){toastr.error(_app.constant.toastr.message.error.delete,_app.constant.toastr.title.error)},success:function(t,e,a){_app.datatable.reload.all(),toastr.success(_app.constant.toastr.message.success.delete,_app.constant.toastr.title.success)}},r=_app.ajax.settings.app().merge(n);$.ajax(r)}))},_app.swal.show(t,e,this)}}}};window.onload=function(){_app.ajax.load.all(),_app.datatable.load.all(),_app.validate.load.all()};