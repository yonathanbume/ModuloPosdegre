var index=function(){var t={systemEmail:{object:null,options:{ajax:{url:"/admin/gestion-correos/get-datatable",type:"GET",data:function(t){t.system=$("#select_system").val()}},columns:[{data:"email",title:"Correo"},{data:"system",title:"Sistema"}]},reload:function(){t.systemEmail.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options)}},init:function(){this.systemEmail.init()}},e={configuration:{object:$("#configuration_form").validate({submitHandler:function(t,o){o.preventDefault(),e.configuration.submit(t)}}),submit:function(t){var e=new FormData(t);$("#configuration_form").find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:"/admin/gestion-correos/actualizar-general",type:"POST",data:e,contentType:!1,processData:!1}).done((function(t){swal({type:"success",title:"Completado",text:"Datos actualizados satisfactoriametne.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){$("#configuration_form").find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}},init:function(){}},o={system:{load:function(){$(".m-select2").select2({allowClear:!0,placeholder:"Seleccionar sistema"})},onChange:function(){$("#select_system").on("change",(function(){t.systemEmail.reload()}))},init:function(){this.load(),this.onChange()}},init:function(){this.system.init()}},a={onPasswordEvent:function(){$("#CurrentPasswordEye").on("click",(function(){"password"===$("#Email_Password").attr("type")?$("#Email_Password").attr("type","text"):$("#Email_Password").attr("type","password")}))},init:function(){this.onPasswordEvent(),$("#Email_Password").val($("#current_password").val())}},i={resource:{object:$("#document-modal"),form:{object:$("#document-form").validate({submitHandler:function(e,o){o.preventDefault(),i.resource.object.find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0);var a=new FormData(e);$.ajax({type:"POST",url:$(e).attr("action"),data:a,contentType:!1,processData:!1}).done((function(e){t.reload(),i.resource.object.modal("hide"),swal({type:"success",title:"Completado",text:"Proceso Completado.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){i.resource.object.find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}}),reset:function(){i.resource.form.object.resetForm()}},add:{show:function(){i.resource.object.find(".modal-title").text("Agregar Recurso"),$("#document-form").attr("action","/admin/recursos-digitales/agregar"),i.resource.object.modal("show")}},edit:{show:function(t){i.resource.object.find(".modal-title").text("Editar Recurso"),$("#document-form").attr("action","/admin/recursos-digitales/editar"),i.resource.object.modal("show"),this.getData(t)},getData:function(t){i.resource.object.find(":input").attr("disabled",!0),$.ajax({url:`/admin/recursos-digitales/get/${t}`,type:"GET"}).done((function(t){i.resource.object.find("[name='Id']").val(t.id),i.resource.object.find("[name='Sorter']").val(t.sorter),i.resource.object.find("[name='Title']").val(t.title),select2.career.setValue(t.careerId,t.careerName),$("#div_last_file").removeClass("d-none"),$("#last_file").attr("href",`/documentos/${t.fileUrl}`),i.resource.object.find(":input").attr("disabled",!1)}))}},events:{onHidden:function(){i.resource.object.on("hidden.bs.modal",(function(t){i.resource.form.reset(),$("#div_last_file").addClass("d-none"),$("#last_file").attr("href",""),i.resource.object.find(".custom-file-label").text("Seleccionar archivo"),select2.career.clear()}))},init:function(){this.onHidden()}},init:function(){this.events.init()}},init:function(){this.resource.init()}};return{init:function(){a.init(),e.init(),o.init(),t.init()}}}();$((()=>{index.init()}));