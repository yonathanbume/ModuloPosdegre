var Datatable=function(){var a;const e={searching:!1,ajax:{data:function(a,e){a.search=$("#search").val(),a.termId=$("#termId").val(),a.careerId=$("#careerId").val(),a.facultyId=$("#facultyId").val();for(var t=0;t<a.columns.length;t++)delete a.columns[t].name,delete a.columns[t].search},url:"/admin/reporte-ponderado-desaprobado/get".proto().parseURL(),type:"GET"},columns:[{title:"Código",data:"code"},{title:"Estudiante",data:"student"},{title:"Periodo Académico",data:"term"},{title:"Facultad",data:"faculty"},{title:"Escuela Profesional",data:"career"},{title:"Puntaje",data:"score"}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(a,e,t,r){var l=`/admin/reporte-ponderado-desaprobado/get-excel?termId=${$("#termId").val()}&careerId=${$("#careerId").val()}&facultyId=${$("#facultyId").val()}`;window.open(l,"_blank")}}]};return{init:function(){a=$("#datatable").DataTable(e),$.when($.ajax({url:"/carreras/v2/get".proto().parseURL()})).then((function(a){$("#careerId").select2({placeholder:"Seleccione una escuela",allowClear:!0,data:a.items}),$("#careerId").val("").trigger()})),$.when($.ajax({url:"/facultades/v2/get".proto().parseURL()})).then((function(a){$("#facultyId").select2({placeholder:"Seleccione una facultad",allowClear:!0,data:a.items}),$("#facultyId").on("change",(function(a){var e=$(this).val();$("#careerId").empty().select2(),$.when($.ajax({url:`/facultades/${e}/carreras/v2/get`})).then((function(a){$("#careerId").select2({placeholder:"Seleccione una escuela",allowClear:!0,data:a.items})}))}))})),$.when($.ajax({url:"/periodos-finalizados/get".proto().parseURL()})).then((function(a){$("#termId").select2({placeholder:"Seleccione una periodo académico",allowClear:!0,data:a.items})})),$("#search").doneTyping((function(){a.ajax.reload()})),$("#facultyId").change((function(){a.ajax.reload()})),$("#careerId").change((function(){a.ajax.reload()})),$("#termId").change((function(){a.ajax.reload()}))}}}();$((function(){Datatable.init()}));