var detail=function(){var t={students:{object:null,options:{ajax:{url:"/admin/evaluacion-extraordinaria/get-estudiantes-asignados",type:"GET",data:function(t){t.extraordinaryEvaluationId=$("#Id").val()}},columns:[{title:"Código",data:"userName"},{title:"Estudiante",data:"fullName"},{title:"Carrera",data:"career"},{title:"Nota Obtenida",data:null,render:function(t){return t.isPending?"Sin asignar":t.grade}},{title:"Opciones",data:null,render:function(t){var e="";return e+=`<button data-id=${t.id} class="btn btn-danger m-btn m-btn--icon btn-sm m-btn--icon-only btn-delete"><i class="la la-trash"></i></button>`}}]},events:{onDelete:function(){$("#data-table").on("click",".btn-delete",(function(){var e=$(this).data("id");swal({type:"warning",title:"Removerá al estudiante de la evaluación.",text:"¿Seguro que desea removerlo?.",confirmButtonText:"Aceptar",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({type:"POST",url:`/admin/evaluacion-extraordinaria/eliminar-estudiante?id=${e}`}).done((function(e){t.students.reload(),swal({type:"success",title:"Completado",text:"Estudiante eliminado con éxito.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})}))}))})}))},init:function(){this.onDelete()}},reload:function(){t.students.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events.init()}},init:function(){t.students.init()}},e=($("#add_student_form").validate({submitHandler:function(a,n){n.preventDefault();var i=new FormData(a);$("#add_student_form").find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:"/admin/evaluacion-extraordinaria/agregar-estudiante",type:"POST",data:i,contentType:!1,processData:!1}).done((function(a){e.students.clear(),t.students.reload(),swal({type:"success",title:"Hecho!",text:"Estudiante agregado satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){$("#add_student_form").find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}}),{students:{load:function(){$("#StudentId").select2({ajax:{delay:300,url:"/admin/evaluacion-extraordinaria/get-estudiantes-json",data:function(t){return{searchValue:t.term,page:t.page||1,courseId:$("#CourseId").val()}}},allowClear:!0,minimumInputLength:2,placeholder:"Seleccione estudiante"})},clear:function(){$("#StudentId").val(null).trigger("change")},init:function(){this.load()}},init:function(){this.students.init()}});return{init:function(){t.init(),e.init()}}}();$((()=>{detail.init()}));