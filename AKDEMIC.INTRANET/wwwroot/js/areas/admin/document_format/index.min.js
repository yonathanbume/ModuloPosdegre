var index=function(){var t={constancies:{object:null,options:{ajax:{url:"/admin/constancias/get-datatable",type:"GET",data:function(t){}},columns:[{data:"createdAt",title:" Fec. Creación"},{data:"name",title:"Nombre"},{data:null,title:"Opciones",render:function(t){var n="";return n+=`<a href="/admin/constancias/editar/${t.id}" class="btn btn-primary m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-edit"></i></a> `,n+=`<button data-id="${t.id}" type="button" class="btn-delete btn btn-danger m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-trash"></i></button>`}}]},events:{onDelete:function(){$("#document_format_datatable").on("click",".btn-delete",(function(){var n=$(this).data("id");swal({title:"¿Está seguro?",text:"La constancia será eliminado",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((e=>{$.ajax({url:"/admin/constancias/eliminar".proto().parseURL(),type:"POST",data:{id:n}}).done((function(n){t.constancies.reload(),swal({type:"success",title:"Completado",text:"Constancia eliminada con éxito",confirmButtonText:"Excelente"})})).fail((function(t){swal({type:"error",title:"Error",text:t.responseText,confirmButtonText:"Excelente"})}))}))})}))},init:function(){this.onDelete()}},reload:function(){t.constancies.object.ajax.reload()},init:function(){t.constancies.object=$("#document_format_datatable").DataTable(t.constancies.options),t.constancies.events.init()}},init:function(){t.constancies.init()}},n={constancies:{object:$("#document_format_modal"),form:{object:$("#document_format_form").validate({submitHandler:function(e,o){o.preventDefault();var a=new FormData(e);n.constancies.object.find(":input").attr("disabled",!0);var i=n.constancies.object.data("rpta");$.ajax({url:$(n.constancies.form.object.currentForm).attr("action"),method:"POST",data:a,contentType:!1,processData:!1}).done((function(e){n.constancies.object.modal("hide"),t.constancies.reload(),swal({type:"success",title:"Completado",text:i,confirmButtonText:"Excelente"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){n.constancies.object.find(":input").attr("disabled",!1)}))}})},add:{show:function(){n.constancies.object.modal("show"),n.constancies.object.find(".modal-title").text("Agregar Constancia"),n.constancies.object.data("rpta","Registro agregado satisfactoriamente"),$(n.constancies.form.object.currentForm).attr("action","/admin/constancias/crear")}},events:{onHidden:function(){n.constancies.object.on("hidden.bs.modal",(function(t){$(n.constancies.form.object.currentForm)[0].reset(),n.constancies.form.object.resetForm(),n.constancies.object.find("[name='Id']").val(null).trigger("change"),n.constancies.object.find("[name='Type']").val(null).trigger("change")}))},init:function(){this.onHidden()}},init:function(){n.constancies.events.init()}},init:function(){n.constancies.init()}},e={recordType:{init:function(){n.constancies.object.find("[name='Id']").select2({dropdownParent:n.constancies.object})}},init:function(){e.recordType.init()}},o={onAddScale:function(){$("#btn_add_document_format").on("click",(function(){n.constancies.add.show()}))},init:function(){this.onAddScale()}};return{init:function(){t.init(),n.init(),o.init(),e.init()}}}();$((()=>{index.init()}));