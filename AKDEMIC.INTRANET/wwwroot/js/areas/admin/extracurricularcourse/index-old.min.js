var extracurricularcourseTable=function(){var t,e={search:{input:$("#search")},data:{source:{read:{method:"GET",url:"/admin/cursosextracurriculares/get".proto().parseURL()}}},columns:[{field:"code",title:"Código"},{field:"name",title:"Nombre"},{field:"price",title:"Precio"},{field:"credits",title:"Créditos"},{field:"options",title:"Opciones",textAlign:"center",sortable:!1,filterable:!1,template:function(t){var e="";return e+="<button data-toggle='modal' data-target='#edit_extracurricularcourse_modal' data-id='"+t.id+"' class='btn btn-info btn-sm m-btn m-btn--icon btn-edit'><span><i class='la la-edit'></i><span>Editar</span></span></button> ",e+="<button data-id='"+t.id+"' class='btn btn-danger btn-sm m-btn--icon btn-delete'><i class='la la-trash'></i></button>"}}]},a=function(){$(".btn-edit").on("click",(function(){var t=$(this).data("id");Form.Edit.show(t)})),$(".btn-delete").on("click",(function(){var e=$(this).data("id");swal({title:"¿Está seguro?",text:"El curso extracurricular será eliminada",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/admin/cursosextracurriculares/eliminar/post".proto().parseURL(),type:"POST",data:{id:e},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"El curso extracurricular ha sido eliminado con éxito",confirmButtonText:"Excelente"})},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer el curso extracurricular tiene información relacionada"})}})}))})})),$(".letters").keypress((function(t){var e=t.which;e>=65&&e<=120||32==e||0==e||t.preventDefault()}))};return{init:function(){void 0!==t&&t.destroy(),e.data.source.read.url="/admin/cursosextracurriculares/get".proto().parseURL(),t=$("#extracurricularcourse-datatable").mDatatable(e),$(t).on("m-datatable--on-layout-updated",(function(){a()}))},reload:function(){t.reload()}}}(),Form=function(){var t,e,a="#add_extracurricularcourse_modal",r="#edit_extracurricularcourse_modal",n="#edit-extracurricularcourse-form",i=function(){$(".btn-add").on("click",(function(){$(a).one("hidden.bs.modal",(function(){o.reset.create()}))}))},o={submit:{create:function(t){var e=$(t).serialize();$(`${a} input, ${a} select, ${a} textarea`).attr("disabled",!0),$("#btnCreate").addLoader(),$.ajax({url:$(t).attr("action"),type:"POST",data:e}).always((function(){$(`${a} input, ${a} select, ${a} textarea`).attr("disabled",!1),$("#btnCreate").removeLoader()})).done((function(){$(a).modal("toggle"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),extracurricularcourseTable.reload()})).fail((function(t){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!=t.responseText?$("#add_form_msg_txt").html(t.responseText):$("#add_form_msg_txt").html(_app.constants.ajax.message.error),$("#add_form_msg").removeClass("m--hide").show()}))},edit:function(t){var e=$(t).serialize();$(`${r} input, ${r} select, ${r} textarea`).attr("disabled",!0),$("#btnEdit").addLoader(),$.ajax({url:$(t).attr("action"),type:"POST",data:e}).always((function(){$(`${r} input, ${r} select, ${r} textarea`).attr("disabled",!1),$("#btnEdit").removeLoader()})).done((function(){$(r).modal("toggle"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),extracurricularcourseTable.reload()})).fail((function(t){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!=t.responseText?$("#edit_form_msg_txt").html(t.responseText):$("#edit_form_msg_txt").html(_app.constants.ajax.message.error),$("#edit_form_msg").removeClass("m--hide").show()}))}},reset:{create:function(){$("#add_form_msg").addClass("m--hide").hide(),t.resetForm()},edit:function(){$("#edit_form_msg").addClass("m--hide").hide(),e.resetForm()}},show:{edit:function(t){mApp.blockPage(),$.ajax({url:`/admin/cursosextracurriculares/${t}/get`.proto().parseURL()}).done((function(t){var e=$(n).get(0).elements;e.Edit_Id.value=t.id,e.Edit_Name.value=t.name,e.Edit_Code.value=t.code,e.Edit_Price.value=t.price,e.Edit_Credits.value=t.credits,e.Edit_Description.value=t.description,mApp.unblockPage(),$(r).one("hidden.bs.modal",(function(){o.reset.edit()}))})).fail((function(t){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}},s={init:function(){this.create.init(),this.edit.init()},create:{init:function(){t=$("#add-extracurricularcourse-form").validate({submitHandler:function(t,e){e.preventDefault(),o.submit.create(t)}})}},edit:{init:function(){e=$(n).validate({submitHandler:function(t,e){e.preventDefault(),o.submit.edit(t)}})}}};return{init:function(){s.init(),i()},Edit:{show:function(t){o.show.edit(t)}}}}();$((function(){extracurricularcourseTable.init(),Form.init()}));