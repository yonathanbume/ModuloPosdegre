var EventsTypeTable=function(){var t,e={search:{input:$("#search")},data:{type:"remote",source:{read:{method:"GET",url:"/admin/tipo-eventos/get".proto().parseURL()}},pageSize:10,saveState:{cookie:!0,webstorage:!0}},columns:[{field:"name",title:"Nombre",width:70},{field:"color",title:"Color",width:70,template:function(t){return'<div class="circle" style="background-color:'+t.color+'";></div>'}},{field:"options",title:"Opciones",width:250,sortable:!1,filterable:!1,template:function(t){return'<button data-id="'+t.id+'"class="btn btn-primary btn-sm m-btn m-btn--icon btn-edit" data-toggle="modal" data-target="#edit_modal" title="Editar"><span><span><i class="la la-edit"></i></span><span>Editar</span></span></button>&nbsp<button data-id="'+t.id+'" class="btn btn-danger btn-sm m-btn m-btn--icon btn-delete" title="Eliminar"><span><i class="la la-trash"></i><span>Eliminar</span></span></button>'}}]},a=function(){t.on("click",".btn-edit",(function(){var t=$(this).data("id");$.ajax({url:("/admin/tipo-eventos/get/"+t).proto().parseURL(),type:"POST",success:function(t){console.log(t);var e=$("#edit-form").get(0).elements;e.Name.value=t.name,e.Color.value=t.color,e.Id.value=t.id},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer el tipo de evento tiene información relacionada"})}})})),t.on("click",".btn-delete",(function(){var e=$(this).data("id");swal({title:"¿Está seguro que desea eliminar el tipo de evento?",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminalo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",showLoaderOnConfirm:!0,cancelButtonText:"Cancelar",allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise(((a,n)=>{$.ajax({url:"/admin/tipo-eventos/eliminar/post".proto().parseURL(),type:"POST",data:{id:e},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"El tipo de evento ha sido registrado con éxito",confirmButtonText:"Excelente"})},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer el tipo de evento tiene información relacionada"})}})}))})}))};return{init:function(){t=$(".m-datatable").mDatatable(e),a(),formCreate=$("#create-form").validate(),formEdit=$("#edit-form").validate()},reloadTable:function(){t.reload()}}}(),DefaultAjaxFunctions={beginAjaxCall:function(){$(".btn-submit").each((function(t,e){$(this).addLoader()}))},endAjaxCall:function(){$(".btn-submit").each((function(t,e){$(this).removeLoader()}))},ajaxSuccess:function(){$("#create_modal").modal("hide"),$("#edit_modal").modal("hide"),formCreate.resetForm(),formEdit.resetForm(),EventsTypeTable.reloadTable(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},createFailure:function(t){toastr.success(_app.constants.toastr.message.error.create,_app.constants.toastr.title.error)}};$((function(){EventsTypeTable.init()}));