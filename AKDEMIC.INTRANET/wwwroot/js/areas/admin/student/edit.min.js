var Form=function(){var e=function(){$("#Name").attr("disabled",!0),$("#PaternalSurname").attr("disabled",!0),$("#MaternalSurname").attr("disabled",!0),$("#UserName").attr("disabled",!0)},t={init:function(){this.faculties.init()},faculties:{init:function(){$.ajax({url:"/facultades/get".proto().parseURL()}).done((function(e){$(".select2-faculties").select2({placeholder:"Facultades",minimumInputLength:0,data:e.items}).val($("#FacultyIdValue").val()).on("change",(function(){t.careers.init($(this).val())})).trigger("change"),t.careers.init($(this).val())}))}},careers:{init:function(e){$(".select2-careers").prop("disabled",!0),$(".select2-careers").empty(),$(".select2-careers").select2({placeholder:"Carrera"}),$.ajax({url:`/carreras/get?fid=${e}`.proto().parseURL()}).done((function(e){if($(".select2-careers").select2({placeholder:"Carrera",minimumInputLength:0,data:e.items}),e.items.length){var t=$("#CareerId").val();null!==t&&""!==t&&($(".select2-careers").val(t).trigger("change"),$("#CareerId").val(null).trigger("change"))}})),$(".select2-faculties").prop("disabled",!0)}}},a={init:function(){this.picture.init()},picture:{init:function(){$("#Picture").on("change",(function(e){var t=(e.target||window.event.srcElement).files;if(FileReader&&t&&t.length){var a=new FileReader;a.onload=function(){$("#current-picture").attr("src",a.result)},a.readAsDataURL(t[0])}else console.log("File Reader not supported.")}))}}},r={init:function(){this.birthDate.init()},birthDate:{init:function(){$("#BirthDate").datepicker("setEndDate",moment().format(_app.constants.formats.datepickerJsMoment))}}},n=function(){$("#Dni").keypress((function(e){(46===e.which||e.which<48||e.which>57)&&e.preventDefault()})).on("paste",(function(e){e.preventDefault()}))},i=function(t){var a=new FormData($(t)[0]);$("#edit-form input").attr("disabled",!0),$("#edit-form select").attr("disabled",!0),$("#btnSave").addLoader(),$.ajax({url:$(t).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).always((function(){$("#edit-form input").attr("disabled",!1),e(),$("#edit-form select").attr("disabled",!1),$("#btnSave").removeLoader()})).done((function(){$("#m-form_alert").addClass("m--hide").show(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!=e.responseText?$("#alert-text").html(e.responseText):$("#alert-text").html(_app.constants.toastr.message.error.task),$("#m-form_alert").removeClass("m--hide").show(),mApp.scrollTop()}))},s={form:$("#edit-form").validate({rules:{ConfirmedPassword:{equalTo:"#Password"}},messages:{PhoneNumber:{pattern:"El campo no tiene el formato correcto (Ejemplo: 989419189 o 3255564 )"},Dni:{pattern:"Por favor el Dni solo debe contener números.",maxlength:"Por favor el Dni solo debe 8 contener dígitos.",minlength:"Por favor el Dni debe 8 contener dígitos."}},submitHandler:function(e,t){t.preventDefault(),i(e)}}),reset:function(){s.form.resetForm()}};return{init:function(){t.init(),r.init(),a.init(),n(),e()}}}();$((function(){Form.init()}));