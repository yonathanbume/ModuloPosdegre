var StudentTable=function(){var e={object:null,options:{responsive:!0,processing:!0,serverSide:!0,ajax:{url:"/admin/alumnos/get".proto().parseURL(),data:function(e){delete e.columns,e.search=$("#search").val(),e.facultyId=$(".select2-faculties").val(),e.careerId=$(".select2-careers").val(),e.programId=$(".select2-programs").val(),e.curriculumId=$(".select2-curriculums").val(),e.campusId=$(".select2-campus").val()}},columns:[{title:"Foto",data:null,orderable:!1,render:function(e,t,a){var r="";return null==a.picture?r+='<img src="/images/demo/user.png" width="50px" />':r+=`<img src="/imagenes/${a.picture}" width="50px" />`,r}},{title:"Nombre y Apellidos",data:"user.fullName"},{title:"DNI",data:"user.dni"},{title:"Carrera",data:"career.name"},{title:"Usuario",data:"user.userName"},{title:"Tel√©fono",data:"user.phoneNumber"},{title:"Opciones",data:null,orderable:!1,render:function(e){return`<a href="${`/admin/alumnos/editar/${e.id}`}" class="btn btn-primary btn-sm m-btn m-btn--icon" title="Editar"><span><i class="la la-edit"></i><span>Editar</span></span></a> `}}]},init:function(){this.object=$(".students-datatable").DataTable(this.options)},reload:function(){this.object.ajax.reload()}},t={init:function(){this.faculties.init(),this.careers.init(),this.programs.init(),this.curriculums.init(),this.campus.init()},faculties:{init:function(){$.ajax({url:"/facultades/get".proto().parseURL()}).done((function(a){$(".select2-faculties").select2({data:a.items}),$(".select2-faculties").on("change",(function(){t.careers.reload($(this).val()),e.reload()}))}))}},careers:{init:function(){$(".select2-careers").select2({placeholder:"Seleccione una carrera"}),$(".select2-careers").on("change",(function(){t.programs.reload($(this).val()),t.curriculums.reload(),e.reload()}))},reload:function(e){$(".select2-careers").prop("disabled",!0),$(".select2-careers").empty(),$.ajax({url:`/carreras/get?fid=${e}`.proto().parseURL()}).done((function(e){e.items.unshift({id:"Todas",text:"Todas"}),$(".select2-careers").select2({data:e.items,placeholder:"Seleccione una carrera"}),e.items.length>1&&$(".select2-careers").prop("disabled",!1)}))}},programs:{init:function(){$(".select2-programs").select2(),$(".select2-programs").on("change",(function(){t.curriculums.reload(),e.reload()}))},reload:function(e){$(".select2-programs").prop("disabled",!0),$(".select2-programs").empty(),$.ajax({url:`/carreras/${e}/programas/get`.proto().parseURL()}).done((function(e){e.items.unshift({id:"Todos",text:"Todos"}),$(".select2-programs").select2({data:e.items,placeholder:"Programas"}),e.items.length>1&&$(".select2-programs").prop("disabled",!1)}))}},curriculums:{init:function(){$(".select2-curriculums").select2(),$(".select2-curriculums").on("change",(function(){e.reload()}))},reload:function(){var e=$(".select2-careers").val(),t=$(".select2-programs").val();$(".select2-curriculums").prop("disabled",!0),$(".select2-curriculums").empty(),""!=e&&null!=e&&"Todas"!=e&&$.ajax({url:`/planes-estudio/${e}/get?academicProgramId=${t}`}).done((function(e){e.items.unshift({id:"Todos",text:"Todos"}),$(".select2-curriculums").select2({data:e.items,placeholder:"Seleccionar plan"}),$(".select2-curriculums").prop("disabled",!1)}))}},campus:{init:function(){$.ajax({url:"/sedes/get"}).done((function(t){t.items.unshift({id:"Todos",text:"Todos"}),$(".select2-campus").select2({data:t.items,placeholder:"Seleccionar plan"}),$(".select2-campus").on("change",(function(){e.reload()}))}))}}},a=function(){$("#search").doneTyping((function(){e.reload()}))};return{init:function(){t.init(),a(),e.init()}}}();$((function(){StudentTable.init()}));