var UniversityAuthorityManagement=function(){var t={objects:{}},a=function(){$("#search").doneTyping((function(){t.objects["tbl-data"].draw()})),$("#StartDateAdd, #StartDateEdit, #EndDateAdd, #EndDateEdit").datepicker({format:_app.constants.formats.datepicker})},e={ajax:{type:"GET",dataType:"JSON",url:"/admin/anuncios/por-sistema/get".proto().parseURL(),data:function(t){t.searchValue=$("#search").val()}},columns:[{data:"title",title:"Título"},{data:"type",title:"Tipo"},{data:"system",title:"Sistema"},{data:"startDate",title:"Fecha Inicio"},{data:"endDate",title:"Fecha Fin"},{data:null,title:"Opciones",render:function(t,a,e,n){return`<a href="/admin/anuncios/por-sistema/editar/${t.id}" data-id="${t.id}" class="btn btn-sm btn-info edit"> <i class= "fa fa-edit"></i> </a>\n                            <button data-id="${t.id}" class="btn btn-sm btn-danger delete"> <i class="fa fa-trash"></i> </button>`}}]},n=function(){$("#add-form").validate({submitHandler:function(a){var e=$(a).find('button[type="submit"]');e.addLoader();var n=new FormData($("#add-form")[0]);$.ajax({type:"POST",url:"/admin/anuncios/por-sistema/guardar".proto().parseURL(),data:n,processData:!1,contentType:!1,success:function(){$("#AddModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#add-form")[0].reset()},error:function(t){toastr.error(t.responseText,_app.constants.toastr.title.error)},complete:function(){e.removeLoader()}})}})},o=function(){$("#edit-form").validate({submitHandler:function(a){var e=$(a).find('button[type="submit"]');e.addLoader();var n=new FormData($("#edit-form")[0]);$.ajax({type:"POST",url:"/admin/anuncios/por-sistema/editar".proto().parseURL(),data:n,processData:!1,contentType:!1,success:function(){$("#EditModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#edit-form")[0].reset()},error:function(t){toastr.error(t.responseText,_app.constants.toastr.title.error)},complete:function(){e.removeLoader()}})}})},i=function(){t.objects["tbl-data"].on("click",".edit",(function(){var t=$(this).data("id");$.ajax({url:`/admin/anuncios/por-sistema/get/${t}`.proto().parseURL(),type:"GET",contentType:"application/json",success:function(t){$("#edit-form select[name='Type']").val(t.type).trigger("change"),$("#edit-form select[name='System']").val(t.system).trigger("change"),$("#edit-form input[name='Id']").val(t.id),$("#edit-form input[name='Description']").val(t.description),$("#edit-form input[name='Title']").val(t.title),$("#edit-form input[name='StartDate']").val(t.startDate),$("#edit-form input[name='EndDate']").val(t.endDate)}})})),t.objects["tbl-data"].on("click",".delete",(function(){var a=$(this).data("id");swal({title:"¿Está seguro?",text:"El registro será eliminado permanentemente",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>new Promise((e=>{$.ajax({url:`/admin/anuncios/por-sistema/eliminar/${a}`.proto().parseURL(),type:"POST",data:{id:a},success:function(a){swal({type:"success",title:"Completado",text:"El registro ha sido eliminado con éxito",confirmButtonText:"Excelente"}).then(t.objects["tbl-data"].draw())},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"El registro presenta información relacionada"})}})})),allowOutsideClick:()=>!swal.isLoading()})}))},s=function(){t.objects["tbl-data"]=$("#tbl-data").DataTable(e),i()};return{init:function(){s(),a(),n(),o()}}}();$((function(){UniversityAuthorityManagement.init()}));