var reportApproved=function(){var e=null,a={ajax:{url:"/admin/reporte_aprobados_desaprobados/get".proto().parseURL(),data:function(e){e.cid=$("#select_career").val(),e.pid=$("#select_terms").val(),e.name=$("#search").val()}},pageLength:10,orderable:[],columns:[{data:"name",title:"Nombres Completos"},{data:"code",title:"Código"},{data:"career",title:"Escuela Profesional"},{data:"academicProgram",title:"Prog. Académico"},{data:"finalgrade",title:"Nota final"},{data:"approbed",title:"Estado",render:function(e){return!0===e?'<span class="m-badge  m-badge--success m-badge--wide">Aprobado</span>':'<span class="m-badge  m-badge--danger m-badge--wide">Desaprobado</span>'}}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(e,a,r,t){var o=`/admin/reporte_aprobados_desaprobados/get-excel?careerId=${$("#select_career").val()}&termId=${$("#select_terms").val()}`;window.open(o,"_blank")}}]},r=function(){null===e?e=$("#datatable_index").DataTable(a):e.ajax.reload()},t=function(){$("#select_career").select2({placeholder:"Carreras"}),$.ajax({url:"/admin/reporte_aprobados_desaprobados/getCarreras".proto().parseURL()}).done((function(e){$("#select_career").empty(),$("#select_career").select2({data:e.items,placeholder:"Carreras"})})),$("#select_career").on("change",(function(e){o(),r()})),$("#select_terms").select2({placeholder:"Periodos Académicos"}),$("#select_terms").on("change",(function(e){o(),r()})),$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(e){$("#select_terms").select2({data:e.items}).val(e.selected).trigger("change")}))},o=function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){var e=$("#select_terms").val(),a=$("#select_career").val();$.ajax({type:"GET",url:`/admin/reporte_aprobados_desaprobados/chart/${a}/${e}`.proto().parseURL(),error:function(e,a,r){toastr.error(err.message)},success:function(e){e.length>0?function(e){var a=[["",""]];$.each(e,(function(e,r){a.push([r.approbedname,r.approbeds]),a.push([r.disapprobedname,r.disapprobeds])})),e=google.visualization.arrayToDataTable(a);var r={title:"Aprobados vs desaprobados",height:400,width:700,colors:["#D32F2F","#43A047"],titleFontSize:20,is3D:!0};new google.visualization.PieChart(document.getElementById("chart_div_report_approbed_disapprobed")).draw(e,r)}(e):document.getElementById("chart_div_report_approbed_disapprobed").innerHTML=""}})}))};return{load:function(){t()}}}();$((function(){reportApproved.load()}));