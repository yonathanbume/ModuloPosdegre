var reportDetails=function(){var e={object:null,sectionId:null,options:{ajax:{url:"/admin/reporte_asistencia_docentes/secciones/get".proto().parseURL(),data:function(e){delete e.columns,e.termId=$("#select2-terms").val(),e.teacherId=$("#TeacherId").val()}},pageLength:50,orderable:[],columns:[{data:"course",title:"Curso"},{data:"section",title:"Sección"},{data:"dictatedClasses",title:"Clases Dictadas"},{data:"rescheduledClasses",title:"Clases Reprogramadas"},{data:"totalClasses",title:"Clases Totales"}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(){$.fileDownload("/admin/reporte_asistencia_docentes/secciones/get/reporte-excel".proto().parseURL(),{httpMethod:"GET",data:{teacherId:$("#TeacherId").val(),termId:$("#select2-terms").val()},successCallback:function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")}}).done((function(){})).fail((function(){toastr.error("Error al descargar el archivo","Error")})).always((function(){}))}},{text:"PDF",action:function(){var e=$("#TeacherId").val(),t=$("#select2-terms").val();window.open(`/admin/reporte_asistencia_docentes/secciones/get/reporte-pdf?teacherId=${e}&termId=${t}`,"_blank")}}]},reloadTable:function(){null===e.object?e.init():e.object.ajax.reload()},init:function(){e.object=$("#data-datatable").DataTable(e.options)}},t={object:null,defaultSettings:{allDaySlot:!1,aspectRatio:2,businessHours:{dow:[1,2,3,4,5,6],end:"24:00",start:"07:00"},columnFormat:"dddd",contentHeight:600,defaultView:"agendaWeek",editable:!1,eventRender:function(e,t){t.hasClass("fc-day-grid-event")?(t.data("content",e.description),t.data("placement","top"),mApp.initPopover(t)):t.hasClass("fc-time-grid-event")?t.find(".fc-title").append('<div class="fc-description">'+e.description+"</div>"):0!==t.find(".fc-list-item-title").length&&t.find(".fc-list-item-title").append('<div class="fc-description">'+e.description+"</div>");var a=t.find(".fc-title").clone().children().remove().end().text();t.css("border-color","#"+a.proto().toRGB()).css("border-width","2px")},events:{className:"m-fc-event--primary",error:function(){toastr.error("Ocurrió un problema con el servidor","Error")},url:""},eventAfterAllRender:function(){$(".fc-prev-button").prop("disabled",!1),$(".fc-next-button").prop("disabled",!1),mApp.unblock(".m-calendar__container")},firstDay:1,header:{left:"prev,next today",center:"title"},height:600,locale:"es",maxTime:"24:00:00",minTime:"06:00:00",monthNames:monthNames,dayNames:dayNames,monthNamesShort:monthNamesShort,dayNamesShort:dayNamesShort,buttonText:{today:"hoy",month:"mes",week:"semana",day:"día"},slotDuration:"00:30:00",timeFormat:"h(:mm)A"},load:function(){mApp.block("#schedule",{message:"Cargando horario..."}),null!==t.object&&t.object.fullCalendar("destroy"),t.object=$("#schedule").fullCalendar(t.defaultSettings)}},a={needReload:!0,onShowCalendarModal:function(){$("#show_schedule").click((function(){$("#modal_calendar").modal("show")})),$("#modal_calendar").on("shown.bs.modal",(function(e){if(a.needReload){var o=$("#select2-terms").val();console.log(o);var n=$("#TeacherId").val();t.defaultSettings.events.url=`/admin/reporte_asistencia_docentes/get-horario/${n}/${o}`,t.load(),a.needReload=!1}}))},init:function(){this.onShowCalendarModal()}};return{load:function(){a.init(),$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(t){$("#select2-terms").select2({data:t.items}),$("#select2-terms").on("change",(function(t){a.needReload=!0,e.reloadTable()})),null!==t.selected&&$("#select2-terms").val(t.selected).trigger("change")}))}}}();$((function(){reportDetails.load()}));