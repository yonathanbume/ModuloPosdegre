var InitApp=function(){var e=null,t={teachers:{object:null,options:{ajax:{url:"/admin/reporte_asistencia_docentes/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.academicDepartmentId=$("#select_academicDepartments").val(),e.search=$("#search").val(),e.termId=$("#select_Term").val()}},pageLength:50,orderable:[],columns:[{data:"academicDepartment",title:"Departamento Académico"},{data:"userName",title:"Usuario"},{data:"fullname",title:"Nombre"},{data:"hours",orderable:!1,title:"Horas Asignadas"},{data:null,title:"Opciones",orderable:!1,render:function(e){return`<a href="${`/admin/reporte_asistencia_docentes/${e.id}`}" class="btn btn-primary btn-sm m-btn m-btn--icon btn-detail" <span><i class="la la-eye"> </i> </span>Ver Reporte </span></span></a>`}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options)}},missing:{object:null,options:{ajax:{url:"/admin/reporte_asistencia_docentes/reporte-faltas-get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.academicDepartmentId=$("#select_academicDepartments_2").val(),e.search=$("#search_2").val(),e.startDate=$("#startDate_2").val(),e.termId=$("#select_Term_2").val(),e.endDate=$("#endDate_2").val()}},pageLength:50,orderable:[],columns:[{data:"academicDepartment",title:"Departamento Académico"},{data:"username",title:"Usuario"},{data:"name",title:"Nombre"},{data:null,title:"Opciones",orderable:!1,render:function(e){return`<button data-id='${e.id}' class="btn btn-primary btn-sm m-btn m-btn--icon btn-detail" <span><i class="la la-eye"> </i> </span>Detalle</span></span></a>`}}]},events:{onDetail:function(){$("#missing-table").on("click",".btn-detail",(function(){var e=$(this).data("id");s.detailedMissig.show(e)}))},init:function(){this.onDetail()}},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#missing-table").DataTable(this.options),this.events.init()}},detailedMissing:{object:null,options:{ajax:{url:"/admin/reporte_asistencia_docentes/get-detalle-falta".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.endDate=$("#endDate_2").val(),t.teacherId=e}},pageLength:10,orderable:[],columns:[{data:"course",title:"Curso"},{data:"section",title:"Sección"},{data:"clases",title:"Clases"}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#detailed_missing_table").DataTable(this.options)}},init:function(){this.teachers.init(),this.missing.init(),this.detailedMissing.init()}},a=function(){$("#search").doneTyping((function(){t.teachers.reload()})),$("#search_2").doneTyping((function(){t.missing.reload()}))},n={init:function(){this.academicDepartment.init(),this.term.init()},academicDepartment:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/departamentos-academicos/get".proto().parseURL()}).done((function(e){$("#select_academicDepartments").empty(),$("#select_academicDepartments").html('<option value="0" disabled selected>Seleccione una Opcion</option>'),$("#select_academicDepartments").select2({data:e}),$("#select_academicDepartments_2").empty(),$("#select_academicDepartments_2").html('<option value="0" disabled selected>Seleccione una Opcion</option>'),$("#select_academicDepartments_2").select2({data:e})}))},events:function(){$("#select_academicDepartments").on("change",(function(){t.teachers.reload()})),$("#select_academicDepartments_2").on("change",(function(){t.missing.reload()}))}},term:{load:function(){$.ajax({url:"/periodos/get",type:"GET"}).done((function(e){console.log(e),$("#select_Term").select2({data:e.items,placeholder:"Seleccionar periodo..."}),$("#select_Term_2").select2({data:e.items,placeholder:"Seleccionar periodo..."}),$("#select_Term").val(e.selected).trigger("change"),$("#select_Term_2").val(e.selected).trigger("change"),$("#select_Term").on("change",(function(){t.teachers.reload()})),$("#select_Term_2").on("change",(function(){t.missing.reload()}))}))},init:function(){n.term.load()}}},i={endDate:function(){$("#startDate").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}),$("#endDate").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}),$("#endDate_2").datepicker({clearBtn:!0,orientation:"bottom",format:_app.constants.formats.datepicker}).on("change",(function(){t.missing.reload()}))},init:function(){this.endDate()}},o={onExportDetailed:function(){$("#btn_export").on("click",(function(){var e=$("#select_academicDepartments").val(),t=$("#startDate").val(),a=$("#endDate").val(),n=$("#select_Term").val();if(""!=n&&null!=n&&null!=n)if(null!=t&&""!==t)if(null!=a&&""!==a){var i=`/admin/reporte_asistencia_docentes/detallado-excel?academicDepartmentId=${e}&termId=${n}&startDate=${t}&endDate=${a}`;window.open(i,"_blank")}else toastr.info("La fecha fin es obligatoria","Información");else toastr.info("La fecha inicio es obligatoria","Información");else toastr.info("Es necesario ingresar el periodo.","Información")}))},onExportConsolidated:function(){$("#btn_export_consolidated").on("click",(function(){var e=$("#select_academicDepartments").val(),t=$("#startDate").val(),a=$("#endDate").val(),n=$("#select_Term").val();if(""!=n&&null!=n&&null!=n)if(null!=t&&""!==t)if(null!=a&&""!==a){var i=`/admin/reporte_asistencia_docentes/consolidado-excel?academicDepartmentId=${e}&termId=${n}&startDate=${t}&endDate=${a}`;window.open(i,"_blank")}else toastr.info("La fecha fin es obligatoria","Información");else toastr.info("La fecha inicio es obligatoria","Información");else toastr.info("Es necesario ingresar el periodo.","Información")}))},onMissing:function(){$("#btn_export_missing").on("click",(function(){var e=$("#select_academicDepartments_2").val(),t=$("#endDate_2").val(),a=$("#select_Term_2").val();if(null!=t&&""!==t)if(""!=a&&null!=a&&null!=a){var n=`/admin/reporte_asistencia_docentes/reporte-faltas-excel?academicDepartmentId=${e}&endDate=${t}&termId=${a}`;window.open(n,"_blank")}else toastr.info("Es necesario ingresar el periodo.","Información");else toastr.info("La fecha fin es obligatoria","Información")}))},init:function(){this.onExportConsolidated(),this.onExportDetailed(),this.onMissing()}},s={detailedMissig:{object:$("#detailed_missing_modal"),show:function(a){e=a,this.object.modal("show"),t.detailedMissing.reload()}}};return{init:function(){n.init(),a(),t.init(),o.init(),i.init()}}}();$((function(){InitApp.init()}));