var InitApp=function(){var e={sections:{object:null,options:{ajax:{url:"/admin/gestion-duplicado-aula/get".proto().parseURL(),type:"GET",data:function(e){delete e.columns,e.termId=$("#term-select").val(),e.careerId=$("#career-select").val()}},columns:[{data:"career",title:"Escuela profesional",orderable:!1},{data:"academicYearA",title:"Plan de estudio A",orderable:!1},{data:"courseA",title:"Curso A",orderable:!1},{data:"sectionA",title:"Sección A",orderable:!1},{data:"academicYearB",title:"Plan de estudio B",orderable:!1},{data:"courseB",title:"Curso B",orderable:!1},{data:"sectionB",title:"Sección B",orderable:!1},{data:null,title:"Opciones",orderable:!1,width:"240px",render:function(e){var a="";return a+=`<button data-idA="${e.sectionAId}" data-idB="${e.sectionBId}" class="btn btn-sm btn-danger delete"> <i class="fa fa-trash"></i> </button>`}}]},init:function(){this.object=$("#data-table").DataTable(this.options),$("#data-table").on("click",".delete",(function(a){var t=$(this).data("ida"),n=$(this).data("idb");swal({title:"¿Desea eliminar la sección?",text:"Una vez eliminado no podrá recuperarlo",type:"warning",showCancelButton:!0,confirmButtonText:"Si, eliminar",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(a){a.value&&(mApp.blockPage(),$.ajax({url:`/admin/gestion-duplicado-aula/eliminar/${t}/${n}`.proto().parseURL(),type:"POST"}).done((function(){mApp.unblockPage(),e.sections.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})))}))}))},reload:function(){null===this.object?this.init():this.object.ajax.reload()}}},a=function(){$("#add-form").validate({submitHandler:function(a){var t=$(a).find('button[type="submit"]');t.addLoader(),$.ajax({type:"POST",url:"/admin/gestion-duplicado-aula/guardar".proto().parseURL(),data:$(a).serialize(),success:function(){$("#AddModal").modal("hide"),e.sections.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#add-form")[0].reset()},error:function(e){toastr.error(e.responseText,_app.constants.toastr.title.error)},complete:function(){t.removeLoader()}})}})},t={term:{init:function(){$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(a){$("#term-select").select2({data:a.items}),null!==a.selected&&($("#term-select").val(a.selected),$("#term-select").trigger("change.select2")),e.sections.init(),$("#term-select").on("change",(function(a){e.sections.reload()}))}))}},career:{init:function(){$.ajax({url:"/carreras/get".proto().parseURL()}).done((function(a){a.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$("#career-select").select2({data:a.items}),$("#career-select").on("change",(function(a){e.sections.reload()}))}))}},careers:{init:function(){$("#careerId_a").empty(),$.ajax({url:"/carreras/get"}).done((function(e){$("#careerId_a").select2({data:e.items}),$("#careerId_a").on("change",(function(){$(this).val()===_app.constants.guid.empty?(t.plansA.empty(),t.plansB.empty()):(t.plansA.load($(this).val()),t.plansB.load($(this).val()))})),$("#careerId_a").trigger("change")}))}},plansA:{init:function(){$("#academicYearAId_a").select2({placeholder:"Seleccione un plan",disabled:!0}),$("#academicYearAId_a").on("change",(function(){$(this).val()===_app.constants.guid.empty?t.courseA.empty():t.courseA.load($(this).val())})),$("#academicYearAId_a").trigger("change")},load:function(e){$("#academicYearAId_a").empty(),$.ajax({url:`/carreras/${e}/planestudio/get`.proto().parseURL()}).done((function(e){$("#academicYearAId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#academicYearAId_a").empty(),$("#academicYearAId_a").select2({placeholder:"Seleccione un plan",disabled:!0})}},courseA:{init:function(){$("#courseAId_a").select2({placeholder:"Seleccione un Curso",disabled:!0}),$("#courseAId_a").on("change",(function(){$(this).val()===_app.constants.guid.empty?t.sectionA.empty():t.sectionA.load($(this).val())})),$("#courseAId_a").trigger("change")},load:function(e){$("#courseAId_a").empty(),$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#courseAId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#courseAId_a").empty(),$("#courseAId_a").select2({placeholder:"Seleccione un Curso",disabled:!0})}},sectionA:{init:function(){$("#sectionAId_a").select2({placeholder:"Seleccione una Seccion",disabled:!1}),$("#sectionAId_a").on("change",(function(){$(this).val()})),$("#sectionAId_a").trigger("change")},load:function(e){$("#sectionAId_a").empty(),$.ajax({url:`/cursos/${$("#courseAId_a").val()}/secciones/get`.proto().parseURL()}).done((function(e){$("#sectionAId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#sectionAId_a").empty(),$("#sectionAId_a").select2({placeholder:"Seleccione una sección",disabled:!1})}},plansB:{init:function(){$("#academicYearBId_a").select2({placeholder:"Seleccione un plan",disabled:!0}),$("#academicYearBId_a").on("change",(function(){$(this).val()===_app.constants.guid.empty?t.courseB.empty():t.courseB.load($(this).val())})),$("#academicYearBId_a").trigger("change")},load:function(e){$("#academicYearBId_a").empty(),$.ajax({url:`/carreras/${e}/planestudio/get`.proto().parseURL()}).done((function(e){$("#academicYearBId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#academicYearBId_a").empty(),$("#academicYearBId_a").select2({placeholder:"Seleccione un plan",disabled:!0})}},courseB:{init:function(){$("#courseBId_a").select2({placeholder:"Seleccione un Curso",disabled:!0}),$("#courseBId_a").on("change",(function(){$(this).val()===_app.constants.guid.empty?t.sectionB.empty():t.sectionB.load($(this).val())})),$("#courseBId_a").trigger("change")},load:function(e){$("#courseBId_a").empty(),$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#courseBId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#courseBId_a").empty(),$("#courseBId_a").select2({placeholder:"Seleccione un Curso",disabled:!0})}},sectionB:{init:function(){$("#sectionBId_a").select2({placeholder:"Seleccione una Seccion",disabled:!1}),$("#sectionBId_a").on("change",(function(){$(this).val()})),$("#sectionBId_a").trigger("change")},load:function(e){$("#sectionBId_a").empty(),$.ajax({url:`/cursos/${$("#courseBId_a").val()}/secciones/get`.proto().parseURL()}).done((function(e){$("#sectionBId_a").select2({data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$("#sectionBId_a").empty(),$("#sectionBId_a").select2({placeholder:"Seleccione una sección",disabled:!1})}},init:function(){this.term.init(),this.career.init(),this.careers.init(),this.plansA.init(),this.courseA.init(),this.sectionA.init(),this.plansB.init(),this.courseB.init(),this.sectionB.init()}};return{init:function(){t.init(),a()}}}();$((function(){InitApp.init()}));