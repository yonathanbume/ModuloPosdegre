var report=function(){var e={object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/reporte_asistencia/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.cid=$("#select_career").val(),e.fid=$("#select_faculties").val(),e.search=$("#search").val()}},pageLength:50,orderable:[],columns:[{data:"paternalSurname",title:"Apellido Paterno"},{data:"maternalSurname",title:"Apellido Materno"},{data:"names",title:"Nombres"},{data:"userName",title:"Usuario"},{data:"email",title:"Correo electrónico"},{data:"phoneNumber",title:"Teléfono"},{data:null,title:"Opciones",render:function(e){return`<button data-id="${e.id}" class="btn btn-primary btn-sm m-btn m-btn--icon btn-detail" <span><i class="la la-eye"> </i> </span>Ver Reporte </span></span></button>`}}]},reloadTable:function(){null===e.object?e.init():e.object.ajax.reload()},events:{onDetails:function(){$("#datatable_report").on("click",".btn-detail",(function(){var e=$(this).data("id");location.href=`/admin/reporte_asistencia/${e}`.proto().parseURL()}))},search:function(){var t=0;$("#search").keyup((function(){clearTimeout(t),t=setTimeout((function(){e.reloadTable()}),500)}))},init:function(){this.onDetails(),this.search()}},init:function(){e.events.init(),e.object=$("#datatable_report").DataTable(e.options)}},t={onChangeCareer:function(){$("#btn_export").on("click",(function(){var e=`/admin/reporte_asistencia/reporte-asistencia-consolidado?facultyId=${$("#select_faculties").val()}&careerId=${$("#select_career").val()}`;window.open(e,"_blank")}))},init:function(){this.onChangeCareer()}};return{load:function(){$.ajax({url:"/admin/reporte_asistencia/getfaculties".proto().parseURL()}).done((function(e){e.items.length>0?$("#select_faculties").select2({data:e.items}).trigger("change"):($("#select_faculties").select2(),$("#select_career").select2(),showToastrFail("Debe tener al menos una facultad"))})),$("#select_faculties").on("change",(function(){var e=$("#select_faculties").val();$.ajax({url:`/admin/reporte_asistencia/getcareers/${e}`.proto().parseURL()}).done((function(e){$("#select_career").empty(),e.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$("#select_career").select2({data:e.items,placeholder:"Carrera"}).trigger("change")}))})),$("#select_career").on("change",(function(){e.reloadTable()})),t.init()}}}();$((function(){report.load()}));