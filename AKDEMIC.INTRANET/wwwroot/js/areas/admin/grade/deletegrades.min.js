var CourseTable=function(){var e={init:function(){this.terms.init(),this.careers.init(),this.plans.init(),this.programs.init(),this.cicles.init()},terms:{init:function(){$(".select2-terms").select2(),$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(e){$(".select2-terms").select2({data:e.items}),e.selected&&$(".select2-terms").val(e.selected).trigger("change")}))}},careers:{init:function(){$(".select2-areacareers").select2({ajax:{delay:1e3,url:"/carreras/get/v4".proto().parseURL()},allowClear:!0,minimumInputLength:0,placeholder:"Seleccione escuela profesional"}),$(".select2-areacareers").on("change",(function(){$(this).val()===_app.constants.guid.empty?(e.plans.empty(),e.programs.empty(),e.cicles.empty()):(e.cicles.empty(),e.plans.load2($(this).val()),e.programs.load($(this).val()))}))}},plans:{init:function(){$(".select2-plans").select2({minimumResultsForSearch:-1,placeholder:"Seleccione un plan",disabled:!0}),$(".select2-plans").on("change",(function(){$(this).val()===_app.constants.guid.empty?e.cicles.empty():e.cicles.load($(this).val())}))},load:function(e){$(".select2-plans").empty(),$.ajax({url:`/planes-estudio/${e}/programas-academicos/get`.proto().parseURL()}).done((function(e){$(".select2-plans").select2({minimumResultsForSearch:-1,data:e,disabled:!1}).trigger("change")}))},load2:function(e){$(".select2-plans").empty(),$.ajax({url:`/planes2?careerId=${e}`.proto().parseURL()}).done((function(e){e.unshift({id:_app.constants.guid.empty,text:"Todas"}),$(".select2-plans").select2({minimumResultsForSearch:-1,data:e,disabled:!1}).trigger("change")}))},empty:function(){$(".select2-plans").empty(),$(".select2-plans").select2({placeholder:"Seleccione un plan",disabled:!0})}},programs:{init:function(){$(".select2-tprograms").select2({minimumResultsForSearch:-1,placeholder:"Seleccione un programa",disabled:!0}),$(".select2-tprograms").on("change",(function(){$(this).val()===_app.constants.guid.empty?(e.plans.load2($(".select2-areacareers").val()),e.cicles.empty()):(e.plans.load($(this).val()),e.cicles.load($(this).val()))}))},load:function(e){$(".select2-tprograms").empty(),$(".select2-tprograms").prop("disabled",!0),$.ajax({url:`/carreras/${e}/programas/get`.proto().parseURL()}).done((function(e){e.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$(".select2-tprograms").select2({minimumResultsForSearch:-1,data:e.items,disabled:!1}).trigger("change")}))},empty:function(){$(".select2-tprograms").empty(),$(".select2-tprograms").select2({placeholder:"Seleccione un programa",disabled:!0})}},cicles:{init:function(){$(".select2-cyccles").select2({minimumResultsForSearch:-1,placeholder:"Seleccione un ciclo",disabled:!0})},load:function(e){$(".select2-cyccles").empty(),$.ajax({url:`/planes-estudio/${e}/niveles/get`.proto().parseURL()}).done((function(e){e.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$(".select2-cyccles").select2({minimumResultsForSearch:-1,data:e.items,disabled:!1})}))},empty:function(){$(".select2-cyccles").empty(),$(".select2-cyccles").select2({placeholder:"Seleccione un ciclo",disabled:!0})}}},t={courses:{object:null,options:{ajax:{url:"/admin/notas/limpiarnotas/get-cursos".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns,e.termId=$(".select2-terms").val(),e.careerId=$(".select2-areacareers").val(),e.curriculumId=$(".select2-plans").val(),e.academicProgramId=$(".select2-tprograms").val(),e.academicYear=$(".select2-cyccles").val(),e.search=$("#search").val()}},columns:[{data:"code",title:"Código",width:80},{data:"name",title:"Curso"},{data:"area",title:"Área Curricular"},{data:"program",title:"Programa de Estudios"},{data:"cycle",title:"Ciclo",width:50},{data:"type",title:"Condición"},{data:null,title:"Opciones",width:200,orderable:!1,render:function(e){var t="";return t+=`<a href='/admin/notas/limpiarnotas/curso/${e.id}/periodo/${$(".select2-terms").val()}' class='btn btn-brand btn-sm m-btn m-btn--icon' title="Sílabo"><span><i class="la la-cog"></i><span>Detalles</span></span></a>`}}]},reload:function(){t.courses.object.ajax.reload()},init:function(){t.courses.object=$("#ajax_data").DataTable(t.courses.options)}}},a={onSearch:function(){$(".btn-search").on("click",(function(){null===t.courses.object?t.courses.init():t.courses.reload()}))},init:function(){this.onSearch()}};return{init:function(){e.init(),a.init()}}}();$((function(){CourseTable.init()}));