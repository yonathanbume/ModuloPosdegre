var index=function(){var n=$("#CourseTermId").val(),t={sections:{load:function(){$.ajax({url:`/admin/notas/limpiarnotas/curso-periodo/${n}/get-secciones`,type:"GET"}).done((function(n){$("#section_select").select2({placeholder:"Seleccionar sección",data:n}).trigger("change")}))},events:{onChange:function(){$("#section_select").on("change",(function(){var n=$(this).val();e.evaluations.load(n)}))},init:function(){this.onChange()}},init:function(){this.load(),this.events.init()}},init:function(){t.sections.init()}},a={cleanGrades:function(){$("#container_evaluations").on("click",".btn-clean-grades",(function(){var n=$(this).data("sectionid"),t=$(this).data("evaluationid"),a=$(this).data("evaluation");swal({type:"warning",text:`¿Seguro que desea mover las notas oficiales de la evaluación ${a} a las notas temporales?`,title:"Mover notas oficiales",confirmButtonText:"Aceptar",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({type:"POST",url:`/admin/notas/limpiarnotas/seccion/${n}/evaluacion/${t}`}).done((function(t){e.evaluations.load(n),swal({type:"success",title:"Completado",text:t,confirmButtonText:"Aceptar"})})).fail((function(n){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===n.status?"No hay respuesta del servidor":n.responseText})}))}))})}))},init:function(){this.cleanGrades()}},e={evaluations:{load:function(n){$("#container_evaluations").html(""),mApp.block("#container_evaluations",{message:"Cargando datos..."}),$.ajax({url:`/admin/notas/get-evaluaciones-notas/${n}`,type:"GET",dataType:"HTML"}).done((function(n){mApp.unblock("#container_evaluations"),$("#container_evaluations").html(n)}))}}};return{init:function(){t.init(),a.init()}}}();$((()=>{index.init()}));