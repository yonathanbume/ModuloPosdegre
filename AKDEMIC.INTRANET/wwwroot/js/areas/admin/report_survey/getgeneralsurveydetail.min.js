var InitApp=function(){var e=$("#SurveyId").val(),t={users:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/reporte_encuesta/usuarios/listar".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.surveyId=e,t.searchValue=$("#search").val(),t.answered=$("#answered").val()}},pageLength:20,orderable:[],columns:[{title:"Nombre Completo",data:"user"},{title:"Estado de Respuesta",data:"answered",orderable:!1}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options)}},init:function(){this.users.init()}},a={init:function(){this.answered.init()},answered:{init:function(){$("#answered").select2(),this.events()},events:function(){$("#answered").on("change",(function(){t.users.reload()}))}}},n=function(){$("#search").doneTyping((function(){t.users.reload()}))},s={init:function(){this.load()},load:function(){$.ajax({url:`/admin/reporte_encuesta/${e}/preguntas`.proto().parseURL(),type:"GET",dataType:"html"}).done((function(e){$("#questions").html(e),$("#questionsLoader").css("display","none"),$(".table-class-question").each((function(){var e=$(this).attr("id"),t=`/admin/gestion-encuestas/pregunta/${e}/respuestas`;$(`#${e}`).DataTable({serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:t,type:"GET",dataType:"JSON"},pageLength:10,orderable:[],columns:[{title:"Respuesta",orderable:!1,data:"answer"}],dom:"Bfrtip",buttons:["excel","pdf"]})}))})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){}))}};return{init:function(){t.init(),s.init(),a.init(),n()}}}();$((function(){InitApp.init()}));