var reportApprovedCourses=function(){var e=null,a={ajax:{url:"/admin/reporte_aprobados_desaprobados_cursos/get".proto().parseURL(),data:function(e){e.cid=$("#select_courses").val(),e.carId=$("#select_careers").val(),e.curId=$("#select_curriculums").val(),e.pid=$("#select_terms").val(),e.name=$("#search").val()}},pageLength:10,orderable:[],columns:[{data:"name",title:"Nombres Completos"},{data:"code",title:"Código"},{data:"career",title:"Carrera"},{data:"academicProgram",title:"Programa Académico"},{data:"intents",title:"Veces"},{data:"grade",title:"Nota"},{data:"approbed",title:"Estado",render:function(e){return!0===e?'<span class="m-badge  m-badge--success m-badge--wide">Aprobado</span>':'<span class="m-badge  m-badge--danger m-badge--wide">Desaprobado</span>'}}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(e,a,r,t){var s=`/admin/reporte_aprobados_desaprobados_cursos/get-excel?careerId=${$("#select_careers").val()}&curriculumId=${$("#select_curriculums").val()}&termId=${$("#select_terms").val()}&courseId=${$("#select_courses").val()}`;window.open(s,"_blank")}}]},r=function(){var e=$("#select_careers").val();$.ajax({url:`/carreras/${e}/planestudio/get`.proto().parseURL()}).done((function(e){$("#select_curriculums").empty(),$("#select_curriculums").select2({data:e.items,placeholder:"Planes de estudio"}).trigger("change")})),$("#select_curriculums").on("change",(function(){t?(t=!1,s.init()):s.load()}))},t=!0,s={init:function(){var e=$("#select_curriculums").val();$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#select_courses").empty(),$("#select_courses").select2({data:e.items,placeholder:"Cursos"}),s.event(),$("#select_courses").trigger("change")}))},event:function(){$("#select_courses").on("change",(function(){n(),o()}))},load:function(){var e=$("#select_curriculums").val();$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#select_courses").empty(),$("#select_courses").select2({data:e.items,placeholder:"Cursos"}).trigger("change")}))}},o=function(){null===e?e=$("#datatable_index").DataTable(a):e.ajax.reload()},c=function(){$("#search").doneTyping((function(){o()})),$("#select_terms").select2({placeholder:"Periodo Académico"}),$("#select_terms").on("change",(function(e){n(),o()})),$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(e){$("#select_terms").select2({data:e.items}).val(e.selected).trigger("change")})),$.ajax({url:"/carreras/v2/get".proto().parseURL()}).done((function(e){$("#select_careers").empty(),$("#select_careers").select2({data:e.items,placeholder:"Escuelas"}),$("#select_careers").on("change",(function(){r()})),$("#select_careers").trigger("change")}))};function l(){var e=$("#select_terms").val(),a=$("#select_courses").val(),r=$("#select_careers").val(),t=$("#select_curriculums").val();$.ajax({type:"GET",url:`/admin/reporte_aprobados_desaprobados_cursos/chart/${r}/${t}/${a}/${e}`.proto().parseURL(),error:function(e,a,r){toastr.error(e.responseText,_app.constants.toastr.title.error)},success:function(e){e.length>0?function(e){var a=[["",""]];$.each(e,(function(e,r){a.push([r.approbedname,r.approbeds]),a.push([r.disapprobedname,r.disapprobeds])})),e=google.visualization.arrayToDataTable(a);var r={title:"Aprobados vs desaprobados",height:400,width:700,colors:["#43A047","#D32F2F"],titleFontSize:20,is3D:!0};new google.visualization.PieChart(document.getElementById("chart_div_report_approbed_disapprobed_courses")).draw(e,r)}(e):document.getElementById("chart_div_report_approbed_disapprobed_courses").innerHTML=""}})}var n=function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(l)};return{load:function(){c()}}}();$((function(){reportApprovedCourses.load()}));