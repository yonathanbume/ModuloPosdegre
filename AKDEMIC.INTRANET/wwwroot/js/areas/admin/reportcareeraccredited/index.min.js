var InitApp=function(){var t={reports:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/reporte-escuelas-acreditadas/datatable/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){t.careerId=$("#careers").val()}},dom:"Bfrtip",buttons:["csv","excel","pdf"],pageLength:20,orderable:[],columns:[{title:"Descripción",data:"description"},{title:"Escuela Profesional",data:"career"},{title:"Fecha de Inicio",data:"startDate"},{title:"Fecha de Fin",data:"endDate"}]},init:function(){t.reports.object=$("#data-table").DataTable(t.reports.options)},reload:function(){t.reports.object.ajax.reload()}},init:function(){t.reports.init()}},e={lang:function(){Highcharts.setOptions({lang:{contextButtonTitle:"Opciones",viewFullscreen:"Ver en pantalla completa",printChart:"Imprimir",downloadPNG:"Descargar PNG",downloadJPEG:"Descargar JPEG",downloadPDF:"Descargar PDF",downloadSVG:"Descargar SVG",downloadCSV:"Descargar CSV",downloadXLS:"Descargar XLS",openInCloud:"Abrir editor online"}})},credits:{text:"Fuente: AKDEMIC",href:""},buttons:{contextButton:{menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"]}},loadReport:function(){$("#chart-report-container").html(""),$("#chart-report-container").append('<div id="chart-report" class="chart"></div>'),$.ajax({url:"/admin/reporte-escuelas-acreditadas/chart/get",type:"GET",data:{careerId:$("#careers").val()}}).done((function(t){var a=t.categories.length,r=350;a>15&&(r=20*a),Highcharts.chart("chart-report",{chart:{height:r,type:"bar",events:{exportData:function(){for(var t=$("body").find(".highcharts-data-table"),e=$(".m-portlet").find(".highcharts-data-table").length;e<t.length;e++)$(t[e]).remove()}}},title:{text:"Número de Acreditaciones por Escuela Profesional"},subtitle:{text:""},credits:e.credits,xAxis:{categories:t.categories,title:{text:"Escuela Profesional"}},yAxis:{min:0,title:{text:"Número de acreditaciones"}},series:[{type:"column",name:"Cantidad",data:t.data,colorByPoint:!0,showInLegend:!0}],exporting:{showTable:!0,buttons:e.buttons}})})).fail((function(t){toastr.error(t.responseText,_app.constants.toastr.title.error)}))},init:function(){e.lang(),e.loadReport()}},a={init:function(){this.careers.init()},careers:{init:function(){a.careers.load(),a.careers.events()},load:function(){$.ajax({url:"/carreras/v2/get".proto().parseURL()}).done((function(t){$("#careers").select2({data:t.items})}))},events:function(){$("#careers").on("change",(function(){t.reports.reload(),e.loadReport()}))}}};return{init:function(){a.init(),e.init(),t.init()}}}();$((function(){InitApp.init()}));