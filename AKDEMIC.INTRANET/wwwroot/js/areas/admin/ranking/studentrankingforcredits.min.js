var InitApp=function(){var e={students:{object:null,options:{serverSide:!1,ajax:{url:"/admin/ranking/estudiantes-por-creditos/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns;var t=$(".select2-terms").val(),a=$(".select2-campus").val(),s=$(".select2-careers").val(),i=$(".select2-programs").val();s=s===_app.constants.guid.empty?null:s,a=a===_app.constants.guid.empty?null:a,i=i===_app.constants.guid.empty?null:i,e.termId=t,e.careerId=s,e.campusId=a,e.academicProgramId=i,e.search=$("#search").val()}},columns:[{title:"Posición",data:"position",orderable:!1},{title:"Ciclo",data:"academicYear",orderable:!1},{title:"Código",data:"code",orderable:!1},{title:"Apellidos, Nombres",data:"name",orderable:!1},{title:"Carrera",data:"career",orderable:!1},{title:"Sede",data:"campus",orderable:!1},{title:"Promedio",data:"weightedAverageGrade",orderable:!1},{title:"Créditos",data:"credits",orderable:!1},{title:"Créditos en Ciclo",data:"maxCredits",orderable:!1}],dom:"Bfrtip",buttons:[{extend:"pdfHtml5",title:"Ranking de estudiantes",exportOptions:{columns:":visible"}}]},init:function(){this.object=$("#data-table").DataTable(this.options)},reload:function(){this.object.ajax.reload()}}},t={init:function(){this.terms.init(),this.careers.init(),this.academicPrograms.init(),this.campus.init()},terms:{init:function(){$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(t){$(".select2-terms").select2({data:t.items}),null!==t.selected&&($(".select2-terms").val(t.selected),$(".select2-terms").trigger("change.select2")),e.students.init(),$(".select2-terms").on("change",(function(){e.students.reload()}))}))}},careers:{init:function(){$.ajax({url:"/carreras/get".proto().parseURL()}).done((function(a){a.items.unshift({id:_app.constants.guid.empty,text:"Todos"}),$(".select2-careers").select2({data:a.items}),$(".select2-careers").on("change",(function(){var a=$(".select2-careers").val();a===_app.constants.guid.empty?($(".select2-programs").empty(),$(".select2-programs").select2({placeholder:"Seleccione una escuela",disabled:!0})):t.academicPrograms.load(a),e.students.reload()}))}))}},academicPrograms:{init:function(){$(".select2-programs").select2({placeholder:"Seleccione una escuela"}),$(".select2-programs").on("change",(function(){e.students.reload()}))},load:function(e){$.ajax({url:`/carreras/${e}/programas/get/`.proto().parseURL()}).done((function(e){e.items.unshift({id:_app.constants.guid.empty,text:"Todos"}),$(".select2-programs").empty(),$(".select2-programs").select2({placeholder:"Seleccione una Escuela",data:e.items,minimumResultsForSearch:10,disabled:!1})}))}},campus:{init:function(){$.ajax({url:"/sedes/get".proto().parseURL()}).done((function(t){t.items.unshift({id:_app.constants.guid.empty,text:"Todos"}),$(".select2-campus").select2({data:t.items}),$(".select2-campus").on("change",(function(){e.students.reload()}))}))}}},a=function(){$("#search").doneTyping((function(){e.students.reload()}))};return{init:function(){t.init(),a()}}}();$((function(){InitApp.init()}));