var MeritTable=function(){var e=null,a=!1,t=!1,r=!1,n=!1,i=getSimpleDataTableConfiguration({url:"/admin/ranking/cuadro-meritos/get".proto().parseURL(),data:function(e){delete e.columns;var a=$(".select2-terms").val(),t=$(".select2-campuses").val(),r=$(".select2-careers").val(),n=$(".select2-academicPrograms").val();r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,n=n===_app.constants.guid.empty?null:n,e.termId=a,e.careerId=r,e.campusId=t,e.academicProgramId=n,e.search=$("#search").val()},pageLength:10,orderable:[],columns:[{title:"Posición",data:"position",orderable:!1},{title:"Ciclo",data:"academicYear",orderable:!1},{title:"Código",data:"code",orderable:!1},{title:"Apellidos, Nombres",data:"name",orderable:!1},{title:"Carrera",data:"career",orderable:!1},{title:"Sede",data:"campus",orderable:!1},{title:"Promedio",data:"weightedAverageGrade",orderable:!1},{title:"Créditos",data:"credits",orderable:!1},{title:"Orden de Mérito",data:"meritType",orderable:!1}]}),c=function(){a&&t&&r&&n&&(null===e?e=$(".students-datatable").DataTable(i):e.ajax.reload())},l=function(){$("#search").doneTyping((function(){c()}))},o={init:function(){this.terms.init(),this.campuses.init(),this.careers.init(),this.academicPrograms.init()},terms:{init:function(){$.ajax({url:"/admin/ranking/periodos/get".proto().parseURL()}).done((function(e){a=!0,$(".select2-terms").select2({data:e}).on("change",(function(){c()})).trigger("change")}))}},careers:{init:function(){$(".select2-careers").select2({ajax:{url:"/admin/ranking/carreras/get".proto().parseURL(),delay:300},minimumInputLength:0,placeholder:"Carreras",allowClear:!0}).on("change",(function(){t=!0,$(".select2-academicPrograms").empty().trigger("change")})).trigger("change")}},academicPrograms:{init:function(){$(".select2-academicPrograms").select2({ajax:{url:"/admin/ranking/especialidades/get".proto().parseURL(),delay:300,data:function(e){return{q:e.term,cid:$(".select2-careers").val()}}},minimumInputLength:0,placeholder:"Programa Académico",allowClear:!0}).on("change",(function(){n=!0,c()})).trigger("change")}},campuses:{init:function(){$.ajax({url:"/admin/ranking/sedes/get".proto().parseURL()}).done((function(e){$(".select2-campuses").select2({placeholder:"Campus",data:e.results}).on("change",(function(){r=!0,c()})).trigger("change")}))}}},s=function(){$(".btn-report").on("click",(function(){var e=$(this),a=$(".select2-terms").val(),t=$(".select2-campuses").val(),r=$(".select2-careers").val();return r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,e.addLoader(),window.open(`${location.pathname}/pdf/get?termId=${a}&careerId=${r}&campusId=${t}`.proto().parseURL(),"_blank"),e.removeLoader(),!1})),$(".btn-detailed-report").on("click",(function(){var e=$(this),a=$(".select2-terms").val(),t=$(".select2-campuses").val(),r=$(".select2-careers").val();return r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,e.addLoader(),window.open(`${location.pathname}/pdf/get/detalles?termId=${a}&careerId=${r}&campusId=${t}`.proto().parseURL(),"_blank"),e.removeLoader(),!1}))};return{init:function(){o.init(),l(),s()}}}();$((function(){MeritTable.init()}));