var examweek=function(){var e={examweek:{object:null,options:{ajax:{url:"/admin/semana-examenes/get",type:"GEt"},columns:[{data:"term",title:"Periodo"},{data:"week",title:"Semana"},{data:"weekStart",title:"Sem. Inicio"},{data:"weekEnd",title:"Sem. Fin"}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#datatable").DataTable(this.options)}},init:function(){this.examweek.init()}},t={term:{load:function(){$.ajax({url:"/periodos/get",type:"GET"}).done((function(e){$("[name='TermId']").select2({data:e.items,placeholder:"Seleccionar periodo",dropdownParent:a.examweek.object}),$("[name='TermId']").val(e.selected).trigger("change")}))},events:{onChange:function(){$("[name='TermId']").on("change",(function(){var e=$(this).val();t.week.load(e)}))},init:function(){this.onChange()}},init:function(){this.events.init(),this.load()}},week:{load:function(e){$("[name='Week']").empty(),$.ajax({url:`/admin/semana-examenes/get-semanas-detalle?termId=${e}`,type:"GET"}).done((function(e){$("[name='Week']").select2({data:e,dropdownParent:a.examweek.object,placeholder:"Seleccionar semana"})})).fail((function(){toastr.error("Error al obtener las semanas","Error!")}))}},type:{load:function(){$("[name='Type']").select2({placeholder:"Seleccionar tipo",dropdownParent:a.examweek.object})},init:function(){this.load()}},init:function(){this.type.init(),this.term.init()}},a={examweek:{object:$("#add_exam_week_modal"),form:{object:$("#add_exam_week_form").validate({submitHandler:function(t,n){swal({type:"warning",title:"Este proceso es irreversible.",text:"Â¿Seguro que desea continuar?.",confirmButtonText:"Aceptar",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{var n=new FormData(t);a.examweek.object.find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:"/admin/semana-examenes/agregar",type:"POST",data:n,contentType:!1,processData:!1}).done((function(t){e.examweek.reload(),a.examweek.object.modal("hide"),swal({type:"success",title:"Completado",text:"Semana de examen agregada satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===e.status?"No hay respuesta del servidor":e.responseText})})).always((function(){a.examweek.object.find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}))})}})}}};return{init:function(){e.init(),t.init()}}}();$((()=>{examweek.init()}));