var InitApp=function(){var t={students:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/admin/bienestar_institucional/students-datatable".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){delete t.columns,t.termId=$("#termId").val(),t.facultyId=$("#facultyId").val(),t.careerId=$("#careerId").val(),t.admissionTypeId=$("#admissionTypeId").val(),t.searchValue=$("#search").val()}},pageLength:50,orderable:[],columns:[{data:"userName",title:"Usuario"},{data:"fullname",title:"Nombres Completos"},{data:"email",title:"Correo electr√≥nico"},{data:"faculty",title:"Facultad"},{data:"career",title:"Escuela Profesional"},{title:"Lleno Ficha",data:null,render:function(t){return t.hasStudentInformationTerm?'<span class="m--font-bolder m--font-success">SI</span>':'<span class="m--font-bolder m--font-danger">NO</span>'}},{data:null,title:"Opciones",render:function(t){var e="",a=`/admin/bienestar_institucional/ficha-estudiante/${t.id}/periodo/${$("#termId").val()}`.proto().parseURL(),n=`/admin/bienestar_institucional/constancia/${t.id}/periodo/${$("#termId").val()}`.proto().parseURL();return e+=`<a href="${a}" style="margin-bottom:3px" `,e+="class='btn btn-primary ",e+="m-btn btn-sm m-btn--icon' ",e+=" data-id='"+t.id+"'>",e+="<span><i class='la la-eye'></i><span>Ficha</span></span></a> ",t.hasStudentInformationTerm&&(e+=`<a href="${n}" `,e+="class='btn btn-primary ",e+="m-btn btn-sm m-btn--icon' ",e+=" data-id='"+t.id+"'>",e+="<span><i class='la la-download'></i><span>Constancia</span></span></a> "),e}}]},reload:function(){null==this.object?this.object=$("#data-table").DataTable(this.options):this.object.ajax.reload()}}},e=function(){$("#search").doneTyping((function(){t.students.reload()}))},a={init:function(){this.faculties.init(),this.careers.init(),this.admissionTypes.init(),this.terms.init()},terms:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/periodos/get/v2".proto().parseURL()}).done((function(t){$("#termId").select2({data:t.items}),null!==t.selected&&$("#termId").val(t.selected).trigger("change")}))},events:function(){$("#termId").on("change",(function(){t.students.reload()}))}},faculties:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/facultades/get".proto().parseURL(),type:"GET"}).done((function(t){$("#facultyId").select2({data:t.items})}))},events:function(){$("#facultyId").on("change",(function(){let e=$(this).val();a.careers.load(e),t.students.reload()}))}},careers:{init:function(){$("#careerId").select2(),this.events()},clear:function(){$("#careerId").empty(),$("#careerId").html("<option value=0 selected>Todos</option>")},load:function(t){this.clear(),$.ajax({url:`/facultades/${t}/carreras/get`.proto().parseURL(),type:"GET"}).done((function(t){$("#careerId").select2({data:t.items})}))},events:function(){$("#careerId").on("change",(function(){t.students.reload()}))}},admissionTypes:{init:function(){this.load(),this.events()},load:function(){$.ajax({url:"/admissionTypes/get".proto().parseURL(),type:"GET"}).done((function(t){$("#admissionTypeId").select2({data:t.items})}))},events:function(){$("#admissionTypeId").on("change",(function(){t.students.reload()}))}}},n={excel:{init:function(){$("#btn-reporte-excel").click((function(){var t=$(this);t.addLoader(),$.fileDownload("/admin/bienestar_institucional/reporte-excel/get".proto().parseURL(),{httpMethod:"GET",data:{termId:$("#termId").val(),facultyId:$("#facultyId").val(),careerId:$("#careerId").val(),admissionTypeId:$("#admissionTypeId").val(),searchValue:$("#search").val()},successCallback:function(){t.removeLoader(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},failCallback:function(){t.removeLoader(),toastr.success(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}})}))}},init:function(){this.excel.init()}};return{init:function(){e(),a.init(),n.init()}}}();$((function(){InitApp.init()}));