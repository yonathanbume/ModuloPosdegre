var wizard_student_information=function(){var getDeparmentsOrigin=function(){$.ajax({type:"GET",url:"/departamentos/get".proto().parseURL()}).done((function(e){$("#originDepartmentId").select2({data:e.items}),null!==originDepartmentId&&($("#originDepartmentId").val(originDepartmentId).trigger("change"),originDepartmentId=null)}))},getProvincesOrigin=function(){$("#originDepartmentId").on("change",(function(){var e=$(this).val();$.ajax({type:"GET",url:("/departamentos/"+e+"/provincias/get").proto().parseURL()}).done((function(e){$("#originProvinceId").empty(),$("#originProvinceId").select2({data:e.items}),null!==originProvinceId&&($("#originProvinceId").val(originProvinceId).trigger("change"),originProvinceId=null)}))}))},getDistrictsOrigin=function(){$("#originProvinceId").on("change",(function(){var e=$(this).val(),t=$("#originDepartmentId").val();$.ajax({type:"GET",url:("/departamentos/"+t+"/provincias/"+e+"/distritos/get").proto().parseURL()}).done((function(e){$("#originDistrictId").empty(),$("#originDistrictId").select2({data:e.items}),null!==originDistrictId&&($("#originDistrictId").val(originDistrictId).trigger("change"),originDistrictId=null)}))}))},getDeparmentsCurrent=function(){$.ajax({type:"GET",url:"/departamentos/get".proto().parseURL()}).done((function(e){$("#currentDepartmentId").select2({data:e.items}),null!==currentDepartmentId&&($("#currentDepartmentId").val(currentDepartmentId).trigger("change"),currentDepartmentId=null)}))},getProvincesCurrent=function(){$("#currentDepartmentId").on("change",(function(){var e=$(this).val();$.ajax({type:"GET",url:("/departamentos/"+e+"/provincias/get").proto().parseURL()}).done((function(e){$("#currentProvinceId").empty(),$("#currentProvinceId").select2({data:e.items}),null!==currentProvinceId&&($("#currentProvinceId").val(currentProvinceId).trigger("change"),currentProvinceId=null)}))}))},getDistrictsCurrent=function(){$("#currentProvinceId").on("change",(function(){var e=$(this).val(),t=$("#currentDepartmentId").val();$.ajax({type:"GET",url:("/departamentos/"+t+"/provincias/"+e+"/distritos/get").proto().parseURL()}).done((function(e){$("#currentDistrictId").empty(),$("#currentDistrictId").select2({data:e.items}),null!==currentDistrictId&&($("#currentDistrictId").val(currentDistrictId).trigger("change"),currentDistrictId=null)}))}))},getCareers=function(){$.ajax({type:"GET",url:"/carreras/v2/get".proto().parseURL()}).done((function(e){$("#Career").select2({data:e.items})}))},InitSelect2Origin=function(){$.when(getDeparmentsOrigin()).done((function(){getProvincesOrigin(),getDistrictsOrigin()}))},InitSelect2Current=function(){$.when(getDeparmentsCurrent()).done((function(){getProvincesCurrent(),getDistrictsCurrent()}))},OtherFunctions=function(){$(".amt").keyup((function(){var importe_total=0;$(".amt").each((function(index,value){$.isNumeric($(this).val())&&(importe_total+=eval($(this).val()))})),$("#TotalRemuneration").val(importe_total)})),$("#Birthdate").datepicker({format:_app.constants.formats.datepicker}),$("#Birthdate").datepicker().on("change",(function(){var e=(new Date).getUTCFullYear(),t=$("#Birthdate").val(),n=parseInt(t.substr(t.length-4),10);isNaN(e-n)?$("#Age").val(""):$("#Age").val((e-n).toString())})),$("#Birthdate").doneTyping((function(){var e=(new Date).getUTCFullYear(),t=$("#Birthdate").val(),n=parseInt(t.substr(t.length-4),10);isNaN(e-n)?$("#Age").val(""):$("#Age").val((e-n).toString())})),$("input[id=AuthorizeCheck]").on("change",(function(){!0===$(this)[0].checked?$(".authorize").prop("disabled",!1):$(".authorize").prop("disabled",!0)}))},Disables=function(){$("#ISSickStudent").on("change",(function(){0==$(this).val()?$("#TypeIllness").prop("disabled",!0):$("#TypeIllness").prop("disabled",!1)})),$("#IsSick").on("change",(function(){0==$(this).val()?(4==$("#ParentSick option").length&&$("#ParentSick").append($("<option>",{value:0,text:"---"})),$("#ParentSick").val(0).trigger("change"),$("#ParentSick").prop("disabled",!0),$("#TypeParentIllness").prop("disabled",!0)):($("#ParentSick").prop("disabled",!1),$("#ParentSick").find('option[value="0"]').remove(),$("#ParentSick").val(1).trigger("change"),$("#TypeParentIllness").prop("disabled",!1))})),$("#Insurance").on("change",(function(){"False"==$(this).val()?($("#TypeInsurance").prepend("<option value='0'>---</option>"),$("#TypeInsurance").val("0").trigger("change"),$("#TypeInsurance").prop("disabled",!0),$("#OtherInsurance").prop("disabled",!0),$("#OtherInsurance").val("")):($("#TypeInsurance option[value='0']").remove(),$("#TypeInsurance").trigger("change"),$("#TypeInsurance").prop("disabled",!1))})),$("#TypeInsurance").on("change",(function(){4==$(this).val()?$("#OtherInsurance").prop("disabled",!1):$("#OtherInsurance").prop("disabled",!0)})),$("#PrincipalPerson").on("change",(function(){var e=$(this).val();0===(e=parseInt(e,10))?($("#IsMother").show(),$("#IsFather").show()):1===e?($("#IsMother").hide(),$("#IsFather").show()):2===e?($("#IsFather").hide(),$("#IsMother").show()):($("#IsMother").hide(),$("#IsFather").show())}))};return{init:function(){InitSelect2Origin(),InitSelect2Current(),getCareers(),Disables(),OtherFunctions()}}}(),StudentFamilyTable=function(){var e,t=[],n=[{value:0,name:"--"},{value:1,name:"Padre"},{value:2,name:"Madre"},{value:3,name:"Hijo"},{value:4,name:"Hija"},{value:5,name:"Otros"}],a=[{value:0,name:"--"},{value:1,name:"Soltero(a)"},{value:2,name:"Divorciado(a)"},{value:3,name:"Casado(a)"},{value:4,name:"Viudo(a)"}],i=[{value:0,name:"--"},{value:1,name:"Primaria completa"},{value:2,name:"Primaria incompleta"},{value:3,name:"Secundaria completa"},{value:4,name:"Secundaria incompleta"},{value:5,name:"Superior técnica completa"},{value:6,name:"Superior técnica incompleta"},{value:7,name:"Universitario completo"},{value:8,name:"Universitario incompleto"},{value:9,name:"Postgrado"},{value:10,name:"Sin nivel"}],r=null,o={data:{type:"local",source:t},columns:[{field:"completename",title:"Nombre",width:150},{field:"paternalname",title:"Apellido Paterno",width:150},{field:"maternalname",title:"Apellido Materno",width:150},{field:"birthday",title:"F.Nacimiento",width:100},{field:"relationshipint",title:"Parentesco",width:100,template:function(e){tmp="";var t=parseInt(e.relationshipint);return tmp=`<span>${n[t].name}</span>`,tmp}},{field:"civilstatusint",title:"Estado Civil",width:100,template:function(e){tmp="";var t=parseInt(e.civilstatusint);return tmp=`<span>${a[t].name}</span>`,tmp}},{field:"degreeinstructionint",title:"Grado de instrucción",width:150,template:function(e){tmp="";var t=parseInt(e.degreeinstructionint);return tmp=`<span>${i[t].name}</span>`,tmp}},{field:"certificated",title:"Titulado/Maestria",width:150},{field:"occupation",title:"Ocupación",width:150},{field:"workcenter",title:"Centro Laboral Y/o estudios",width:150},{field:"location",title:"Localidad",width:150},{field:"options",title:"",className:"left",width:100,sortable:!1,filterable:!1,template:function(e,t){var n="";return n+=`<button onclick="StudentFamilyTable.deleteRow(${t})" type="button" class="btn btn-danger btn-sm m-btn m-btn--icon btn-delete"<span><i class="la la-trash"> </i> </span> Eliminar </span></span></button>`}}]};return{init:function(){r=$("#studentFamily-datatable").mDatatable(o),e=$("#create_student_family").validate({submitHandler:function(){var t=$("input[name=CompleteName]").val(),n=$("input[name=PaternalName]").val(),a=$("input[name=MaternalName]").val(),i=$("input[name=Birthday]").val(),r=$("select[name=RelationshipInt]").val(),o=$("select[name=CivilStatusInt]").val(),l=$("input[name=Certificated]").val(),c=$("select[name=DegreeInstructionInt]").val(),s=$("input[name=Occupation]").val(),u=$("input[name=WorkCenter]").val(),d=$("input[name=Location]").val();StudentFamilyTable.addRow(t,n,a,i,r,o,l,c,s,u,d),$("#model_add_studentfamily").modal("hide"),e.resetForm()}})},addRow:function(e,n,a,i,o,l,c,s,u,d,p){t.push({completename:e,paternalname:n,maternalname:a,birthday:i,relationshipint:o,civilstatusint:l,certificated:c,degreeinstructionint:s,occupation:u,workcenter:d,location:p}),r.originalDataSet=t,r.reload()},removeRow:function(e){t.splice(e,1),r.originalDataSet=t,r.reload()},getCount:function(){return r.getTotalRows()},reload:function(){r.reload()},deleteRow:function(e){!function(e){StudentFamilyTable.removeRow(e)}(e)},getSource:function(){return t}}}();$((function(){wizard_student_information.init(),StudentFamilyTable.init(),$("#IsSick").trigger("change"),$("#ISSickStudent").trigger("change"),$("#Insurance").trigger("change")}));