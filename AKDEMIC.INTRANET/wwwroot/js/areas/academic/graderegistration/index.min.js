var InitApp=function(){var e={reports:{object:null,reload:function(){var e=$("#component_select").select2("data")[0].number;let t=[{data:"course",title:"Curso"},{data:"section",title:"Sección"},{data:"term",title:"Periodo"}];for(let n=0;n<e;n++){var a=`Unidad ${n+1}`;t.push({data:null,title:a,render:function(e){let t=n;var a='<span class="m-badge m-badge--wide m-badge--success"> A tiempo </span>';return console.log(e.units[t]),null==e.units[t]||0==e.units[t].complete?a='<span class="m-badge m-badge--wide m-badge--danger"> Falta </span>':0==e.units[n].waslate&&(a='<span class="m-badge m-badge--wide m-badge--warning"> Tarde </span>'),a}})}this.delete(),this.object=$("#data-table").DataTable({dom:"Bfrtip",buttons:[{text:"<i class='la la-file-excel-o'></i><span>Excel</span>",action:function(){$.fileDownload(`/academico/registro-notas/reporte-excel/{${$("#component_select").val()}}/{${$("#term_select").val()}}/{${$("#faculty_select").val()}}`.proto().parseURL(),{httpMethod:"GET",successCallback:function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")}}).done((function(){})).fail((function(){alert("Falló la descarga del archivo!")})).always((function(){console.log("always")}))}}],ajax:{url:"/academico/registro-notas/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns,e.search=$("#search").val(),e.term=$("#term_select").val(),e.faculty=$("#faculty_select").val(),e.component=$("#component_select").val()}},columns:t})},delete:function(){null!==this.object&&void 0!==this.object&&$.fn.dataTable.isDataTable("#data-table")&&(this.object.clear().destroy(),$("#table-container").html('<table class="table table-striped table-bordered" id="data-table"></table>'))}}},t={faculty:{init:function(){$.ajax({url:"/facultades/v2/get".proto().parseURL()}).done((function(e){$("#faculty_select").select2({data:e.items,minimumResultsForSearch:-1}),t.faculty.events()}))},events:function(){$("#faculty_select").on("change",(function(){$("#faculty_select").val();e.reports.reload()}))}},career:{init:function(){$("#career_select").select2({placeholder:"Seleccione una escuela"}),t.career.events()},load:function(e){$.ajax({url:`/escuelas/${e}/carreras/v2/get`.proto().parseURL()}).done((function(e){$("#career_select").empty(),$("#career_select").select2({placeholder:"Seleccione una carrera",data:e.items,minimumResultsForSearch:-1,disabled:!1})}))},events:function(){$("#career_select").on("change",(function(){e.students.reload()}))}},component:{init:function(){$.ajax({url:"/academico/registro-notas/componentes/get".proto().parseURL()}).done((function(a){$("#component_select").select2({data:a.items,minimumResultsForSearch:-1}),t.component.events(),e.reports.reload()}))},ajax:$.ajax({url:"/academico/registro-notas/componentes/get".proto().parseURL()}),load:function(e){console.log(e),$("#component_select").select2({data:e.items,minimumResultsForSearch:-1}),t.component.events()},events:function(){$("#component_select").on("change",(function(){e.reports.reload()}))}},term:{ajax:$.ajax({url:"/periodos/get".proto().parseURL()}),load:function(e){$("#term_select").select2({data:e.items,minimumResultsForSearch:-1}),t.term.events()},events:function(){$("#term_select").on("change",(function(){e.reports.reload()}))}},init:function(){t.faculty.init(),$.when(t.term.ajax,t.component.ajax).then((function(a,n){t.term.load(a[0]),t.component.load(n[0]),e.reports.reload()}))}};return{init:function(){t.init()}}}();$((function(){InitApp.init()}));