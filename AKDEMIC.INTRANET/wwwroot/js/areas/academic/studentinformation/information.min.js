var InitApp=function(){var e=$("#Id").val(),t={object:$("#modal-student-documents"),events:{click:function(){$(".btn-student-download").on("click",(function(){$(this).addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0);var a="";$(this).hasClass("studentCertificate")&&(a=`/academico/alumnos/informacion/${e}/v2/certificado-estudios`.proto().parseURL()),$(this).hasClass("studentCurriculum")&&(a=`/academico/alumnos/informacion/${e}/plan-estudios`.proto().parseURL()),window.open(a,"_blank"),t.object.modal("toggle"),$(this).removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}},init:function(){this.events.click()}},a={object:$("#modal-documents"),events:{click:function(){$(".btn-download").on("click",(function(){console.log("descarga"),$(this).addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0);var t="";$(this).hasClass("proofOfStudies")&&(t=`/academico/alumnos/informacion/${e}/certificado-estudios`.proto().parseURL()),$(this).hasClass("proofOfIncome")&&(t=`/academico/alumnos/informacion/${e}/constancia-ingreso`.proto().parseURL()),$(this).hasClass("enrollmentRecord")&&(t=`/academico/alumnos/informacion/${e}/constancia-matricula`.proto().parseURL()),$(this).hasClass("recordOfRegularStudies")&&(t=`/academico/alumnos/informacion/${e}/constancia-estudios-regulares`.proto().parseURL()),$(this).hasClass("recordOfEgress")&&(t=`/academico/alumnos/informacion/${e}/constancia-egreso`.proto().parseURL()),$(this).hasClass("meritChart")&&(t=`/academico/alumnos/informacion/${e}/cuadro-meritos`.proto().parseURL()),$(this).hasClass("upperfifth")&&(t=`/academico/alumnos/informacion/${e}/quinto-superior`.proto().parseURL()),$(this).hasClass("bachelorsDegree")&&(t=`/academico/alumnos/informacion/${e}/grado-bachiller`.proto().parseURL()),$(this).hasClass("jobTitle")&&(t=`/academico/alumnos/informacion/${e}/titulo-profesional`.proto().parseURL()),$(this).hasClass("academicRecord")&&(t=`/academico/alumnos/informacion/${e}/record-academico-titulacion`.proto().parseURL()),$(this).hasClass("upperthirth")&&(t=`/academico/alumnos/informacion/${e}/tercio-superior`.proto().parseURL()),$(this).hasClass("academicperformancesummary")&&(t=`/academico/alumnos/informacion/${e}/resumen-rendimeinto`.proto().parseURL()),window.open(t,"_blank"),a.object.modal("toggle"),$(this).removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}},init:function(){this.events.click()}},o={return:{load:function(){$(".m-content").on("click",".index-return",(function(){$("#option-block").removeClass("m--hide"),$("#information-block").addClass("m--hide"),$("#information-block").html(""),n.clear()}))}},options:{load:function(){$(".student-record").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/estudiante/historial`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.studentRecord.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".student-situation").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/estudiante/situacion`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.studentSituation.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".general-data").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/datos-generales`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.information.load(),n.general.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".password").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/cambiar-clave`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.password.load(),n.password.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".user-procedures").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/tramites`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.information.load(),n.procedures.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".enrollment").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/matricula-actual`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.enrollment.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".schedule").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/horario`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.schedule.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".academic-history").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/historial`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.academichistoryv2.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".assistance-history").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/asistencia`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.assistancehistory.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".report-card").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/boleta-notas`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.reportcard.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".curriculum-progress").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.curriculumprogress.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".procedure-request").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/solicitud-tramites`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.procedurerequest.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),$(".observations").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/observaciones`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.observations.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))})),0==$("#IsBachelor").val()&&$("#modal-documents .notBachelor").hide(),t.init(),a.init(),n.procedurerequest.datatablePay.paymentmades.init(),$(".student-portfolio").on("click",(function(){$("#option-block").addClass("m--hide"),$("#information-block").removeClass("m--hide"),mApp.block("#information-block"),$.ajax({url:`/academico/alumnos/informacion/${e}/portafolio`.proto().parseURL()}).done((function(e){$("#information-block").html(e),o.return.load(),n.portfolio.init()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))}))}},information:{load:function(){o.return.load()}},password:{load:function(){o.return.load()}},procedures:{load:function(){o.return.load()}},init:function(){o.options.load()}},n={general:{form:{object:null,init:function(){this.object=$("#edit-form").validate({rules:{PersonalEmail:{email:!0}},messages:{Name:{pattern:"Por favor el apellido solo debe contener letras."},PaternalSurname:{pattern:"Por favor el apellido solo debe contener letras."},MaternalSurname:{pattern:"Por favor el apellido solo debe contener letras."},PhoneNumber:{pattern:"El campo no tiene el formato correcto (Ejemplo: 989419189 o 3255564 )"},Dni:{pattern:"Por favor el Dni solo debe contener números.",maxlength:"Por favor el Dni solo debe 8 contener dígitos.",minlength:"Por favor el Dni debe 8 contener dígitos."}},submitHandler:function(e){var t=new FormData($(e)[0]);mApp.block("#information-block"),$.ajax({url:$(e).attr("action"),type:"POST",data:t,contentType:!1,processData:!1}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#student-picture").attr("src",$("#current-picture").attr("src"));var e=""!==$("#MaternalSurname").val()?$("#PaternalSurname").val()+" "+$("#MaternalSurname").val()+", "+$("#Name"):$("#PaternalSurname").val()+", "+$("#Name");$("#student-picture").text(e),$("#student-code").val($("#UserName").val()),$("#student-career").val($("#SelectedCareer").text()),$("#student-dni").val($("#Dni").val())})).fail((function(e){null!==e.responseText?$("#alert-text").html(e.responseText):$("#alert-text").html(_app.constants.toastr.message.error.task),$("#m-form_alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#information-block")}))}})}},select:{init:function(){this.faculties.init(),this.districts.init(),this.provinces.init(),this.departments.init()},faculties:{init:function(){$.ajax({url:"/facultades/get".proto().parseURL()}).done((function(e){$(".select2-faculties").select2({placeholder:"Facultades",minimumInputLength:-1,data:e.items}).val($("#FacultyIdValue").val()).trigger("change").on("change",(function(){n.general.select.careers.init($(this).val())})),n.general.select.careers.init($("#FacultyIdValue").val())}))}},careers:{init:function(e){$(".select2-careers").prop("disabled",!0),$(".select2-careers").empty(),$.ajax({url:`/carreras/get?fid=${e}`.proto().parseURL()}).done((function(e){if($(".select2-careers").select2({placeholder:"Seleccione una carrera",minimumInputLength:-1,data:e.items}),e.items.length){$(".select2-careers").prop("disabled",!0);var t=$("#CareerId").val();null!==t&&""!==t&&($(".select2-careers").val(t).trigger("change"),$("#CareerId").val(null).trigger("change"))}}))}},departments:{init:function(){$.ajax({url:"/departamentos/get".proto().parseURL()}).done((function(e){$(".select2-departments").select2({placeholder:"Seleccione un departamento",minimumResultsForSearch:-1,data:e.items}),""!=$("#departmentId").val()&&null!=$("#departmentId").val()&&($(".select2-departments").val($("#departmentId").val()).trigger("change"),$.ajax({url:`/departamentos/${$("#departmentId").val()}/provincias/get`.proto().parseURL()}).done((function(e){$(".select2-provinces").empty(),$(".select2-provinces").select2({placeholder:"Provincias",minimumResultsForSearch:-1,data:e.items,disabled:!1}),""!=$("#provinceId").val()&&null!=$("#provinceId").val()&&($(".select2-provinces").val($("#provinceId").val()).trigger("change"),$.ajax({url:`/departamentos/${$("#departmentId").val()}/provincias/${$("#provinceId").val()}/distritos/get`.proto().parseURL()}).done((function(e){$(".select2-districts").empty(),$(".select2-districts").select2({placeholder:"Distritos",minimumResultsForSearch:-1,data:e.items,disabled:!1}),""!=$("#districtId").val()&&null!=$("#districtId").val()&&$(".select2-districts").val($("#districtId").val()).trigger("change")})))}))),$(".select2-departments").on("change",(function(){n.general.select.provinces.load($(this).val())})),$(".select2-provinces").on("change",(function(){n.general.select.districts.load($(this).val())}))}))}},provinces:{init:function(){$(".select2-provinces").select2({placeholder:"Seleccione un departamento",disabled:!0})},load:function(e){$.ajax({url:`/departamentos/${e}/provincias/get`.proto().parseURL()}).done((function(e){$(".select2-provinces").empty(),$(".select2-provinces").select2({placeholder:"Provincias",minimumResultsForSearch:-1,data:e.items,disabled:!1}).trigger("change")}))}},districts:{init:function(){$(".select2-districts").select2({placeholder:"Seleccione una provincia",disabled:!0})},load:function(e){var t=$("#department-select").val();$.ajax({url:`/departamentos/${t}/provincias/${e}/distritos/get`.proto().parseURL()}).done((function(e){$(".select2-districts").empty(),$(".select2-districts").select2({placeholder:"Distritos",minimumResultsForSearch:-1,data:e.items,disabled:!1})}))}}},fileInput:{init:function(){this.picture.init()},picture:{init:function(){$("#Picture").on("change",(function(e){var t=(e.target||window.event.srcElement).files;if(FileReader&&t&&t.length){var a=new FileReader;a.onload=function(){$("#current-picture").attr("src",a.result)},a.readAsDataURL(t[0])}else console.log("File Reader not supported.")}))}}},datepicker:{init:function(){$("#BirthDate").datepicker("setEndDate",moment().format(_app.constants.formats.datepickerJsMoment))}},init:function(){this.select.init(),this.form.init(),this.fileInput.init(),this.datepicker.init()}},password:{form:{object:null,init:function(){n.password.form.object=$("#password-form").validate({rules:{ConfirmPassword:{equalTo:"#Password"}},submitHandler:function(e,t){t.preventDefault(),mApp.block("#information-block"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#information-block")}))}})}},init:function(){n.password.form.init()}},procedures:{datatable:{procedures:{object:null,options:getSimpleDataTableConfiguration({url:`/academico/alumnos/informacion/${e}/tramites/get`.proto().parseURL(),data:function(e){e.search=$("#search").val()},pageLength:50,orderable:[],columns:[{data:"code"},{data:"description"},{data:"date"},{data:"term"},{data:"status"},{data:"dependency"}]}),init:function(){n.procedures.datatable.procedures.object=$("#procedures_table").DataTable(n.procedures.datatable.procedures.options),$("#search").doneTyping((function(){n.procedures.datatable.procedures.object.draw()}))},load:function(){n.procedures.datatable.procedures.object.draw()}}},init:function(){n.procedures.datatable.procedures.init()}},enrollment:{datatable:{courses:{object:null,options:getSimpleDataTableConfiguration({url:`/academico/alumnos/informacion/${e}/matriculas/get`.proto().parseURL(),data:function(e){e.termId=$("#terms_select2_enrollment").val()},pageLength:50,orderable:[],columns:[{data:"code"},{data:"course"},{data:"section"},{data:"credits"},{data:"try"},{data:null,render:function(e){var t="-";return e.isActiveTerm&&"RET"!=e.try&&(t=`<button data-object="${e.proto().encode()}" class="btn btn-info btn-sm m-btn m-btn--icon m-btn--icon-only btn-change"><i class="la la-eye"></i></button>`),t}}]}),init:function(){n.enrollment.datatable.courses.object=$("#enrollment_table").DataTable(n.enrollment.datatable.courses.options),$("#enrollment_table").on("click",".btn-change",(function(e){var t=$(this).data("object");t=t.proto().decode(),$("#enrollment-section-modal").modal("toggle"),$("#currentId").val(t.id),$("#currentSection").val(t.section),console.log(t.id),n.enrollment.select.section.load(t.id)}))},reload:function(){n.enrollment.datatable.courses.object.ajax.reload(),$("#enrollment_table_processing").css("z-index",1)}},otherCourses:{object:null,options:getSimpleDataTableConfiguration({url:`/academico/alumnos/informacion/${e}/matriculas/otros-cursos/get`.proto().parseURL(),data:function(e){e.termId=$("#terms_select2_enrollment").val()},pageLength:50,orderable:[],columns:[{data:"type"},{data:"code"},{data:"course"},{data:"credits"},{data:"note"}]}),reload:function(){n.enrollment.datatable.otherCourses.object.ajax.reload(),$("#other_enrollment_table_processing").css("z-index",1)},init:function(){n.enrollment.datatable.otherCourses.object=$("#other_enrollment_table").DataTable(n.enrollment.datatable.otherCourses.options)}}},select:{section:{init:function(){$("#newSectionId").select2({placeholder:"Seleccione una sección"})},load:function(e){$.ajax({url:`/academico/alumnos/informacion/matricula-actual/${e}/secciones-disponibles`.proto().parseURL()}).done((function(e){$("#newSectionId").empty(),$("#newSectionId").select2({placeholder:"Seleccione una sección",data:e.items,minimumResultsForSearch:-1})}))}},terms:{load:function(){$.ajax({url:"/periodos-por-estudiante/get?studentId="+e,type:"GET"}).done((function(e){$("#terms_select2_enrollment").select2({data:e.items}),$("#enrollment_terms_information").html("Periodos matriculados: "+e.items.length),n.enrollment.datatable.courses.init(),n.enrollment.datatable.otherCourses.init()}))},events:{onChange:function(){$("#terms_select2_enrollment").on("change",(function(){n.enrollment.datatable.courses.reload(),n.enrollment.datatable.otherCourses.reload()}))},init:function(){this.onChange()}},init:function(){this.load(),this.events.init()}},init:function(){select.section.init(),select.terms.init()}},form:{section:{object:null,clear:function(){this.object.resetForm(),$("#enrollment-section-form").find(".custom-file-label").text("Buscar archivo..")},init:function(){this.object=$("#enrollment-section-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#enrollment-section-form");var a=new FormData($(e)[0]);$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.enrollment.form.section.clear(),n.enrollment.datatable.courses.reload()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#enrollment-section-modal-text").html(e.responseText):$("#enrollment-section-modal-text").html(_app.constants.ajax.message.error),$("#enrollment-section-modal-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#enrollment-section-form")}))}}),$("#sectionFile").on("change",(function(e){$(this).valid(),$(this).next(".custom-file-label").html(e.target.files[0].name)}))}}},init:function(){n.enrollment.select.section.init(),n.enrollment.select.terms.init(),n.enrollment.form.section.init(),$(".btn-enrollment-report").on("click",(function(){var t=`/academico/alumnos/informacion/${e}/matriculas/reporte/${$("#terms_select2_enrollment").val()}`.proto().parseURL();window.open(t,"_blank")})),$(".btn-enrollment-report-pronabec").on("click",(function(){var t=`/academico/alumnos/informacion/${e}/matriculas/reporte/${$("#terms_select2_enrollment").val()}?pronabec=true`.proto().parseURL();window.open(t,"_blank")}))}},schedule:{fullcalendar:{object:null,settings:{allDaySlot:!1,aspectRatio:2,businessHours:{dow:[1,2,3,4,5,6],end:"24:00",start:"07:00"},columnFormat:"dddd",defaultView:"agendaWeek",editable:!1,eventRender:function(e,t){t.hasClass("fc-day-grid-event")?(t.data("content",e.description),t.data("placement","top"),mApp.initPopover(t)):t.hasClass("fc-time-grid-event")?t.find(".fc-title").append('<div class="fc-description">'+e.description+"</div>"):0!==t.find(".fc-list-item-title").length&&t.find(".fc-list-item-title").append('<div class="fc-description">'+e.description+"</div>");var a=t.find(".fc-title").clone().children().remove().end().text();t.css("border-color","#"+a.proto().toRGB()).css("border-width","2px")},events:{className:"m-fc-event--primary",error:function(){toastr.error("Ocurrió un problema con el servidor","Error")},url:`/academico/alumnos/informacion/${e}/horario/get`.proto().parseURL()},firstDay:1,header:!1,height:730,locale:"es",maxTime:"24:00:00",minTime:"06:00:00",monthNames:monthNames,dayNames:dayNames,monthNamesShort:monthNamesShort,dayNamesShort:dayNamesShort,slotDuration:"00:30:00",timeFormat:"h(:mm)A"},settings2:{allDaySlot:!1,aspectRatio:2,businessHours:{dow:[1,2,3,4,5,6],end:"24:00",start:"07:00"},columnFormat:"dddd",defaultView:"agendaDay",editable:!1,eventRender:function(e,t){t.hasClass("fc-day-grid-event")?(t.data("content",e.description),t.data("placement","top"),mApp.initPopover(t)):t.hasClass("fc-time-grid-event")?t.find(".fc-title").append('<div class="fc-description">'+e.description+"</div>"):0!==t.find(".fc-list-item-title").length&&t.find(".fc-list-item-title").append('<div class="fc-description">'+e.description+"</div>");var a=t.find(".fc-title").clone().children().remove().end().text();t.css("border-color","#"+a.proto().toRGB()).css("border-width","2px")},events:{className:"m-fc-event--primary",error:function(){toastr.error("Ocurrió un problema con el servidor","Error")},url:`/academico/alumnos/informacion/${e}/horario/get`.proto().parseURL()},firstDay:1,header:{},height:730,locale:"es",maxTime:"24:00:00",minTime:"06:00:00",monthNames:monthNames,dayNames:dayNames,monthNamesShort:monthNamesShort,dayNamesShort:dayNamesShort,slotDuration:"00:30:00",timeFormat:"h(:mm)A"},init:function(){$(window).width()<960&&(n.schedule.fullcalendar.object=$("#schedule-calendar").fullCalendar(n.schedule.fullcalendar.settings2)),$(window).width()>960&&(n.schedule.fullcalendar.object=$("#schedule-calendar").fullCalendar(n.schedule.fullcalendar.settings))}},init:function(){n.schedule.fullcalendar.init(),$("#btnDownloadStudentSchedulePdf").on("click",(function(){var t=$(this);console.log("click"),t.addLoader(),$.fileDownload(`/academico/alumnos/informacion/${e}/horario/reporte-pdf`.proto().parseURL(),{httpMethod:"GET"}).done((function(){t.removeLoader(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){t.removeLoader(),null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}))}},academichistoryv1:{ajax:function(){mApp.block("#courses-block");var t=$("#select-term").val();$.ajax({type:"GET",url:`/academico/alumnos/informacion/${e}/historial/${t}/notas`.proto().parseURL()}).done((function(e){$("#enrolled-courses-container").html(e),$("[data-toggle='m-tooltip']").tooltip(),$("[rel='m-tooltip']").tooltip(),$("#lblAcademicYear").text($("#summaryAcademicYear").val()),$("#lblSectionCount").text($("#summarySectionCount").val()),$("#lblCreditSum").text($("#summaryCreditSum").val())})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#courses-block")}))},init:function(){$("#select-term").on("change",(function(e){$("#lblAcademicYear").text("-"),$("#lblSectionCount").text("-"),$("#lblCreditSum").text("-"),n.academichistoryv1.ajax()})),$("#select-term").val()&&n.academichistoryv1.ajax()}},academichistoryv2:{datatable:{courses:{object:null,options:{responsive:!0,processing:!0,serverSide:!0,filter:!1,lengthChange:!1,paging:!0,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},pageLength:50,ajax:{url:`/academico/alumnos/informacion/${e}/historial/cursos`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns}},orderable:[],columns:[{data:"year"},{data:null,render:function(e){return`${e.curriculum} - ${e.code}`}},{data:"course"},{data:"credits"},{data:null,render:function(e){return e.validated?e.grade<=0?`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> CE </span></a>`:`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> ${e.grade} </span></a>`:1==e.withdrawn?'<span style="color: red;">RET</span>':0===e.tries?" - ":e.grade<11?`<span style="color: red;">${e.grade}</span>`:e.grade}},{data:null,render:function(e){return 0===e.tries?" - ":e.term}},{data:"status"}]},init:function(){n.academichistoryv2.datatable.courses.object=$("#academichistoryv2_table").DataTable(n.academichistoryv2.datatable.courses.options)}}},init:function(){n.academichistoryv2.datatable.courses.init()},clear:function(){n.academichistoryv2.datatable.courses.object=null}},assistancehistory:{datatable:{courses:{object:null,options:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:null,type:"GET",dataType:"JSON",data:function(e){delete e.columns}},orderable:[],columns:[{data:"course"},{data:"total"},{data:"dictated"},{data:"assisted"},{data:"absences"},{data:null,render:function(e){return`<div class="table-options-section">\n                                    <button data-id="${e.id}" class="btn btn-info btn-sm m-btn m-btn--icon m-btn--icon-only btn-course-detail" title=""><i class="la la-eye"></i></button>\n                                    </div>`}}],dom:"Bfrtip",buttons:["csv","excel","pdf"]},load:function(){var t=$("#select-term").val(),a=`/academico/alumnos/informacion/${e}/asistencia/${t}/cursos`.proto().parseURL();void 0!==n.assistancehistory.datatable.courses.object&&null!==n.assistancehistory.datatable.courses.object?n.assistancehistory.datatable.courses.object.ajax.url(a).load():(n.assistancehistory.datatable.courses.options.ajax.url=a,n.assistancehistory.datatable.courses.object=$("#course_assistance_table").DataTable(n.assistancehistory.datatable.courses.options))},init:function(){var t=$("#select-term").val(),a=`/academico/alumnos/informacion/${e}/asistencia/${t}/cursos`.proto().parseURL();n.assistancehistory.datatable.courses.options.ajax.url=a,n.assistancehistory.datatable.courses.object=$("#course_assistance_table").DataTable(n.assistancehistory.datatable.courses.options)}},assistance:{object:null,options:getSimpleDataTableConfiguration({url:null,pageLength:50,orderable:[],columns:[{data:"week"},{data:"sessionNumber"},{data:"date"},{data:"weekDay"},{data:"isAbsent",render:function(e){return e?'<span class="m--font-danger">Falta</span>':'<span class="m--font-primary">Asistió</span>'}}]}),load:function(t){$("#assistance_table_block").removeClass("m--hide");var a=`/academico/alumnos/informacion/${e}/asistencia/${t}/detalle`.proto().parseURL();void 0!==n.assistancehistory.datatable.assistance.object&&null!==n.assistancehistory.datatable.assistance.object?n.assistancehistory.datatable.assistance.object.ajax.url(a).load():(n.assistancehistory.datatable.assistance.options.ajax.url=a,n.assistancehistory.datatable.assistance.object=$("#assistance_table").DataTable(n.assistancehistory.datatable.assistance.options))}}},init:function(){$("#select-term").val()&&(n.assistancehistory.datatable.courses.load(),$("#select-term").on("change",(function(){n.assistancehistory.datatable.courses.load(),$("#assistance_table_block").addClass("m--hide")})),$("#course_assistance_table").on("click",".btn-course-detail",(function(){var e=$(this).data("id");n.assistancehistory.datatable.assistance.load(e)})))},clear:function(){n.assistancehistory.datatable.assistance.object=null,n.assistancehistory.datatable.courses.object=null}},reportcard:{datatable:{courses:{object:null,options:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:null,type:"GET",dataType:"JSON"},orderable:[],columns:[{data:"curriculum"},{data:"year"},{data:"code"},{data:"course"},{data:"section"},{data:"credits"},{data:"theoreticalHours"},{data:"practicalHours"},{data:null,render:function(e){return 3==e.status?"RET":0==e.status?"-":e.grade}},{data:"teacher"}]},load:function(){var t=$("#select-term").val(),a=`/academico/alumnos/informacion/${e}/boleta-notas/${t}/cursos`.proto().parseURL();void 0!==n.reportcard.datatable.courses.object&&null!==n.reportcard.datatable.courses.object?n.reportcard.datatable.courses.object.ajax.url(a).load():(n.reportcard.datatable.courses.options.ajax.url=a,n.reportcard.datatable.courses.object=$("#card_table").DataTable(n.reportcard.datatable.courses.options))},init:function(){var t=$("#select-term").val(),a=`/academico/alumnos/informacion/${e}/boleta-notas/${t}/cursos`.proto().parseURL();n.reportcard.datatable.courses.options.ajax.url=a,n.reportcard.datatable.courses.object=$("#card_table").DataTable(n.reportcard.datatable.courses.options)}}},init:function(){$("#select-term").val()&&(n.reportcard.datatable.courses.load(),$("#reportcard-link").prop("href",`/academico/constancias/notas/${e}/${$("#select-term").val()}`.proto().parseURL()),$.ajax({url:`/academico/alumnos/informacion/${e}/boleta-notas/${$("#select-term").val()}/cabecera`.proto().parseURL()}).done((function(e){$("#header-student-name").text(e.name),$("#header-cycle").text(e.cycle),$("#header-credits").text(e.credits),$("#header-courses").text(e.courses)}))),$("#select-term").on("change",(function(){n.reportcard.datatable.courses.load(),$("#reportcard-link").prop("href",`/academico/constancias/notas/${e}/${$("#select-term").val()}`.proto().parseURL()),$.ajax({url:`/academico/alumnos/informacion/${e}/boleta-notas/${$("#select-term").val()}/cabecera`.proto().parseURL()}).done((function(e){$("#header-student-name").text(e.name),$("#header-cycle").text(e.cycle),$("#header-credits").text(e.credits),$("#header-courses").text(e.courses)}))}))},clear:function(){n.reportcard.datatable.courses.object=null}},curriculumprogress:{datatable:{courses:{object:null,optionsWithoutER:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/academico/alumnos/informacion/${e}/situacion-academica/cursos`.proto().parseURL(),type:"GET",dataType:"JSON"},orderable:[],columns:[{data:"year"},{data:"code"},{data:"course"},{data:"credits"},{data:null,render:function(e){return 0===e.tries?" - ":e.tries}},{data:null,render:function(e){return e.validated?e.grade<=0?`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> CE </span></a>`:`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> ${e.grade} </span></a>`:0===e.tries?" - ":e.grade<11?`<span style="color: red;">${e.grade}</span>`:e.grade}},{data:null,render:function(e){return 0===e.tries?" - ":e.term}}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(t,a,o,n){var r=`/academico/alumnos/informacion/${e}/situacion-academica/reporte-excel`;window.open(r,"_blank")}}]},options:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/academico/alumnos/informacion/${e}/situacion-academica/cursos`.proto().parseURL(),type:"GET",dataType:"JSON"},orderable:[],columns:[{data:"year"},{data:"code"},{data:"course"},{data:"credits"},{data:null,render:function(e){return 0===e.tries?" - ":e.tries}},{data:null,render:function(e){return e.validated?e.grade<=0?`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> CE </span></a>`:`<a href="#" data-id="${e.id}" class="show-equiv"><span class="m--font-info"> ${e.grade} </span></a>`:0===e.tries?" - ":e.grade<11?`<span style="color: red;">${e.grade}</span>`:e.grade}},{data:null,render:function(e){return 0===e.tries?" - ":e.term}},{data:null,render:function(e){return""==e.evaluationReport||null==e.evaluationReport?"-":e.evaluationReport}},{data:null,render:function(e){return""==e.evaluationReportDate||null==e.evaluationReportDate?"-":e.evaluationReportDate}},{data:null,render:function(e){var t="";return"1"!=$("#isCareerDirector").val()&&(e.academicHistoryId!=_app.constants.guid.empty?t+=`<button data-course='${e.code}-${e.course}' data-id='${e.academicHistoryId}' class="btn btn-edit-evaluation-report btn-primary m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-edit"></i></button>`:t+="-"),t}}],rowGroup:{dataSrc:"yearName"},columnDefs:[{visible:!1,targets:0}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(t,a,o,n){var r=`/academico/alumnos/informacion/${e}/situacion-academica/reporte-excel`;window.open(r,"_blank")}}]},init:function(){var t=$("#ahWthEvaluationReport").val();n.curriculumprogress.datatable.courses.object="true"==t?$("#curriculum_table").DataTable(n.curriculumprogress.datatable.courses.options):$("#curriculum_table").DataTable(n.curriculumprogress.datatable.courses.optionsWithoutER),$("#curriculum_table").on("click",".show-equiv",(function(){var t=$(this).data("id");$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/equivalencia`.proto().parseURL(),type:"GET",data:{course:t},success:function(e){$("#equivalence-data").html(e),$("#equivalence-modal").modal("show")},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}})})),$("#curriculum_table").on("click",".btn-edit-evaluation-report",(function(){var e=$(this).data("id"),t=$(this).data("course");n.curriculumprogress.modal.evaluationReport.events.show(e,t)}))}},elective:{object:null,optionsWithoutER:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/academico/alumnos/informacion/${e}/situacion-academica/electivos`.proto().parseURL(),type:"GET",dataType:"JSON"},orderable:[],columns:[{data:"year"},{data:"code"},{data:"course"},{data:"credits"},{data:null,render:function(e){return 0===e.tries?" - ":e.tries}},{data:null,render:function(e){return 0===e.tries?" - ":e.grade<11?`<span style="color: red;">${e.grade}</span>`:e.grade}},{data:null,render:function(e){return 0===e.tries?" - ":e.term}}]},options:{responsive:!0,processing:!0,serverSide:!1,filter:!1,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],language:{processing:"<div class='overlay custom-loader-background'><i class='fa fa-cog fa-spin custom-loader-color'></i></div>",lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/academico/alumnos/informacion/${e}/situacion-academica/electivos`.proto().parseURL(),type:"GET",dataType:"JSON"},orderable:[],columns:[{data:"year"},{data:"code"},{data:"course"},{data:"credits"},{data:null,render:function(e){return 0===e.tries?" - ":e.tries}},{data:null,render:function(e){return 0===e.tries?" - ":e.grade<11?`<span style="color: red;">${e.grade}</span>`:e.grade}},{data:null,render:function(e){return 0===e.tries?" - ":e.term}},{data:null,render:function(e){return""==e.evaluationReport||null==e.evaluationReport?"-":e.evaluationReport}},{data:null,render:function(e){return""==e.evaluationReportDate||null==e.evaluationReportDate?"-":e.evaluationReportDate}},{data:null,render:function(e){var t="";return"1"!=$("#isCareerDirector").val()&&(e.academicHistoryId!=_app.constants.guid.empty?t+=`<button data-course='${e.code}-${e.course}' data-id='${e.academicHistoryId}' class="btn btn-edit-evaluation-report btn-primary m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-edit"></i></button>`:t+="-"),t}}]},init:function(){var e=$("#ahWthEvaluationReport").val();n.curriculumprogress.datatable.elective.object="true"==e?$("#elective_table").DataTable(n.curriculumprogress.datatable.elective.options):$("#elective_table").DataTable(n.curriculumprogress.datatable.elective.optionsWithoutER),$("#elective_table").on("click",".btn-edit-evaluation-report",(function(){var e=$(this).data("id"),t=$(this).data("course");n.curriculumprogress.modal.evaluationReport.events.show(e,t)}))}}},select:{term:{load:function(){$.ajax({url:"/periodos/get",type:"GET"}).done((function(e){$("[name='TermId']").select2({data:e.items,dropdownParent:$("#evaluation_report_modal")})}))},init:function(){this.load()}},init:function(){this.term.init()}},init:function(){$("#uploaddigital").on("click",(function(){var t=$("#uploaddigital_div_dowload_document");$(".cp-document-file-label").html("Seleccione un archivo"),$("#uploaddigital-modal").modal("show"),t.addClass("d-none"),$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/archivo-alumno`,type:"GET"}).done((function(a){if(null!=a){var o=t.find("a"),n=`/academico/alumnos/informacion/${e}/situacion-academica/archivo-alumno/descargar`;t.removeClass("d-none"),o.attr("href",n)}})).always((function(){}))})),$("#btn_curriculum_progress_pdf").on("click",(function(){var e=$(this),t=e.data("id");e.addLoader(),$.ajax({url:`/academico/alumnos/informacion/${t}/situacion-academica/validar-reporte-pdf`,type:"GET"}).done((function(){var e=`/academico/alumnos/informacion/${t}/situacion-academica/reporte-pdf`;window.open(e,"_blank")})).fail((function(e){swal({type:"info",title:"Información",allowOutsideClick:!1,text:e.responseText,confirmButtonText:"Aceptar"}).then((function(e){e.value&&$("#academic_history_data_admission_modal").modal("show")}))})).always((function(){e.removeLoader()}))})),$("#academic_history_data_admission_modal").on("show.bs.modal",(function(t){$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/data-admision/get`,type:"GET"}).done((function(e){var t=$("#academic_history_data_admission_form");t.find("[name='Score']").attr("disabled",!1),t.find("[name='PossibleScore']").attr("disabled",!1),t.find("[name='Order']").attr("disabled",!1),t.find("[name='TotalStudents']").attr("disabled",!1),t.find("[name='RegistrationNumber']").attr("disabled",!1),null!=e&&(t.find("[name='Score']").val(e.score),t.find("[name='PossibleScore']").val(e.possibleScore),t.find("[name='Order']").val(e.order),t.find("[name='TotalStudents']").val(e.totalStudents),t.find("[name='RegistrationNumber']").val(e.registrationNumber))}))})),$("#academic_history_data_admission_modal").on("hidden.bs.modal",(function(e){n.curriculumprogress.form.academicHistoryAdmissionData.object.resetForm()})),$(".cp-document-file").on("change",(function(){$(this).valid();var e=$(this).val();$(this).next().html(e)})),n.curriculumprogress.datatable.courses.init(),n.curriculumprogress.datatable.elective.init(),n.curriculumprogress.form.academicHistoryDocument.init(),n.curriculumprogress.form.academicHistoryAdmissionData.init(),n.curriculumprogress.modal.init(),n.curriculumprogress.select.init()},form:{academicHistoryDocument:{object:null,clear:function(){$(".cp-document-file-label").html("Seleccione un archivo"),this.object.resetForm()},init:function(){this.object=$("#uploaddigital-form").validate({submitHandler:function(t,a){a.preventDefault();var o=new FormData($(t).get(0));mApp.block("#uploaddigital-form"),$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/archivo-alumno`,type:"GET"}).done((function(t){null==t?$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/adjuntar-archivo`,type:"POST",data:o,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.curriculumprogress.form.academicHistoryDocument.clear(),$("#hasFile").val(!0)})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#uploaddigital_form_msg_txt").html(e.responseText):$("#uploaddigital_form_msg_txt").html(_app.constants.ajax.message.error),$("#uploaddigital_form_msg").removeClass("m--hide").show()})).always((function(){mApp.unblock("#uploaddigital-form")})):swal({type:"warning",title:"Actualmente existe un archivo.",text:"¿Desea actualizarlo?.",confirmButtonText:"Aceptar",showCancelButton:!0,showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/adjuntar-archivo`,type:"POST",data:o,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),n.curriculumprogress.form.academicHistoryDocument.clear(),swal({type:"success",title:"Completado",text:"Archivo actualizado satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#uploaddigital_form_msg_txt").html(e.responseText):$("#uploaddigital_form_msg_txt").html(_app.constants.ajax.message.error),$("#uploaddigital_form_msg").removeClass("m--hide").show()})).always((function(){mApp.unblock("#uploaddigital-form")}))}))}).then((function(e){e.dismiss&&mApp.unblock("#uploaddigital-form")}))}))}})}},academicHistoryAdmissionData:{object:null,clear:function(){this.object.resetForm();var e=$("#academic_history_data_admission_form");e.find("[name='Score']").attr("disabled",!0),e.find("[name='PossibleScore']").attr("disabled",!0),e.find("[name='Order']").attr("disabled",!0),e.find("[name='TotalStudents']").attr("disabled",!0),e.find("[name='RegistrationNumber']").attr("disabled",!0)},init:function(){this.object=$("#academic_history_data_admission_form").validate({submitHandler:function(t,a){a.preventDefault(),$("#academic_history_data_admission_form").find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0);var o=new FormData($(t).get(0));$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/data-admision`,type:"post",data:o,contentType:!1,processData:!1}).done((function(e){$("#academic_history_data_admission_modal").modal("hide"),swal({type:"success",title:"Completado",text:"Datos actualizados satisfactoriamente.",confirmButtonText:"Aceptar"}),n.curriculumprogress.form.academicHistoryAdmissionData.clear()})).fail((function(e){swal({type:"error",title:"Error",text:e.responseText,confirmButtonText:"Aceptar"})})).always((function(){$("#academic_history_data_admission_form").find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}})}}},modal:{evaluationReport:{form:{object:null,validate:function(){this.object=$("#evaluation_report_form").validate({submitHandler:function(t,a){var o=new FormData(t);$("#evaluation_report_modal").find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/actualizar-acta`,type:"POST",data:o,contentType:!1,processData:!1}).done((function(e){n.curriculumprogress.datatable.courses.object.ajax.reload(),$("#evaluation_report_modal").modal("hide"),swal({type:"success",title:"Completado",text:"El registro ha sido actualizar satisfactoriamente.",confirmButtonText:"Aceptar"})})).fail((function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===e.status?"No hay respuesta del servidor":e.responseText})})).always((function(){$("#evaluation_report_modal").find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}})},init:function(){this.validate()}},events:{show:function(t,a){var o=$("#evaluation_report_modal");o.find(".modal-title").text(a),o.modal("show"),$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/get-detalles-acta?academicHistoryId=${t}`,type:"GET"}).done((function(e){o.find("[name='AcademicHistoryId']").val(t),o.find("[name='EvaluationReportId']").val(e.evaluationReportId),o.find("[name='EvaluationReportCode']").val(e.evaluationReportCode),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").datepicker("destroy"),o.find("[name='EvaluationReportReceptionDate']").val(e.receptionDate),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").datepicker({orientation:"bottom"}),null!==e.evaluationReportCode&&""!==e.evaluationReportCode?o.find("[name='EvaluationReportReceptionDate']").attr("disabled",!1):o.find("[name='EvaluationReportReceptionDate']").attr("disabled",!0),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").datepicker("destroy"),o.find("[name='EvaluationReportCreatedAt']").val(e.receptionDate),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").datepicker({orientation:"bottom"}),null!==e.evaluationReportCode&&""!==e.evaluationReportCode?o.find("[name='EvaluationReportCreatedAt']").attr("disabled",!1):o.find("[name='EvaluationReportCreatedAt']").attr("disabled",!0),o.find("[name='EvaluationReportLastGradePublished']").val(e.lastGradePublished),$("#evaluation_report_modal").find("[name='EvaluationReportLastGradePublished']").datetimepicker({format:"dd/mm/yyyy HH:ii P",showMeridian:!0,autoclose:!0}),null!==e.evaluationReportCode&&""!==e.evaluationReportCode?o.find("[name='EvaluationReportLastGradePublished']").attr("disabled",!1):o.find("[name='EvaluationReportLastGradePublished']").attr("disabled",!0),o.find("[name='TermId']").val(e.termId).trigger("change"),o.find("[name='Observation']").val(e.observation)}))},onValidateCode:function(){$("#evaluation_report_modal").on("click",".validate_evaluationrepot",(function(){if(""!==o&&null!==o){var t=$(this);t.addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0);var a=$("#evaluation_report_modal").find("[name='TermId']").val(),o=$("#evaluation_report_modal").find("[name='EvaluationReportCode']").val();$.ajax({url:`/academico/alumnos/informacion/${e}/situacion-academica/validar-acta?termId=${a}&code=${o}`,type:"GET"}).done((function(e){$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").datepicker("destroy"),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").val(e.receptionDate),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").attr("disabled",!1),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").datepicker({orientation:"bottom"}),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").datepicker("destroy"),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").val(e.cretedAt),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").attr("disabled",!1),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").datepicker({orientation:"bottom"}),$("#evaluation_report_modal").find("[name='EvaluationReportLastGradePublished']").val(e.lastGradePublishedDate),$("#evaluation_report_modal").find("[name='EvaluationReportLastGradePublished']").attr("disabled",!1)})).fail((function(e){$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").val(""),$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").attr("disabled",!0),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").val(""),$("#evaluation_report_modal").find("[name='EvaluationReportCreatedAt']").attr("disabled",!0),$("#evaluation_report_modal").find("[name='EvaluationReportLastGradePublished']").val(""),$("#evaluation_report_modal").find("[name='EvaluationReportLastGradePublished']").attr("disabled",!0),toastr.error(e.responseText,"Error")})).always((function(){t.removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}else toastr.error("Es necesario ingresar el código.","Error")}))},onHidden:function(){$("#evaluation_report_modal").on("hidden.bs.modal",(function(e){var t=$("#evaluation_report_modal");t.find("[name='AcademicHistoryId']").val(""),t.find("[name='EvaluationReportId']").val(""),t.find("[name='EvaluationReportCode']").val(""),t.find("[name='TermId']").val(null).trigger("change"),t.find("[name='Observation']").val(""),t.find("[name='File']").val(""),t.find(".custom-file-label").text("Seleccione un archivo")}))},init:function(){this.onHidden(),this.onValidateCode()}},datepicker:{init:function(){$("#evaluation_report_modal").find("[name='EvaluationReportReceptionDate']").datepicker({orientation:"bottom"})}}},init:function(){this.evaluationReport.events.init(),this.evaluationReport.form.init(),this.evaluationReport.datepicker.init()}},clear:function(){n.curriculumprogress.datatable.courses.object=null,n.curriculumprogress.datatable.elective.object=null}},procedurerequest:{events:{init:function(){$(".academicyearwithdrawal-request").on("click",(function(){setTimeout((function(){$("#withdrawal-file").on("change",(function(e){$(".custom-file-label").html(e.target.files[0].name)}))}),1e3),swal({title:"¿Desea retirar al estudiante del ciclo?",type:"warning",showCancelButton:!0,confirmButtonText:"Si, retirar",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar",html:'Se retirará al estudiante de todas sus asignaturas. Este proceso es irreversible.</br>\n                                        <div class="form-group m-form__group col-xl-12">                     \n                                            <div class="custom-file">\n                                                <input id="withdrawal-file" type="file" class="custom-file-input" lang="es"/>\n                                                <label class="custom-file-label" for="withdrawal-file">\n                                                    Seleccione un archivo\n                                                </label>\n                                            </div>                                              \n                                        </div>'}).then((function(e){if(e.value){var t=new FormData;t.append("file",$("#withdrawal-file")[0].files[0]),$.ajax({url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/retiro-ciclo`.proto().parseURL(),type:"POST",processData:!1,contentType:!1,data:t}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}))})),$(".expelled-request").on("click",(function(){setTimeout((function(){$("#File").on("change",(function(e){$(".custom-file-label").html(e.target.files[0].name)}))}),1e3),swal({title:"¿Expulsar al estudiante?",type:"warning",showCancelButton:!0,confirmButtonText:"Si, expulsarlo",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar",html:'El estudiante será expulsado, removiendolo de todas sus secciones matriculadas. Este proceso es irreversible.</br>\n                                       <div class="form-group m-form__group col-xl-12">\n                                            <div class="m-input  m-input--solid">\n                                                <label for="Reason"></label>\n                                                <input type="text" placeholder="Motivo" class="form-control m-input" name="Reason" id="Reason" required>\n                                            </div>\n                                        </div>\n                                        <div class="form-group m-form__group col-xl-12">\n                                            <label asp-for="File"></label>\n                                            <div class="custom-file">\n                                                <input name="File" id="File" type="file" class="custom-file-input" lang="es"/>\n                                                <label class="custom-file-label" for="File">\n                                                    Seleccione un archivo\n                                                </label>\n                                            </div>                                              \n                                        </div>',preConfirm:()=>{var e=!0;if($.each({Reason:"Introduzca un motivo de expulsión",File:"Introduzca un archivo"},(function(t,a){""==$('input[name="Reason"]').val()||0===$("#File")[0].files.length?($('input[name="'+t+'"]').hasClass("invalid")||($('input[name="'+t+'"]').addClass("invalid").after('<div class="invalid-feedback">'+a+"</div>"),"File"==t&&$(".custom-file").addClass("invalid")),e=!1):($("input.invalid").removeClass("invalid"),$(".invalid-feedback").remove(),"File"==t&&$(".custom-file").removeClass("invalid"))})),!e)return!1}}).then((e=>{if(e.value){var t=new FormData;t.append("File.File",$("#File")[0].files[0]),t.append("Reason",$('input[name="Reason"]').val()),$.ajax({url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/expulsar-alumno`.proto().parseURL(),type:"POST",processData:!1,contentType:!1,data:t}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}))})),$(".resign-request").on("click",(function(){setTimeout((function(){$("#resign-file").on("change",(function(e){console.log("cambio"),$(".custom-file-label").html(e.target.files[0].name)}))}),1e3),swal({title:"Renunciar como estudiante",type:"warning",showCancelButton:!0,confirmButtonText:"Si, retirarlo",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar",html:'El estudiante renunciará a la institución, removiendolo de todas sus secciones matriculadas. Este proceso es irreversible.</br>\n                                       <div class="form-group m-form__group col-xl-12">\n                                            <div class="m-input  m-input--solid">\n                                                <label for="Reason"></label>\n                                                <input type="text" placeholder="Motivo" class="form-control m-input" name="ResignReason" id="resign-reason" required>\n                                            </div>\n                                        </div>\n                                        <div class="form-group m-form__group col-xl-12">\n                                            <label asp-for="File"></label>\n                                            <div class="custom-file">\n                                                <input name="ResignFile" id="resign-file" type="file" class="custom-file-input" lang="es"/>\n                                                <label class="custom-file-label" for="File">\n                                                    Seleccione un archivo\n                                                </label>\n                                            </div>                                              \n                                        </div>',preConfirm:()=>{var e=!0;if($.each({ResignReason:"Introduzca un motivo de expulsión",ResignFile:"Introduzca un archivo"},(function(t,a){"ResignFile"==t?0===$('input[name="'+t+'"]')[0].files.length?($('input[name="'+t+'"]').hasClass("invalid")||($('input[name="'+t+'"]').addClass("invalid").after('<div class="invalid-feedback">'+a+"</div>"),"ResignFile"==t&&$(".custom-file").addClass("invalid")),e=!1):($('input[name="'+t+'"]').removeClass("invalid"),$('input[name="'+t+'"]').parent().children(".invalid-feedback").remove(),$(".custom-file").removeClass("invalid")):""==$("#resign-reason").val()||0===$("#resign-file")[0].files.length?($('input[name="'+t+'"]').hasClass("invalid")||($('input[name="'+t+'"]').addClass("invalid").after('<div class="invalid-feedback">'+a+"</div>"),"ResignFile"==t&&$(".custom-file").addClass("invalid")),e=!1):($("input.invalid").removeClass("invalid"),$(".invalid-feedback").remove(),"ResignFile"==t&&$(".custom-file").removeClass("invalid"))})),!e)return!1}}).then((e=>{if(e.value){var t=new FormData;t.append("File.File",$("#resign-file")[0].files[0]),t.append("Reason",$("#resign-reason").val()),$.ajax({url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/renuncia`.proto().parseURL(),type:"POST",processData:!1,contentType:!1,data:t}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}))})),$(".cancellation-request").on("click",(function(){setTimeout((function(){$("#cancellation-file").on("change",(function(e){console.log("cambio"),$(".custom-file-label").html(e.target.files[0].name)}))}),1e3),swal({title:"Anular ingreso del estudiante",type:"warning",showCancelButton:!0,confirmButtonText:"Si, anularlo",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar",html:'Se realizará la anulación de ingreso del estudiante a la institución. Este proceso es irreversible.</br>\n                                       <div class="form-group m-form__group col-xl-12">\n                                            <div class="m-input  m-input--solid">\n                                                <label for="Reason"></label>\n                                                <input type="text" placeholder="Motivo" class="form-control m-input" name="ResignReason" id="resign-reason" required>\n                                            </div>\n                                        </div>\n                                        <div class="form-group m-form__group col-xl-12">\n                                            <label asp-for="File"></label>\n                                            <div class="custom-file">\n                                                <input name="ResignFile" id="cancellation-file" type="file" class="custom-file-input" lang="es"/>\n                                                <label class="custom-file-label" for="File">\n                                                    Seleccione un archivo\n                                                </label>\n                                            </div>                                              \n                                        </div>',preConfirm:()=>{var e=!0;if($.each({ResignReason:"Introduzca un motivo de anulación",ResignFile:"Introduzca un archivo"},(function(t,a){"ResignFile"==t?0===$('input[name="'+t+'"]')[0].files.length?($('input[name="'+t+'"]').hasClass("invalid")||($('input[name="'+t+'"]').addClass("invalid").after('<div class="invalid-feedback">'+a+"</div>"),"ResignFile"==t&&$(".custom-file").addClass("invalid")),e=!1):($('input[name="'+t+'"]').removeClass("invalid"),$('input[name="'+t+'"]').parent().children(".invalid-feedback").remove(),$(".custom-file").removeClass("invalid")):""==$("#resign-reason").val()||0===$("#cancellation-file")[0].files.length?($('input[name="'+t+'"]').hasClass("invalid")||($('input[name="'+t+'"]').addClass("invalid").after('<div class="invalid-feedback">'+a+"</div>"),"ResignFile"==t&&$(".custom-file").addClass("invalid")),e=!1):($("input.invalid").removeClass("invalid"),$(".invalid-feedback").remove(),"ResignFile"==t&&$(".custom-file").removeClass("invalid"))})),!e)return!1}}).then((e=>{if(e.value){var t=new FormData;t.append("File.File",$("#cancellation-file")[0].files[0]),t.append("Reason",$("#resign-reason").val()),$.ajax({url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/anular-ingreso`.proto().parseURL(),type:"POST",processData:!1,contentType:!1,data:t}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}))})),$(".reentry-request").on("click",(function(){setTimeout((function(){$("#reentry-file").on("change",(function(e){$(".custom-file-label").html(e.target.files[0].name)}))}),1e3),swal({title:"Reingreso del estudiante",type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0,confirmButtonText:"Si, reingresarlo",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar",html:'El estudiante reingresará a la institución con el estado previo a su retiro. Por favor, adjuntar el documento correspondiente:</br>\n                                        <div class="form-group m-form__group">\n                                            <label asp-for="File"></label>\n                                            <div class="custom-file">\n                                                <input name="ReentryFile" id="reentry-file" type="file" class="custom-file-input" lang="es"/>\n                                                <label class="custom-file-label" for="File">\n                                                    Seleccione un archivo\n                                                </label>\n                                            </div>                                              \n                                        </div>',preConfirm:()=>new Promise((()=>{var e=new FormData;e.append("file",$("#reentry-file")[0].files[0]),$.ajax({url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/reingreso`.proto().parseURL(),type:"POST",processData:!1,contentType:!1,data:e}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){null!==e.responseText&&""!==e.responseText?toastr.error(e.responseText,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){swal.close()}))}))})}))}},select:{campus:{init:function(){$.ajax({url:"/sedes/get",type:"GET"}).done((function(e){$("#request-change-campus-modal").find("[name='CampusId']").select2({data:e.items,dropdownParent:$("#request-change-campus-modal"),placeholder:"Seleccionar sede"}),$("#request-change-campus-modal").find("[name='CampusId']").val(null).trigger("change")}))}},courses:{init:function(){var e=$("#Id").val();$.ajax({url:`/academico/alumnos/informacion/${e}/cursos-pendientes`.proto().parseURL()}).done((function(e){$("#evaluationCourseSelect").select2({data:e.items,minimumResultsForSearch:-1}),$("#directedCourseSelect").select2({data:e.items,minimumResultsForSearch:-1})}))}},teachers:{init:function(){$("#directedCourseTeacherSelect").select2({ajax:{delay:300,url:"/profesores/get/v2".proto().parseURL()},allowClear:!0,minimumInputLength:2,placeholder:"Seleccione profesor",dropdownParent:$("#request-directedcourse-modal")}),$("#evaluationTeacherSelect").select2({ajax:{delay:300,url:"/profesores/get/v2".proto().parseURL()},allowClear:!0,minimumInputLength:2,placeholder:"Seleccione profesor",dropdownParent:$("#request-evaluation-modal")}),$("#evaluationTeachersCommiteeSelect").select2({ajax:{delay:300,url:"/profesores/get/v2".proto().parseURL()},allowClear:!0,minimumInputLength:1,placeholder:"Seleccione el comité",dropdownParent:$("#request-evaluation-modal")})}},enrolledcourses:{init:function(){var e=$("#Id").val();$.ajax({url:`/academico/alumnos/informacion/${e}/cursos-matriculados`.proto().parseURL()}).done((function(e){$("#enrolledCoursesSelect").select2({data:e,minimumResultsForSearch:-1})}))},reload:function(){var e=$("#Id").val();$.ajax({url:`/academico/alumnos/informacion/${e}/cursos-matriculados`.proto().parseURL()}).done((function(e){$("#enrolledCoursesSelect").empty(),$("#enrolledCoursesSelect").select2({data:e,minimumResultsForSearch:-1})}))}},careers:{init:function(){$.ajax({url:"/carreras/get".proto().parseURL()}).done((function(e){$("#careerSelect").select2({data:e.items,dropdownParent:$("#request-transfer-modal")})})),this.events()},events:function(){$("#careerSelect").on("change",(function(){let e=$(this).val();n.procedurerequest.select.curriculums.load(e)}))}},curriculums:{init:function(){$("#curriculumSelect").select2(),$.ajax({url:`/planes-estudio/${$("#CareerId").val()}/get`.proto().parseURL()}).done((function(e){$("#change-curriculum-modal").find("[name='CurriculumId']").select2({data:e.items,dropdownParent:$("#change-curriculum-modal")}).on("change",(function(){mApp.block("#change-curriculum-form",{message:"Cargando programas académicos..."});var e=$(this).val();$("#change-curriculum-modal").find("[name='AcademicProgramId']").empty(),$.ajax({url:`/programas-academico/get?curriculumId=${e}`,type:"GET"}).done((function(e){$("#change-curriculum-modal").find("[name='AcademicProgramId']").empty(),e.items.length>1?$(".div-academic-program-container").removeClass("d-none"):$(".div-academic-program-container").addClass("d-none"),$("#change-curriculum-modal").find("[name='AcademicProgramId']").select2({data:e.items,placeholder:"Seleccionar programa académico"}),mApp.unblock("#change-curriculum-form")}))}))}))},load:function(e){this.clear(),$.ajax({url:`/planes-activos/ultimo-ano/carrera/${e}/get`.proto().parseURL()}).done((function(e){$("#curriculumSelect").select2({data:e.items,dropdownParent:$("#request-transfer-modal")})}))},clear:function(){$("#curriculumSelect").empty(),$("#curriculumSelect").html('<option value="0" selected disabled>Seleccione un plan de estudio</option>')}},academicPrograms:{init:function(){$.ajax({url:"/programas-academico/get".proto().parseURL(),data:{curriculumId:$("#CurriculumId").val()}}).then((function(e){$("#academicProgramSelect").select2({data:e.items,dropdownParent:$("#request-program-modal")}),$("#academicProgramSelect").val($("#AcademicProgramId").val()).trigger("change")}))}},courseCertificates:{init:function(){$("#Id").val();$.ajax({url:"/certificados-cursos".proto().parseURL()}).done((function(e){$("#courseCertificateSelect").select2({data:e.items,minimumResultsForSearch:10})}))}},benefits:{init:function(){$.ajax({url:"/beneficios-estudiantes/get".proto().parseURL(),data:{studentId:$("#Id").val()}}).done((function(e){$("#benefitSelect").select2({data:e.items,minimumResultsForSearch:10}),null!=e.selected&&$("#benefitSelect").val(e.selected).trigger("change")}))}}},form:{evaluation:{object:null,clear:function(){n.procedurerequest.form.evaluation.object.resetForm()},init:function(){n.procedurerequest.form.evaluation.object=$("#evaluation-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#evaluation-request-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.evaluation.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#evaluation_msg_txt").html(e.responseText):$("#evaluation_msg_txt").html(_app.constants.ajax.message.error),$("#evaluation-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#evaluation-request-form")}))}})}},reservation:{object:null,clear:function(){this.object.resetForm()},init:function(){this.object=$("#reservation-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#reservation-request-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.reservation.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#reservation_msg_txt").html(e.responseText):$("#reservation_msg_txt").html(_app.constants.ajax.message.error),$("#reservation-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#reservation-request-form")}))}}),$(".reservation-file").on("change",(function(){$(this).valid();var e=$(this).val();$(this).next().html(e)}))}},extemporaneous:{object:null,clear:function(){this.object.resetForm()},init:function(){this.object=$("#extemporaneous-enrollment-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#extemporaneous-enrollment-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.extemporaneous.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#extemporaneous_msg_txt").html(e.responseText):$("#extemporaneous_msg_txt").html(_app.constants.ajax.message.error),$("#extemporaneous-enrollment-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#extemporaneous-enrollment-form")}))}}),$(".extemporaneous-file").on("change",(function(){$(this).valid();var e=$(this).val();$(this).next().html(e)}))}},changeCampus:{object:null,clear:function(){this.object.resetForm(),$("#request-change-campus-modal").find("[name='CampusId']").val(null).trigger("change")},init:function(){this.object=$("#request-change-campus-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#request-change-campus-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.transfer.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#change_campus_msg_txt").html(e.responseText):$("#change_campus_msg_txt").html(_app.constants.ajax.message.error),$("#change-campus-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#request-change-campus-form")}))}}),$("#request-change-campus-modal").on("hidden.bs.modal",(function(){n.procedurerequest.form.changeCampus.clear()}))}},transfer:{object:null,clear:function(){this.object.resetForm(),$("#careerSelect").val(0).trigger("change"),$("#curriculumSelect").val(0).trigger("change")},init:function(){this.object=$("#transfer-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#transfer-request-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.transfer.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#transfer_msg_txt").html(e.responseText):$("#transfer_msg_txt").html(_app.constants.ajax.message.error),$("#transfer-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#transfer-request-form")}))}}),$("#request-transfer-modal").on("hidden.bs.modal",(function(){n.procedurerequest.form.transfer.clear()}))}},directedcourse:{object:null,clear:function(){this.object.resetForm(),$("#directedCourseSelect").val(null).trigger("change")},init:function(){this.object=$("#directedcourse-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#directedcourse-request-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.directedcourse.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#directedcourse_msg_txt").html(e.responseText):$("#directedcourse_msg_txt").html(_app.constants.ajax.message.error),$("#directedcourse-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#directedcourse-request-form")}))}}),$(".directedcourse-file").on("change",(function(){$(this).valid();var e=$(this).val();$(this).next().html(e)}))}},coursewithdrawal:{object:null,clear:function(){this.object.resetForm(),$("#enrolledCoursesSelect").val(null).trigger("change")},init:function(){this.object=$("#coursewithdrawal-request-form").validate({submitHandler:function(e,t){if(t.preventDefault(),null==$("#enrolledCoursesSelect").val())return $("#coursewithdrawal_msg_txt").html("Debe seleccionar un curso"),$("#coursewithdrawal-modal-form-alert").removeClass("m--hide").show(),!1;swal({title:"Retirar de asignatura",text:"Se retirará al estudiante de la asignatura seleccionada",type:"warning",showCancelButton:!0,confirmButtonText:"Si, retirar",confirmButtonClass:"btn btn-success m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(t){t.value&&(mApp.block("#coursewithdrawal-request-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),n.procedurerequest.select.enrolledcourses.reload(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.coursewithdrawal.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#coursewithdrawal_msg_txt").html(e.responseText):$("#coursewithdrawal_msg_txt").html(_app.constants.ajax.message.error),$("#coursewithdrawal-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#coursewithdrawal-request-form")})))}))}})}},academicProgram:{object:null,clear:function(){},init:function(){this.object=$("#program-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#program-request-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#AcademicProgramId").val($("#academicProgramSelect").val())})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#program_msg_txt").html(e.responseText):$("#program_msg_txt").html(_app.constants.ajax.message.error),$("#program-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#program-request-form")}))}})}},amnesty:{object:null,clear:function(){this.object.resetForm()},init:function(){this.object=$("#amnesty-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#amnesty-request-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(e){$(".modal").modal("hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#CurriculumId").val(e.id),$("#curriculum-label").text(e.code)})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#amnesty-request-alert-txt").html(e.responseText):$("#amnesty-request-alert-txt").html(_app.constants.ajax.message.error),$("#amnesty-request-alert").removeClass("m--hide").show(),toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#amnesty-request-form")}))}})}},courseCertificate:{object:null,clear:function(){this.object.resetForm(),$("#courseCertificateSelect").val(null).trigger("change")},init:function(){this.object=$("#coursecertificate-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#coursecertificate-request-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.courseCertificate.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#coursecertificate_msg_txt").html(e.responseText):$("#coursecertificate_msg_txt").html(_app.constants.ajax.message.error),$("#coursecertificate-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#coursecertificate-request-form")}))}}),$(".directedcourse-file").on("change",(function(){$(this).valid();var e=$(this).val();$(this).next().html(e)}))}},changeCurriculum:{object:null,init:function(){this.object=$("#change-curriculum-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#change-curriculum-form");var a=new FormData($(e).get(0));$.ajax({url:$(e).attr("action"),type:"POST",data:a,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.procedurerequest.form.evaluation.clear()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#change_curriculum_msg_txt").html(e.responseText):$("#change_curriculum_msg_txt").html(_app.constants.ajax.message.error),$("#change-curriculum-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#change-curriculum-form")}))}})}},changeBenefit:{object:null,clear:function(){},init:function(){this.object=$("#program-request-form").validate({submitHandler:function(e,t){t.preventDefault(),mApp.block("#program-request-form"),$.ajax({url:$(e).attr("action"),type:"POST",data:$(e).serialize()}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#AcademicProgramId").val($("#academicProgramSelect").val())})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#program_msg_txt").html(e.responseText):$("#program_msg_txt").html(_app.constants.ajax.message.error),$("#program-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#program-request-form")}))}})}}},datatablePay:{paymentmades:{object:null,options:{ajax:{url:`/academico/alumnos/informacion/${$("#Id").val()}/solicitud-tramites/getpaymenthistory`.proto().parseURL(),type:"GET",data:function(e){}},columns:[{data:"type",title:"Tipo"},{data:"description",title:"Descripción"},{data:"paymentDate",title:"Fec. Pago"},{data:"term",title:"Periodo"},{data:"total",title:"Total"},{data:null,title:"Estado",render:function(e){switch(e.status){case 1:return'<span class="m-badge m-badge--metal m-badge--wide">Pendiente</span>';case 2:return'<span class="m-badge m-badge--primary m-badge--wide">Pagado</span>';case 3:return'<span class="m-badge m-badge--danger m-badge--wide">Anulado</span>';default:return"-"}}}]},init:function(){this.object=$("#payment-table").DataTable(this.options)}}},init:function(){this.select.courses.init(),this.select.careers.init(),this.select.curriculums.init(),this.select.academicPrograms.init(),this.select.teachers.init(),this.select.enrolledcourses.init(),this.select.courseCertificates.init(),this.select.campus.init(),this.select.benefits.init(),$("[data-switch=true]").bootstrapSwitch(),this.form.evaluation.init(),this.form.reservation.init(),this.form.extemporaneous.init(),this.form.transfer.init(),this.form.academicProgram.init(),this.form.directedcourse.init(),this.form.coursewithdrawal.init(),this.form.amnesty.init(),this.form.courseCertificate.init(),this.form.changeCurriculum.init(),this.form.changeCampus.init(),this.events.init()}},observations:{datatable:{observations:{object:null,options:getSimpleDataTableConfiguration({url:`/academico/alumnos/informacion/${e}/observaciones/get`.proto().parseURL(),data:function(e){},pageLength:10,ordering:!1,columns:[{data:"type",title:"Tipo"},{data:"observation",title:"Observaciones"},{data:"user",title:"Usuario"},{data:"date",title:"Fecha"},{data:null,title:"Opciones",orderable:!1,render:function(e){var t="";return t+="<button ",t+="class='btn btn-info btn-studentObservationView ",t+="m-btn btn-sm  m-btn--icon-only' ",t+=" data-id='"+e.id+"'>",t+="<i class='la la-eye'></i></button>",t+=" "}}]}),init:function(){this.object=$("#observations_table").DataTable(this.options),this.events()},reload:function(){this.object.ajax.reload()},events:function(){$("#observations_table").on("click",".btn-studentObservationView",(function(){let e=$(this).data("id");n.observations.modal.detailObservation.load(e)}))}}},form:{observation:{object:null,clear:function(){$("#create-observation-modal").find("[name='observationType']").val(1).trigger("change"),$("#create-observation-modal").find("[name='termId']").val(null).trigger("change"),this.object.resetForm()},init:function(){this.object=$("#create-observation-form").validate({submitHandler:function(t,a){a.preventDefault(),mApp.block("#create-observation-form");var o=new FormData(t);$.ajax({url:`/academico/alumnos/informacion/${e}/observaciones/crear`.proto().parseURL(),type:"POST",data:o,processData:!1,contentType:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.observations.form.observation.clear(),n.observations.datatable.observations.reload()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#observation_msg_txt").html(e.responseText):$("#observation_msg_txt").html(_app.constants.ajax.message.error),$("#observation-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#create-observation-form")}))}})}}},modal:{detailObservation:{hide:function(){$("#detail-observation-modal").modal("hide")},show:function(){$("#detail-observation-modal").modal("show")},load:function(e){$.ajax({url:`/academico/alumnos/informacion/observacion/${e}/get`.proto().parseURL(),type:"GET"}).done((function(e){$("#detail-observation-modal").find("[name='termName']").val(e.term),$("#detail-observation-modal").find("[name='observationType']").val(e.observationTypeName),$('#detail-observation-modal textarea[name="observation"]').text(e.observation),null!=e.observationFile&&""!=e.observationFile&&($("#fileContainer").css("display","block"),$("#detail-observation-modal .btn-downloadObservationFile").attr("href",`/documentos/${e.observationFile}`)),n.observations.modal.detailObservation.show()})).fail((function(e){})).always((function(){}))},clear:function(){$('#detail-observation-modal textarea[name="observation"]').text(""),$("#fileContainer").css("display","none"),$("#detail-observation-modal .btn-downloadObservationFile").attr("href","")},events:function(){$("#detail-observation-modal").on("hidden.bs.modal",(function(){n.observations.modal.detailObservation.clear()}))},init:function(){this.events()}},init:function(){this.detailObservation.init()}},select:{term:{load:function(){$.ajax({url:"/periodos/get",type:"GET"}).done((function(e){$("#create-observation-modal").find("[name='termId']").select2({data:e.items,placeholder:"Seleccionar periodo académico"}),null!=e.selected&&$("#create-observation-modal").find("[name='termId']").val(e.selected).trigger("change")}))},init:function(){this.load()}},type:{load:function(){$("#create-observation-modal").find("[name='observationType']").select2({dropdownParent:$("#create-observation-modal")})},events:{onChange:function(){$("#create-observation-modal").find("[name='observationType']").on("change",(function(){var e=$(this).val();switch(console.log(e),e){case"1":case"11":default:$("#create-observation-modal").find(".student_observation_term").addClass("d-none"),$("#create-observation-modal").find("[name='termId']").attr("disabled",!0);break;case"2":case"6":case"10":case"12":case"16":$("#create-observation-modal").find(".student_observation_term").removeClass("d-none"),$("#create-observation-modal").find("[name='termId']").attr("disabled",!1)}}))},init:function(){this.onChange()}},init:function(){this.load(),this.events.init()}},init:function(){this.type.init(),this.term.init()}},init:function(){this.modal.init(),this.datatable.observations.init(),this.form.observation.init(),this.select.init()}},studentSituation:{init:function(){n.studentSituation.academicCicles.init(),n.studentSituation.electiveCourses.init()},academicCicles:{options:{data:{type:"remote",source:{read:{method:"GET",url:""}},pageSize:10,saveState:{cookie:!0,webstorage:!0}},pagination:!1,columns:[{field:"course",title:"Curso",width:200,sortable:!1},{field:"credits",title:"Total",textAlign:"center",width:80,sortable:!1},{field:"try",title:"N° de Veces",textAlign:"center",width:120,sortable:!1},{field:"grade",title:"Promedio Final",textAlign:"center",width:120,sortable:!1,template:function(e){return e.validated?`<span class="m--font-info"> ${e.grade} </span>`:e.grade}},{field:"term",title:"Ciclo",textAlign:"center",width:80,sortable:!1},{field:"status",title:"Estado",textAlign:"center",width:100,sortable:!1,template:function(e){return e.status?"Cumplido":"Pendiente"}}]},datatable:{init:{all:function(){$(".academic-year-datatable").each((function(e,t){var a=$(t).data("ayid"),o=location.pathname.match(/(.{0,8}-.{0,4}-.{0,4}-.{0,4}-.{0,12})/).pop();n.studentSituation.academicCicles.options.data.source.read.url=`/alumnos/${o}/situacion/nivel/${a}/get`.proto().parseURL(),t.id=`academic-year-${e}`,t.dataset.number=e,$("#"+t.id).mDatatable(n.studentSituation.academicCicles.options)}))}},events:{load:function(){$(".academic-year-datatable").on("m-datatable--on-init",(function(){var e=0,t=!0;$(`#${this.id} td[data-field="credits"]`).each((function(){var t=$(this).text();!isNaN(t)&&t.length>0&&!isNaN(parseInt(t))&&(e+=parseInt(t))})),$(`#${this.id} td[data-field="status"`).each((function(){var e=$(this).text();e.length>0&&(t=t&&"Cumplido"===e)}));var a=$(this).data("number"),o=$(`#m-accordion-title-${a}`).text();$(`#m-accordion-title-${a}`).html(`${o}&emsp;<i class="fa fa-angle-double-right"></i>&emsp;${e} créditos`);var n=t?"fa fa-check":"fa fa-exclamation-triangle";$(`#m-accordion-icon-${a}`).html(`<i class="${n}"></i>`),$(`#m-accordion-icon-${a}`).addClass(t?"text-success":"text-warning")}))}}},init:function(){n.studentSituation.academicCicles.datatable.init.all(),n.studentSituation.academicCicles.datatable.events.load()}},electiveCourses:{options:{data:{type:"remote",source:{read:{method:"GET",url:"/alumno/progreso/electivos/get".proto().parseURL()}},pageSize:10,saveState:{cookie:!0,webstorage:!0}},pagination:!1,columns:[{field:"course",title:"Curso",width:200,sortable:!1},{field:"academicYear",title:"Nivel",width:70,textAlign:"center",sortable:!1},{field:"credits",title:"Créditos",textAlign:"center",width:80,sortable:!1},{field:"try",title:"N° de Veces",textAlign:"center",width:100,sortable:!1},{field:"grade",title:"Promedio Final",textAlign:"center",width:120,sortable:!1},{field:"term",title:"Ciclo",textAlign:"center",width:80,sortable:!1},{field:"status",title:"Estado",textAlign:"center",width:100,sortable:!1,template:function(e){return e.status?"Cumplido":"-"}}]},datatable:{init:{all:function(){var e=location.pathname.match(/(.{0,8}-.{0,4}-.{0,4}-.{0,4}-.{0,12})/).pop();n.studentSituation.electiveCourses.options.data.source.read.url=`/alumnos/${e}/situacion/electivos/get`.proto().parseURL(),$(".elective-courses-datatable").mDatatable(n.studentSituation.electiveCourses.options)}}},init:function(){n.studentSituation.electiveCourses.datatable.init.all()}}},studentRecord:{options:{data:{type:"remote",source:{read:{method:"GET",url:""}},pageSize:10,saveState:{cookie:!0,webstorage:!0}},pagination:!1,columns:[{field:"course",title:"Curso",width:200,sortable:!1},{field:"academicYear",title:"Ciclo",textAlign:"center",width:80,sortable:!1},{field:"credits",title:"Créditos",textAlign:"center",width:80,sortable:!1},{field:"finalGrade",title:"Promedio Final",textAlign:"center",width:120,sortable:!1},{field:"try",title:"N° de Veces",textAlign:"center",width:120,sortable:!1}]},load:{all:function(){$(".summary-detail-datatable").each((function(e,t){var a=$(t).data("pid"),o=location.pathname.match(/(.{0,8}-.{0,4}-.{0,4}-.{0,4}-.{0,12})/).pop();n.studentRecord.options.data.source.read.url=`/alumnos/${o}/historial/periodo/${a}/get`.proto().parseURL(),t.id=`summary-detail-${e}`,$(`#${t.id}`).mDatatable(n.studentRecord.options)})),$(".btn-export").on("click",(function(){var e=$(this),t=location.pathname.match(/(.{0,8}-.{0,4}-.{0,4}-.{0,4}-.{0,12})/).pop();return e.addLoader(),$.fileDownload(`/admin/situacion-academica/${t}/historial/reporte`.proto().parseURL()).always((function(){e.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")})),!1}))}},init:function(){n.studentRecord.load.all()}},portfolio:{datatable:{portfolio:{object:null,options:getSimpleDataTableConfiguration({serverSide:!1,url:`/academico/alumnos/informacion/${e}/portafolio/get`.proto().parseURL(),data:function(e){},pageLength:50,ordering:!1,columns:[{data:"name",title:"Requisito"},{data:null,title:"Entregado",orderable:!1,render:function(e){return e.received?'<span class="m-badge m-badge--success m-badge--wide"> Si </span>':'<span class="m-badge m-badge--danger m-badge--wide"> No </span>'}},{data:null,title:"Documento",orderable:!1,render:function(e){return null==e.file||""==e.file?`<button class='btn btn-primary btn-upload m-btn btn-sm' data-id='${e.id}' data-name='${e.name}'><i class='la la-cloud-upload'></i> Subir</button>`:`<button class='btn btn-info btn-show btn-sm m-btn m-btn--icon' data-obj='${e.proto().encode()}'>\n                                                    <span><i class='la la-eye'></i><span>Ver documento</span></span>\n                                            </button>`}},{data:null,title:"Validado",orderable:!1,render:function(e){return e.validated?'<span class="m-badge m-badge--success m-badge--wide"> Si </span>':'<span class="m-badge m-badge--danger m-badge--wide"> No </span>'}}]}),init:function(){this.object=$("#portfolio_table").DataTable(this.options),this.events()},reload:function(){this.object.ajax.reload()},events:function(){$("#portfolio_table").on("click",".btn-upload",(function(){var e=$(this).data("id"),t=$(this).data("name");$("#create-portfolio-modal .modal-title").html("Portafolio - "+t),$("#create-portfolio-modal").find("[name='Type']").val(e),$("#create-portfolio-modal").modal("toggle")})),$("#portfolio_table").on("click",".btn-show",(function(){var e=$(this).data("obj");e=e.proto().decode(),$("#detail-portfolio-modal .modal-title").html("Portafolio - "+e.name);var t="";e.file.includes(".pdf")||e.file.includes(".PDF")?($("#detail-portfolio-modal-container").addClass("modal-xl"),t=`<object width="100%" height="500" hspace="0" vspace="0" src="/documentos/${e.file}">\n                                            <embed width="100%" height="500" hspace="0" vspace="0" src="/documentos/${e.file}"></embed>\n                                            </object>`):($("#detail-portfolio-modal-container").removeClass("modal-xl"),t=`<a href="/documentos/${e.file}" class ="btn btn-info m-btn m-btn--icon" title="Descargar Archivo" download>\n                                                    <span><i class='la la-file-pdf-o'></i><span>Descargar archivo</span></span>\n                                                </a>`),e.validated?($("#btn-verify").html("Invalidar"),$("#btn-verify").removeClass("btn-success"),$("#btn-verify").addClass("btn-danger")):($("#btn-verify").html("Verificar"),$("#btn-verify").addClass("btn-success"),$("#btn-verify").removeClass("btn-danger")),$("#detail-portfolio-type").val(e.id),$("#detail-portfolio-content").html(t),$("#detail-portfolio-modal").modal("toggle")}))}}},form:{portfolio:{object:null,clear:function(){this.object.resetForm()},init:function(){this.object=$("#create-portfolio-form").validate({submitHandler:function(t,a){a.preventDefault(),mApp.block("#create-portfolio-form");var o=new FormData(t);$.ajax({url:`/academico/alumnos/informacion/${e}/portafolio/crear`.proto().parseURL(),type:"POST",data:o,processData:!1,contentType:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.portfolio.form.portfolio.clear(),n.portfolio.datatable.portfolio.reload()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#portfolio_msg_txt").html(e.responseText):$("#portfolio_msg_txt").html(_app.constants.ajax.message.error),$("#portfolio-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#create-portfolio-form")}))}})}},verify:{object:null,init:function(){this.object=$("#portfolio-verify-form").validate({submitHandler:function(t,a){a.preventDefault(),mApp.block("#create-portfolio-form");var o=new FormData(t);$.ajax({url:`/academico/alumnos/informacion/${e}/portafolio/crear`.proto().parseURL(),type:"POST",data:o,processData:!1,contentType:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),n.portfolio.form.portfolio.clear(),n.portfolio.datatable.portfolio.reload()})).fail((function(e){null!==e.responseText&&""!==e.responseText?$("#portfolio_msg_txt").html(e.responseText):$("#portfolio_msg_txt").html(_app.constants.ajax.message.error),$("#portfolio-modal-form-alert").removeClass("m--hide").show()})).always((function(){mApp.unblock("#create-portfolio-form")}))}})}}},modal:{detailObservation:{hide:function(){$("#detail-observation-modal").modal("hide")},show:function(){$("#detail-observation-modal").modal("show")},load:function(e){$.ajax({url:`/academico/alumnos/informacion/observacion/${e}/get`.proto().parseURL(),type:"GET"}).done((function(e){$("#detail-observation-modal").find("[name='termName']").val(e.term),$("#detail-observation-modal").find("[name='observationType']").val(e.observationTypeName),$('#detail-observation-modal textarea[name="observation"]').text(e.observation),null!=e.observationFile&&""!=e.observationFile&&($("#fileContainer").css("display","block"),$("#detail-observation-modal .btn-downloadObservationFile").attr("href",`/documentos/${e.observationFile}`)),n.observations.modal.detailObservation.show()})).fail((function(e){})).always((function(){}))},clear:function(){$('#detail-observation-modal textarea[name="observation"]').text(""),$("#fileContainer").css("display","none"),$("#detail-observation-modal .btn-downloadObservationFile").attr("href","")},events:function(){$("#detail-observation-modal").on("hidden.bs.modal",(function(){n.observations.modal.detailObservation.clear()}))},init:function(){this.events()}},init:function(){this.detailObservation.init()}},select:{term:{load:function(){$.ajax({url:"/periodos/get",type:"GET"}).done((function(e){$("#create-observation-modal").find("[name='termId']").select2({data:e.items,placeholder:"Seleccionar periodo académico"}),null!=e.selected&&$("#create-observation-modal").find("[name='termId']").val(e.selected).trigger("change")}))},init:function(){this.load()}},type:{load:function(){$("#create-observation-modal").find("[name='observationType']").select2({dropdownParent:$("#create-observation-modal")})},events:{onChange:function(){$("#create-observation-modal").find("[name='observationType']").on("change",(function(){var e=$(this).val();switch(console.log(e),e){case"1":case"11":default:$("#create-observation-modal").find(".student_observation_term").addClass("d-none"),$("#create-observation-modal").find("[name='termId']").attr("disabled",!0);break;case"2":case"6":case"10":case"12":case"16":$("#create-observation-modal").find(".student_observation_term").removeClass("d-none"),$("#create-observation-modal").find("[name='termId']").attr("disabled",!1)}}))},init:function(){this.onChange()}},init:function(){this.load(),this.events.init()}},init:function(){this.type.init(),this.term.init()}},events:function(){$("#detail-portfolio-modal").on("click",".btn-verify",(function(){var t=$(this);t.addLoader(),$.ajax({url:`/academico/alumnos/informacion/${e}/portafolio/validar`.proto().parseURL(),type:"POST",data:{type:$("#detail-portfolio-type").val()}}).done((function(){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),$("#detail-portfolio-modal").modal("toggle"),n.portfolio.datatable.portfolio.reload()})).fail((function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){t.removeLoader()}))}))},init:function(){this.datatable.portfolio.init(),this.form.portfolio.init(),this.events()}},clear:function(){n.assistancehistory.clear(),n.reportcard.clear(),n.curriculumprogress.clear()}},r={init:function(){this.modal.init(),this.cropper.init()},modal:{init:function(){$("#btnProfileImageViewer").on("click",(function(){$("#modal-profile-viewer").modal("show")}))}},cropper:{init:function(){$("#ProfilePicture").on("change",(function(){var t=new FileReader;t.onload=function(t){var a=$("#img-offi")[0],o=$(".cropper-container cropper-bg").prevObject;$("#upload-offi div").remove();var n=new Cropper(a);n.destroy(),n.reset(),n.clear(),n=null,o.remove(),$(".preview").css({width:"100%",overflow:"hidden",height:300,maxWidth:300,maxHeight:300}),$("#img-offi").attr("src",t.target.result),$("#cropper-hide").attr("src",t.target.result),n=new Cropper(a,{dragMode:"move",preview:".preview",aspectRatio:1,minContainerWidth:300,maxContainerWidth:300,minContainerHeight:300,maxContainerHeight:300,background:!1,viewMode:1,aspectRatio:1,responsive:!0,autoCrop:!0,ready:function(){$("#crop_button").trigger("click")}}),$("#btnCropSave").on("click",(function(){$("#btnCropSave").addLoader();var t=new FormData,a=n.getCroppedCanvas().toDataURL("image/png");console.log($("#ProfilePicture").prop("files")[0]),t.append("UrlPhotoCropImg",a),t.append("Picture",$("#ProfilePicture").prop("files")[0]),$.ajax({url:`/academico/alumnos/informacion/${e}/actualizar-foto`,type:"POST",data:t,contentType:!1,processData:!1}).done((function(e){toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(e){toastr.error("Error al actualizar la foto de perfil.","Error.")})).always((function(){$("#modal-profile-viewer").modal("hide"),$("#imageFile").prop("required",!1),$("#student-picture").attr("src",a),$("#urlCropImg").val(a),$("#btnCropSave").removeLoader()}))}))},$("#ProfilePicture").next().html("Reemplazar imagen"),t.readAsDataURL(this.files[0])}))}}};return{init:function(){r.init(),o.init()},load:function(){n.reportcard.datatable.courses.load()}}}();$((function(){InitApp.init()}));