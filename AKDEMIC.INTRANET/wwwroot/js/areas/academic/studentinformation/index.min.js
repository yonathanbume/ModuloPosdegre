var InitApp=function(){var e={students:{object:null,options:getSimpleDataTableConfiguration({dom:'<"top"i>rt<"bottom"flp><"clear">',url:"/academico/alumnos/get".proto().parseURL(),data:function(e){delete e.columns,e.faculty=$("#faculty_select").val(),e.career=$("#career_select").val(),e.academicProgram=$("#academicProgram_select").val(),e.search=$("#search").val()},pageLength:50,orderable:[],columns:[{title:"CÃ³digo",data:"code"},{title:"Estudiante",data:"name"},{title:"Facultad",data:"faculty"},{title:"Escuela",data:"career"},{title:"Especialidad",data:"academicProgram"},{title:"Detalle",data:null,render:function(e){return`<div class="table-options-section">\n                                <a href="${`/academico/alumnos/informacion/${e.id}`.proto().parseURL()}" class="btn btn-info btn-sm m-btn m-btn--icon m-btn--icon-only"><i class="la la-eye"></i></a>                            \n                            </div>`}}]}),init:function(){e.students.object=$("#students_table").DataTable(e.students.options),$("#search").doneTyping((function(){e.students.object.draw()}))},reload:function(){e.students.object.draw()}}},a={faculty:{init:function(){$.ajax({url:"/facultades/v2/get".proto().parseURL()}).done((function(e){$("#faculty_select").select2({data:e.items}),a.faculty.events()}))},events:function(){$("#faculty_select").on("change",(function(){$("#faculty_select").val()===_app.constants.guid.empty?$("#career_select").select2({placeholder:"Seleccione una Carrera",disabled:!0}):a.career.load($("#faculty_select").val()),$("#career_select").val(_app.constants.guid.empty).trigger("change"),$("#academicProgram_select").empty(),$("#academicProgram_select").select2({disabled:!0,placeholder:"Seleccione una Especialidad"}),e.students.reload()}))}},career:{init:function(){$("#career_select").select2({placeholder:"Seleccione una escuela"}),a.career.events()},load:function(e){$("#career_select").empty(),$.ajax({url:`/academico/alumnos/facultades/${e}/carreras/v2/get`.proto().parseURL()}).done((function(e){$("#career_select").select2({data:e.items,disabled:!1,placeholder:"Seleccione una carrera"})}))},events:function(){$("#career_select").on("change",(function(){$("#career_select").val()===_app.constants.guid.empty?($("#academicProgram_select").empty(),$("#academicProgram_select").select2({disabled:!0,placeholder:"Seleccione una Especialidad"})):a.academicProgram.load($("#career_select").val()),e.students.reload()}))}},academicProgram:{init:function(){$("#academicProgram_select").select2({placeholder:"Seleccione una Especialidad"}),a.career.events()},load:function(e){$.ajax({url:`/academico/alumnos/especialidades/get/${e}`.proto().parseURL()}).done((function(e){$("#academicProgram_select").empty(),$("#academicProgram_select").select2({placeholder:"Seleccione una Especialidad",data:e.items,disabled:!1})}))},events:function(){$("#academicProgram_select").on("change",(function(){e.students.reload()}))}},init:function(){a.faculty.init(),a.academicProgram.init(),a.career.init()}};return{init:function(){e.students.init(),a.init()}}}(),Search=function(){var e={search:{init:function(){$("#search").select2({width:"100%",placeholder:"Buscar...",ajax:{url:"/academico/alumnos/buscar".proto().parseURL(),dataType:"json",data:function(e){return{term:e.term,page:e.page}},processResults:function(e,a){return{results:e.items}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:3}),$("#btn-search").on("click",(function(){e.search.load()})),console.log("cargo"),$(".select2-results__option").on("keydown",(function(e){13===e.keyCode&&alert("Enter key")}))},load:function(){var e=$("#search").val();if(""==e)return swal("Seleccione un estudiante","Debe buscar y seleccionar un estudiante primero","warning"),!1;window.location.href=`/academico/alumnos/informacion/${e}`.proto().parseURL()}}};return{init:function(){e.search.init()}}}();$((function(){Search.init()}));