var psychologicalDiagnostics={ajax:{list:{},load:{create:function(a,t){var o=a.elements;psychologicalDiagnostics.ajax.list["psychologicalDiagnostics-ajax-create"]=$.ajax({data:{Description:o.Description.value,Code:o.Code.value},type:a.method,url:a.action,beforeSend:function(t,o){$(a).addLoader()},complete:function(t,o){$(a).removeLoader()},error:function(a,t,o){toastr.error(_app.constants.toastr.message.error.create,_app.constants.toastr.title.error)},success:function(a,t,o){psychologicalDiagnostics.datatable.list.ajax_data.reload(),psychologicalDiagnostics.modal.list["psychologicalDiagnostics-modal-create"].modal("hide"),toastr.success(_app.constants.toastr.message.success.create,_app.constants.toastr.title.success)}})},editById:function(a,t){var o=$(a).data("id");psychologicalDiagnostics.ajax.list["psychologicalDiagnostics-ajax-edit"]=$.ajax({data:{Id:o},type:"GET",url:("/welfare/diagnosticos-psicologicos/editar/"+o).proto().parseURL(),error:function(a,t,o){toastr.error(_app.constants.toastr.message.error.create,_app.constants.toastr.title.error)},success:function(a,t,o){$("#psychologicalDiagnostics-modal-edit-form"),$("input[name='Code']").val(a.code),$("textarea[name='Description']").val(a.description),$("input[name='Id']").val(a.id)}})},edit:function(a,t){var o=a.elements;psychologicalDiagnostics.ajax.list["psychologicalDiagnostics-ajax-edit"]=$.ajax({data:{Id:o.Id.value,Code:o.Code.value,Description:o.Description.value},type:a.method,url:a.action,beforeSend:function(t,o){$(a).addLoader()},complete:function(t,o){$(a).removeLoader()},error:function(a,t,o){toastr.error(_app.constants.toastr.message.error.update,_app.constants.toastr.title.error)},success:function(a,t,o){psychologicalDiagnostics.datatable.list.ajax_data.reload(),psychologicalDiagnostics.modal.list["psychologicalDiagnostics-modal-edit"].modal("hide"),toastr.success(_app.constants.toastr.message.success.update,_app.constants.toastr.title.success)}})}}},datatable:{list:{},load:{get:function(){psychologicalDiagnostics.datatable.list.ajax_data=$("#ajax_data").mDatatable({data:{source:{read:{method:"GET",url:"/welfare/diagnosticos-psicologicos/get".proto().parseURL()}}},columns:[{field:"description",title:"Descripción"},{field:"code",title:"Código"},{field:"options",title:"Opciones",sortable:!1,filterable:!1,template:function(a){var t="";return t+='<button type="button" data-id="'+a.id+'" class="btn btn-info btn-sm m-btn m-btn--icon btn-edit" onClick="psychologicalDiagnostics.modal.load.edit(this, event)"><span><i class="la la-edit"></i><span>Editar</span></span></button>',t+=' <button class="btn btn-danger m-btn btn-sm m-btn--icon" onclick ="psychologicalDiagnostics.swal.load.delete(this, event, \'',t+="/welfare/diagnosticos-psicologicos/eliminar/post".proto().parseURL(),t+="', '",t+=a.proto().encode(),t+='\')"><i class="la la-trash"></i></button>'}}]})}}},modal:{list:{},load:{create:function(a,t){var o=document.getElementById("psychologicalDiagnostics-modal-create-form");_app.modules.form.reset({element:o}),psychologicalDiagnostics.modal.list["psychologicalDiagnostics-modal-create"]=$("#psychologicalDiagnostics-modal-create").modal("show")},edit:function(a,t){var o=document.getElementById("psychologicalDiagnostics-modal-edit-form");_app.modules.form.reset({element:o}),psychologicalDiagnostics.ajax.load.editById(a,t),psychologicalDiagnostics.modal.list["psychologicalDiagnostics-modal-edit"]=$("#psychologicalDiagnostics-modal-edit").modal("show")}}},swal:{list:{},load:{delete:function(a,t,o,s){s=s.proto().decode(),psychologicalDiagnostics.swal.list["psychologicalDiagnostics-swal-delete"]=swal({title:_app.constants.swal.title.delete,type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0,preConfirm:()=>new Promise(((a,t)=>{$.ajax({data:{id:s.id},type:"POST",url:o,beforeSend:function(a,t){},complete:function(t,o){a()},success:function(a,t,o){psychologicalDiagnostics.datatable.list.ajax_data.reload(),toastr.success(_app.constants.toastr.message.success.delete,_app.constants.toastr.title.success)},error:function(a,t,o){toastr.error("Error al tratar de eliminar el registro",_app.constants.toastr.title.error)}})}))})}}},validate:{list:{},load:{create:function(){psychologicalDiagnostics.validate.list["psychologicalDiagnostics-modal-create-form"]=$("#psychologicalDiagnostics-modal-create-form").validate({submitHandler:function(a,t){t.preventDefault(),psychologicalDiagnostics.ajax.load.create(a,t)}})},edit:function(){psychologicalDiagnostics.validate.list["psychologicalDiagnostics-modal-edit-form"]=$("#psychologicalDiagnostics-modal-edit-form").validate({submitHandler:function(a,t){psychologicalDiagnostics.ajax.load.edit(a,t)}})}}}};window.onload=function(){psychologicalDiagnostics.datatable.load.get(),psychologicalDiagnostics.validate.load.create(),psychologicalDiagnostics.validate.load.edit()};