var SimulationSubjectTable=function(){var t,a={data:{source:{read:{method:"GET",url:"/welfare/psicologia_categorias/listar".proto().parseURL()}}},columns:[{field:"name",title:"Nombre",width:200},{field:"options",title:"Opciones",sortable:!1,filterable:!1,template:function(t){var a="";return a+="<button class='btn btn-primary m-btn btn-sm m-btn--icon btn-edit' data-id='"+t.id+"'><i class='la la-edit'></i> Editar</button>",a+=" <button class='btn btn-danger m-btn btn-sm m-btn--icon btn-delete' data-id='"+t.id+"'><i class='la la-trash'></i> Eliminar</button>"}}]},e=function(){t.on("click",".btn-delete",(function(){var a=$(this).data("id");swal({title:"¿Está seguro?",text:"La asignatura será eliminada",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/welfare/psicologia_categorias/eliminar/post".proto().parseURL(),type:"POST",data:{id:a},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"La categoría ha sido eliminada con éxito",confirmButtonText:"Excelente"})},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer la categoría tiene información relacionada"})}})}))})}))},o=function(a){$("#add-form").validate({submitHandler:function(){$.ajax({type:"POST",url:"/welfare/psicologia_categorias/crear/post".proto().parseURL(),data:$("#add-form").serialize(),success:function(){t.reload(),$("#add_area_modal").modal("hide"),toastr.success(_app.constants.toastr.message.success.create,_app.constants.toastr.title.success)},error:function(t){toastr.error(t.responseJSON.Name,_app.constants.toastr.title.error)}})}})},n=function(a){$("#edit-form").validate({submitHandler:function(){$.ajax({type:"POST",url:"/welfare/psicologia_categorias/editar/post".proto().parseURL(),data:$("#edit-form").serialize(),success:function(){t.reload(),$("#edit_area_modal").modal("hide"),toastr.success(_app.constants.toastr.message.success.update,_app.constants.toastr.message.success.title)}})}})},i=function(){t.on("click",".btn-details",(function(){var t=$(this).data("id");window.location.href=`/welfare/psicologia_categorias/${t}`.proto().parseURL()}))},s=function(){t.on("click",".btn-edit",(function(){var t=$(this).data("id");$("#edit_area_modal").modal("show"),$("#edit-form input[name='Id']").val(t),$.ajax({type:"GET",url:`/welfare/psicologia_categorias/${t}/get`.proto().parseURL(),success:function(t){$("#edit-form input[name='Name']").val(t.name)}})}))},r=function(){$(".btn-addsubject").on("click",(function(){$("#add_area_modal").modal("show"),$("#add-form input[name='Name']").val("")}))};return{init:function(){t=$("#simulationsubject-datatable").mDatatable(a),e(),o(),n(),i(),r(),s()},reload:function(){t.reload()}}}();$((function(){SimulationSubjectTable.init()}));