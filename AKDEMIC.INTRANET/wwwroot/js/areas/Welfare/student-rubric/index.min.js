InitApp=function(){var t={objects:{}},a=function(){$("#search").doneTyping((function(){t.objects["tbl-data"].draw()}))},e={columnDefs:[{orderable:!1,targets:[1]}],ajax:{type:"GET",dataType:"JSON",url:"/welfare/rubricas-de-calificacion/obtener-lista-rubricas".proto().parseURL(),data:function(t){t.searchValue=$("#search").val()}},columns:[{data:"name",title:"Descripción"},{data:null,title:"Estado",render:function(t,a,e,s){var r="";return t.status?r+='<span class="m-badge  m-badge--success m-badge--wide">Activo</span>':r+='<span class="m-badge  m-badge--metal m-badge--wide">Inactivo</span>',r}},{data:null,title:"Opciones",render:function(t,a,e,s){return`<button type="button" data-id="${t.id}" class="btn btn-sm btn-brand  criterias"> Criterios de evaluación </button>\n                               <button type="button" data-id="${t.id}" class="btn btn-sm btn-info edit"><i class="fa fa-edit"></i> </button>\n                               <button type="button" data-id="${t.id}" class="btn btn-sm btn-danger delete"> <i class="fa fa-trash"></i> </button>`}}]},s=function(){t.objects["tbl-data"].on("click",".criterias",(function(){var t=$(this).data("id");window.location.href=`/welfare/rubricas-de-calificacion/criterios-de-evaluacion/${t}`.proto().parseURL()})),t.objects["tbl-data"].on("click",".edit",(function(){var t=$(this).data("id");$.ajax({type:"GET",url:`/welfare/rubricas-de-calificacion/obtener-rubrica-estudiante/${t}`.proto().parseURL(),success:function(t){$("#edit-form input[id='Name_e']").val(t.name),t.status?$("#edit-form input[id='Status_e']").prop("checked",!0):$("#edit-form input[id='Status_e']").prop("checked",!1),$("#editModal").modal("show")}})})),t.objects["tbl-data"].on("click",".delete",(function(){var a=$(this);a.addLoader();var e=$(this).data("id");swal({title:"¿Está seguro?",text:"El registro será eliminado permanentemente",type:"warning",showCancelButton:!0,confirmButtonText:"Sí",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(s){s.value?$.ajax({url:"/welfare/rubricas-de-calificacion/eliminar-rubrica-estudiante".proto().parseURL(),type:"POST",data:{id:e},success:function(){t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){a.removeLoader()}}):a.removeLoader()}))}))},r=function(){t.objects["tbl-data"]=$("#rubric-datatable").DataTable(e),s()},n=function(){$("#add-form").validate({submitHandler:function(a){var e=$(a).find("button[ type='submit']");e.addLoader(),$.ajax({type:"POST",url:"/welfare/rubricas-de-calificacion/agregar-rubrica-estudiante".proto().parseURL(),data:$(a).serialize(),success:function(){$("#addModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(t){toastr.error(t.responseText,_app.constants.toastr.title.error)},complete:function(){e.removeLoader(),$("#add-form").validate().resetForm()}})}})},o=function(){$("#edit-form").validate({submitHandler:function(a){var e=$(a).find("button[ type='submit']");e.addLoader(),$.ajax({type:"POST",url:"/welfare/rubricas-de-calificacion/editar-rubrica-estudiante".proto().parseURL(),data:$(a).serialize(),success:function(){$("#editModal").modal("hide"),$("#edit-form").validate().resetForm(),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(t){toastr.error(t.responseText,_app.constants.toastr.title.error)},complete:function(){e.removeLoader()}})}})};return{init:function(){a(),r(),n(),o(),$("#btnModalAdd").on("click",(function(){$("#addModal").modal("show")}))}}}(),$((function(){InitApp.init()}));