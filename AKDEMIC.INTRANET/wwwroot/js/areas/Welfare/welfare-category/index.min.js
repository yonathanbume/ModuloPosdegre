var WelfareCategory=function(){var t={objects:{}},a=function(){$("#search").doneTyping((function(){t.objects["tbl-data"].draw()}))},e={columnDefs:[{orderable:!1,targets:[1]}],ajax:{type:"GET",dataType:"JSON",url:"/welfare/categorias/obtener-lista-categorias".proto().parseURL(),data:function(t){t.searchValue=$("#search").val()}},columns:[{data:"name",title:"Descripción"},{data:null,title:"Color",render:function(t,a,e,o){return`<span class="m-badge" style="background-color: ${t.colorRGB};"></span>`}},{data:null,title:"Opciones",render:function(t,a,e,o){return`<button type="button" data-id="${t.id}" class="btn btn-sm btn-info edit"> <i class="fa fa-edit"></i> </button> \n                               <button type="button" data-id="${t.id}" class="btn btn-sm btn-danger delete"> <i class="fa fa-trash"></i> </button>`}}]},o=function(){t.objects["tbl-data"].on("click",".edit",(function(){var t=$(this).data("id");$.ajax({type:"GET",url:`/welfare/categorias/obtener-categoria/${t}`.proto().parseURL(),success:function(t){$("#edit-form input[id='Name_edit']").val(t.name),$("#edit-form input[name='Id']").val(t.id),$("#edit-form input[name='ColorRGB']").val(t.colorRGB),$("#editModal").modal("show")}})})),t.objects["tbl-data"].on("click",".delete",(function(){var a=$(this);a.addLoader();var e=$(this).data("id");swal({title:"¿Está seguro?",text:"El registro será eliminado permanentemente",type:"warning",showCancelButton:!0,confirmButtonText:"Sí",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(o){o.value?$.ajax({url:"/welfare/categorias/eliminar-categoria".proto().parseURL(),type:"POST",data:{id:e},success:function(){t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){a.removeLoader()}}):a.removeLoader()}))}))},r=function(){t.objects["tbl-data"]=$("#tbl-data").DataTable(e),o()},s=function(){$("#add-form").validate({submitHandler:function(a){var e=$(a).find("button[ type='submit']");e.addLoader(),$.ajax({type:"POST",url:"/welfare/categorias/agregar-categoria".proto().parseURL(),data:$(a).serialize(),success:function(){$("#addModal").modal("hide"),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){e.removeLoader(),$("#add-form").validate().resetForm()}})}})},n=function(){$("#edit-form").validate({submitHandler:function(a){var e=$(a).find("button[ type='submit']");e.addLoader(),$.ajax({type:"POST",url:"/welfare/categorias/editar-categoria".proto().parseURL(),data:$(a).serialize(),success:function(){$("#editModal").modal("hide"),$("#edit-form").validate().resetForm(),t.objects["tbl-data"].draw(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)},complete:function(){e.removeLoader()}})}})};return{init:function(){a(),r(),s(),n(),$("#btnModalAdd").on("click",(function(){$("#addModal").modal("show")}))}}}();$((function(){WelfareCategory.init()}));