var SimulationSubjectTable=function(){var t,a={data:{source:{read:{method:"GET",url:"/welfare/preguntas-categoria/list".proto().parseURL()}}},columns:[{field:"category",title:"Categoría",width:200},{field:"question",title:"Pregunta",width:300},{field:"state",title:"Estado",width:200,template:function(t){return!0===t.state?'<span class="m-badge  m-badge--success m-badge--wide">Activo</span>':'<span class="m-badge  m-badge--danger m-badge--wide">Desactivado</span>'}},{field:"options",title:"Opciones",width:300,sortable:!1,filterable:!1,template:function(t){var a="";return a+="<button class='btn btn-primary m-btn btn-sm m-btn--icon btn-edit' data-id='"+t.id+"'><i class='la la-edit'></i> Editar</button>",a+=" <button class='btn btn-danger m-btn btn-sm m-btn--icon btn-delete' data-id='"+t.id+"'><i class='la la-trash'></i> Eliminar</button>"}}]},e={init:function(){t.on("click",".btn-delete",(function(){var a=$(this).data("id");swal({title:"¿Está seguro?",text:"La pregunta será eliminada",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/welfare/preguntas-categoria/eliminar/post".proto().parseURL(),type:"POST",data:{id:a},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"La pregunta ha sido eliminada con éxito",confirmButtonText:"Excelente"})},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer la pregunta tiene información relacionada"})}})}))})}))},addform:function(a){$("#add-form").validate({submitHandler:function(){$.ajax({type:"POST",url:"/welfare/preguntas-categoria/crear/post".proto().parseURL(),data:$("#add-form").serialize(),success:function(){t.reload(),$("#add_area_modal").modal("hide"),toastr.success(_app.constants.toastr.message.success.create,_app.constants.toastr.title.success)},error:function(t){toastr.error(t.responseJSON.Question,_app.constants.toastr.title.error)}})}})},editform:function(a){$("#edit-form").validate({submitHandler:function(){$.ajax({type:"POST",url:"/welfare/preguntas-categoria/editar/post".proto().parseURL(),data:$("#edit-form").serialize(),success:function(){t.reload(),$("#edit_area_modal").modal("hide"),toastr.success(_app.constants.toastr.message.success.update,_app.constants.toastr.message.success.title)}})}})},selectform:function(){$.ajax({url:"/welfare/preguntas-categoria/list/category".proto().parseURL()}).done((function(t){$(".select2-categorias").select2({data:t.items,placeholder:"Categorias"})}))},updateState:function(){t.on("click","span.bootstrap-switch-off",(function(){var t=$(this).find(".custom_checkbox");console.log(t.data("id"));var a=$(this).data("id");console.log(a),$.ajax({type:"GET",url:`/welfare/${a}/estado`.proto().parseURL(),success:function(t){console.log("GO")}})}))},switcher:function(){t.on("m-datatable--on-init m-datatable--on-layout-updated",(function(){$(".custom_checkbox").bootstrapSwitch({onText:"Sí",offText:"No",onColor:"success",offColor:"danger"}),e.updateState()}))}},o=function(){t.on("click",".btn-edit",(function(){var t=$(this).data("id");$("#edit_area_modal").modal("show"),$("#edit-form input[name='Id']").val(t),$.ajax({type:"GET",url:`/welfare/preguntas-categoria/${t}/get`.proto().parseURL(),success:function(t){$("#edit-form select[name='CategoryId']").val(t.categoryId).trigger("change"),$("#edit-form textarea[name='Question']").val(t.questions),!0===t.state?$("#edit-form input[name='State']").prop("checked",!0):$("#edit-form input[name='State']").prop("checked",!1)}})}))},n=function(){$(".btn-addpsychologytestquestion").on("click",(function(){$("#add_area_modal").modal("show"),$("#add-form input[name='Name']").val("")}))};return{init:function(){t=$("#psychologytestquestion-datatable").mDatatable(a),e.init(),e.switcher(),e.addform(),e.editform(),e.selectform(),e.updateState(),n(),o()},reload:function(){t.reload()}}}();$((function(){SimulationSubjectTable.init()}));