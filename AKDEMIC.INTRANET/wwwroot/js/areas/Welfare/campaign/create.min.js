var SimulationSubjectTable=function(){var e,t=[],a={data:{type:"local",source:[]},columns:[{field:"FullName",title:"Nombres y Apellidos"},{field:"Faculty",title:"Escuela profesional"},{field:"Cicle",title:"Ciclo"},{field:"Code",title:"código"},{field:"options",title:"Firma",template:function(e,t){return""}}]},n=function(){e.on("click",".btn-delete",(function(){var t=$(this).data("id");swal({title:"¿Está seguro?",text:"La campaña será eliminada",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/welfare/preguntas-categoria/eliminar/post".proto().parseURL(),type:"POST",data:{id:t},success:function(){e.reload(),swal({type:"success",title:"Completado",text:"La pregunta ha sido eliminada con éxito",confirmButtonText:"Excelente"})},error:function(){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:"Al parecer la pregunta tiene información relacionada"})}})}))})})),$("#btn-add").on("click",(function(){}))},l=function(){$(".alumno").on("click",(function(){$("#StudentSelect").select2({allowClear:!0,placeholder:"Buscar..",ajax:{type:"GET",url:"/alumnosv2/get".proto().parseURL(),delay:1e3,data:function(e){return{searchValue:e.term}},processResults:function(e){return{results:e.results}},escapeMarkup:function(e){return e},minimumInputLength:1}}),$("#StudentSelect").val(null).trigger("change"),$("#add_student_modal").modal("show")})),$(".alumno-externo").on("click",(function(){$("#add_student_extern_modal").modal("show")})),$(".btn-add").on("click",(function(){t.push({FullName:$("#namestudenthidden").val(),Cicle:$("#cicleu").val(),Code:$("#codeu").val(),Faculty:$("#facultyu").val(),GuIdStudent:$("#StudentSelect").val(),type:1}),e.originalDataSet=t,e.reload(),$("#add_student_modal").modal("hide")})),$(".btn-addExternal").on("click",(function(){t.push({FullName:$("#studentexternal").val(),Cicle:$("#Cicle").val(),Code:$("#Code").val(),Faculty:$("#Faculty").val(),type:2}),e.originalDataSet=t,e.reload(),$("#add_student_extern_modal").modal("hide")})),$("#StudentSelect").on("change",(function(){var e=$(this).val();$.ajax({type:"GET",url:`/welfare/campania/studentselect/${e}`.proto().parseURL()}).done((function(e){console.log(e),$("#cicleu").val(e.cicle),$("#facultyu").val(e.faculty),$("#codeu").val(e.code),$("#namestudenthidden").val(e.fullname)}))})),$("#add-form").validate({submitHandler:function(){var a=$("#add-form").serializeArray();a.push({name:"Participants",value:JSON.stringify(t)}),$.ajax({type:"POST",url:"/welfare/campania/crear/post".proto().parseURL(),data:$.param(a),success:function(){e.reload(),$("#add_student_modal").modal("hide"),$("#add_student_extern_modal").modal("hide"),location.href="/welfare/campania".proto().parseURL()}})}})},o=function(){$.ajax({type:"GET",url:"/welfare/campania/encargados".proto().parseURL()}).done((function(e){$("#userrole").select2({data:e.items})}))},i=function(){$(".datepicker").datepicker(),$(".timepicker").timepicker()};return{init:function(){e=$("#psychologytestquestion-datatable").mDatatable(a),n(),o(),i(),l()},reload:function(){e.reload()}}}();$((function(){SimulationSubjectTable.init()}));