var reportMedicalAppointmentAtention=function(){var e=null,t={data:{source:{read:{method:"GET",url:""}}},columns:[{field:"code",title:"CÃ³digo",width:100},{field:"fullname",title:"Nombres Completos",width:200},{field:"email",title:"Email",width:150},{field:"faculty",title:"Escuela Profesional",width:150},{field:"date",title:"Fecha de la cita",width:150},{field:"status",title:"Estado",template:function(e){return 1==e.status?'<span class="m-badge  m-badge--success m-badge--wide">Atendido</span>':'<span class="m-badge  m-badge--danger m-badge--wide">Pendiente</span>'}}]},a=function(e,t,a){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){$.ajax({type:"GET",url:`/welfare/reporte_citas_medicas/${e}/${t}/${a}/todas`.proto().parseURL(),error:function(e,t,a){toastr.error(err.message)},success:function(e){e.length>0?function(e){var t=[["",""]];$.each(e,(function(e,a){t.push(["atendidos",a.atendidos]),t.push(["pendientes",a.pendientes])}));e=google.visualization.arrayToDataTable(t);var a={title:"Atendidos vs pendientes",height:400,width:700,colors:["#43A047","#D32F2F"],titleFontSize:20,is3D:!0};new google.visualization.PieChart(document.getElementById("chart_div_report_atention_alerts")).draw(e,a)}(e):document.getElementById("chart_div_report_atention_alerts").innerHTML=""}})}))},n=function(){$(".btn-search-report").on("click",(function(){var n=$("#doctorSelect2").val(),o=0,i=0,r=$("#currentYearMonth").val().split("-"),d=parseInt(r[0]),s=parseInt(r[1]);isNaN(d)||(o=d),isNaN(s)||(i=s),a(n,o,i),function(a,n,o){null!==e&&(e.destroy(),e=null),t.data.source.read.url=`/welfare/reporte_citas_medicas/${a}/${n}/${o}/atendidos`.proto().parseURL(),e=$(".m-datatable").mDatatable(t)}(n,o,i)}))};return{load:function(){$.ajax({url:"/doctores/get".proto().parseURL()}).done((function(e){$("#doctorSelect2").select2({data:e.items}).trigger("change")})),$("#currentYearMonth").datepicker({format:"mm-yyyy",viewMode:"months",minViewMode:"months"}),n()}}}();$((function(){reportMedicalAppointmentAtention.load()}));