var Grades=function(){var t={studentInformation:{download:function(){$("#btnStudentInformationConstancy").addLoader(),$.fileDownload("/alumno/notas/constancia-fichasocioeconomica".proto().parseURL(),{httpMethod:"GET"}).done((function(){$("#btnStudentInformationConstancy").removeLoader(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)})).fail((function(t){$("#btnStudentInformationConstancy").removeLoader();var o=t;if("undefined"!=o){var n=o.substr(o.indexOf(">")+1,o.length),a=n.substr(0,n.length-6);toastr.error(a,_app.constants.toastr.title.error)}else toastr.error(e_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))},init:function(){$("#btnStudentInformationConstancy").on("click",(function(){t.studentInformation.download()}))}},init:function(){this.studentInformation.init()}},o=function(){mApp.block(".m-portlet",{type:"loader",message:"Cargando..."}),$.ajax({type:"GET",url:("/alumno/notas/periodo/"+$("#select-term").val()+"/get").proto().parseURL()}).done((function(t){$("#enrolled-courses-container").html(t),$("[data-toggle='m-tooltip']").tooltip(),$("[rel='m-tooltip']").tooltip(),$("#lblAcademicYear").text($("#summaryAcademicYear").val()),$("#lblSectionCount").text($("#summarySectionCount").val()),$("#lblCreditSum").text(parseFloat($("#summaryCreditSum").val()).toFixed(1)),mApp.unblock(".m-portlet")}))},n={onDownloadSyllabus:function(){$("#enrolled-courses-container").on("click",".btn_download_syllabus",(function(){var t=$(this).data("studentsectionid"),o=$(this).data("syllabusteacherid"),n=$(this),a=`/alumno/notas/descargar-silabo?syllabusTeacherId=${o}&studentSectionId=${t}`;n.addLoader(),$.fileDownload(a).always((function(){n.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")}))}))},onDownloadEnrollmentReport:function(){$(".download-report").on("click",(function(){if($("#select-term").val()){var t=$(this);t.addLoader();var o=`/alumno/notas/ficha-matricula/${$("#select-term").val()}`;$.fileDownload(o).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")})).always((function(){t.removeLoader()}))}else toastr.error("Debe seleccionar un periodo matrículado","Error")}))},init:function(){this.onDownloadSyllabus(),this.onDownloadEnrollmentReport()}};return{init:function(){$("#select-term").on("change",(function(t){$("#lblAcademicYear").text("-"),$("#lblSectionCount").text("-"),$("#lblCreditSum").text("-"),o()})),$("#select-term").val()&&o(),n.init(),t.init()}}}();$((function(){Grades.init()}));