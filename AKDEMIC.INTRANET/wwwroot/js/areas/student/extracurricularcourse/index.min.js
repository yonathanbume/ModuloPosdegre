var ActivitiesTable=function(){var t,e={search:{input:$("#search")},data:{source:{read:{method:"GET",url:"/alumno/cursos-extracurriculares/get".proto().parseURL()}}},columns:[{field:"course",title:"Curso"},{field:"group",title:"Grupo"},{field:"price",title:"Precio"},{field:"credits",title:"Crédits"},{field:"options",title:"Opciones",textAlign:"center",width:125,sortable:!1,filterable:!1,template:function(t){var e="";return e+="<button data-id='"+t.id+"' data-price='"+t.price+"' class='btn btn-accent btn-sm m-btn m-btn--icon btn-enrollment'><span><i class='la la-edit'></i><span>Matricularse</span></span></button>"}}]},n=function(){$(".btn-enrollment").on("click",(function(){var e=$(this).data("id"),n=$(this).data("price");swal({title:"¿Está seguro?",text:"Se generará un pago de S/."+n+" para la matrícula",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, generar",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((()=>{$.ajax({url:"/alumno/cursos-extracurriculares/enrollment".proto().parseURL(),type:"POST",data:{id:e},success:function(){t.reload(),swal({type:"success",title:"Completado",text:"Se ha generado el pago de la matrícula con éxito",confirmButtonText:"Excelente"})},error:function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:t.responseText})}})}))})}))};return{init:function(){void 0!==t&&t.destroy(),e.data.source.read.url="/alumno/cursos-extracurriculares/get".proto().parseURL(),t=$("#courses-datatable").mDatatable(e),$(t).on("m-datatable--on-layout-updated",(function(){n()}))},reload:function(){t.reload()}}}();$((function(){ActivitiesTable.init()}));