var index=function(){var t={portfolio:{object:null,options:{serverSide:!1,pageLength:50,ajax:{url:"/alumno/portafolio/get-datatable"},columns:[{data:"name",title:"Requisito"},{data:null,title:"Entregado",orderable:!1,render:function(t){return t.received?'<span class="m-badge m-badge--success m-badge--wide"> Si </span>':'<span class="m-badge m-badge--danger m-badge--wide"> No </span>'}},{data:null,title:"Validado",orderable:!1,render:function(t){return t.validated?'<span class="m-badge m-badge--success m-badge--wide"> Si </span>':'<span class="m-badge m-badge--danger m-badge--wide"> No </span>'}},{data:null,title:"Documento",orderable:!1,render:function(t){var o="";return null==t.file||""==t.file?o+=`<button class='btn btn-primary btn-upload m-btn btn-sm' data-id='${t.id}' data-name='${t.name}'><i class='la la-cloud-upload'></i> Subir</button> `:(o+=`<button class='btn btn-primary btn-upload m-btn btn-sm' data-id='${t.id}' data-name='${t.name}'><i class='la la-cloud-upload'></i> Reemplazar</button> `,o+=`<a href="/documentos/${t.file}" target="_blank" class='btn btn-info btn-sm m-btn m-btn--icon'><span><i class='la la-download'></i><span>Descargar</span></span></a>`),o}}]},reload:function(){t.portfolio.object.ajax.reload()},events:{onLoadFile:function(){$("#datatable").on("click",".btn-upload",(function(){var t=$(this).data("id"),a=$(this).data("name");o.portfolio.object.find("[name='typeId']").val(t),o.portfolio.object.find(".modal-title").text(a),o.portfolio.object.modal("show")}))},init:function(){this.onLoadFile()}},init:function(){t.portfolio.object=$("#datatable").DataTable(t.portfolio.options),t.portfolio.events.init()}},init:function(){t.portfolio.init()}},o={portfolio:{object:$("#portfolio-modal"),form:{object:$("#portfolio-form").validate({submitHandler:function(a,n){n.preventDefault();var e=new FormData(a);o.portfolio.object.find("button[type='submit']").addClass("m-loader m-loader--right m-loader--light").attr("disabled",!0),$.ajax({url:"/alumno/portafolio/subir",type:"POST",data:e,contentType:!1,processData:!1}).done((function(a){t.portfolio.reload(),o.portfolio.object.modal("hide"),swal({type:"success",title:"Completado",confirmButtonClass:"btn btn-primary m-btn m-btn--custom",text:"Archivo adjunto con Ã©xito.",confirmButtonText:"Aceptar"})})).fail((function(t){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===t.status?"No hay respuesta del servidor":t.responseText})})).always((function(){o.portfolio.object.find("button[type='submit']").removeClass("m-loader m-loader--right m-loader--light").attr("disabled",!1)}))}})},events:{onHidden:function(){o.portfolio.object.on("hidden.bs.modal",(function(t){o.portfolio.form.object.resetForm(),$("#portfolio-file").val(null).trigger("change"),$("#portfolio-form").find(".custom-file-label").text("Buscar archivo...")}))},init:function(){this.onHidden()}},init:function(){this.events.init()}},init:function(){o.portfolio.init()}};return{init:function(){t.init(),o.init()}}}();$((()=>{index.init()}));