var InitApp=function(){var t={cafobeRequest:{object:null,options:{serverSide:!0,filter:!1,lengthChange:!1,ajax:{url:"/estudiante/rendicion-cuenta/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){delete t.columns,t.searchValue=$("#search").val(),t.type=$("#type").val(),t.status=$("#status").val()}},pageLength:50,orderable:[],columns:[{title:"Periodo Acad√©mico",data:"termName"},{title:"Tipo",data:"typeText"},{title:"Estado",data:null,orderable:!1,render:function(t){var e="";return 0==t.status?e+=`<span class="m-badge m-badge--primary m-badge--wide">${t.statusText}</span>`:1==t.status?e+=`<span class="m-badge m-badge--success m-badge--wide">${t.statusText}</span>`:2==t.status?e+=`<span class="m-badge m-badge--danger m-badge--wide">${t.statusText}</span>`:3==t.status?e+=`<span class="m-badge m-badge--warning m-badge--wide">${t.statusText}</span>`:e+=`<span class="m-badge m-badge--secondary m-badge--wide">${t.statusText}</span>`,e}},{title:"Opciones",data:null,orderable:!1,render:function(t){var e="";return e+=`<button type="button" data-id="${t.id}"class="btn btn-primary btn-sm m-btn m-btn--icon btn-edit" title="Rendir Cuenta"><span><span><i class="la la-edit"></i></span><span>Rendir Cuenta</span></span></button>`}}]},reload:function(){this.object.ajax.reload()},init:function(){this.object=$("#data-table").DataTable(this.options),this.events()},events:function(){$("#data-table").on("click",".btn-edit",(function(){var t=$(this).data("id");n.load(t)}))}},init:function(){this.cafobeRequest.init()}},e=function(){$("#search").doneTyping((function(){t.cafobeRequest.reload()}))},a={init:function(){this.types.init()},types:{init:function(){this.load(),this.events()},load:function(){$("#type").select2()},events:function(){$("#type").on("change",(function(){t.cafobeRequest.reload()}))}}},n={create:{object:$("#add-form").validate({submitHandler:function(e,a){$("#btnSave").addLoader(),a.preventDefault();let s=new FormData($(e)[0]);$.ajax({url:$(e).attr("action"),type:"POST",data:s,contentType:!1,processData:!1}).done((function(){$(".modal").modal("hide"),$(".m-alert").addClass("m--hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),t.cafobeRequest.reload(),n.create.clear(),$("#btnSave").removeLoader()})).fail((function(t){toastr.error(t.responseText,_app.constants.toastr.title.error),$("#btnSave").removeLoader()})).always((function(){}))}}),show:function(){$("#addModal").modal("toggle"),$("#btnSave").removeLoader()},clear:function(){n.create.object.resetForm()},events:function(){$("#addModal").on("hidden.bs.modal",(function(){n.create.clear(),$("#FileDetailLabel").html("Seleccione Archivo")}))}},load:function(t){console.log("hola"),n.create.show(),$.ajax({url:`/estudiante/rendicion-cuenta/get/${t}`.proto().parseURL(),type:"GET"}).done((function(t){console.log(t),$("#add-form input[name=CafobeRequestId]").val(t.cafobeRequestId),$("#add-form input[name=StatusText]").val(t.statusText),$("#add-form input[name=Comentary]").val(t.comentary)})).fail((function(t){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error),null!==t.responseText&&""!==t.responseText?$("#add_form_msg_txt").html(t.responseText):$("#add_form_msg_txt").html(_app.constants.ajax.message.error),$("#add_form_msg").removeClass("m--hide").show()})).always((function(){}))},init:function(){this.create.events()}};return{init:function(){t.init(),e(),a.init(),n.init()}}}();$((function(){InitApp.init()}));