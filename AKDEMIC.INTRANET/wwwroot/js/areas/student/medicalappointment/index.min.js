var MedicalAppointment=function(){var t;return{init:function(){$.ajax({type:"GET",url:"/doctores/get".proto().parseURL(),success:function(t){$("#doctorSelect2").select2({data:t.items}).trigger("change")}}),$("#doctorSelect2").on("change",(function(){var e={allDaySlot:!1,aspectRatio:2,businessHours:{dow:[1,2,3,4,5,6],end:"24:00",start:"07:00"},columnFormat:"dddd",contentHeight:600,defaultView:"agendaWeek",editable:!1,eventRender:function(t,e){e.hasClass("fc-day-grid-event")?(e.data("placement","top"),mApp.initPopover(e)):e.hasClass("fc-time-grid-event")?e.find(".fc-title").append('<div class="fc-description"></div>'):0!==e.find(".fc-list-item-title").length&&e.find(".fc-list-item-title").append('<div class="fc-description"></div>');var a=e.find(".fc-title").clone().children().remove().end().text();e.css("border-color","#"+a.proto().toRGB()).css("border-width","2px"),e.find(".fc-content").css("cursor","pointer")},events:{className:"m-fc-event--primary",error:function(){toastr.error("Ocurrió un problema con el servidor","Error")},url:`/alumno/citas_medicas/doctor/${$(this).val()}/citas/get`.proto().parseURL()},eventAfterAllRender:function(){$(".fc-prev-button").prop("disabled",!1),$(".fc-next-button").prop("disabled",!1),mApp.unblock(".m-calendar__container")},eventClick:function(a,n,r){1==a.busy?toastr.error("No puede reservar una cita ocupada",_app.constants.toastr.title.error):swal({title:"¿Está seguro de reservar la cita médica?",text:"No puedes reservar otra cita médica hasta no cerrar tus citas pendientes",type:"warning",showCancelButton:!0,confirmButtonText:"Si, reservarlo",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar"}).then((function(n){n.value&&$.ajax({url:`/alumno/citas_medicas/reservar_cita_medica/${a.id}/post`.proto().parseURL(),type:"POST",success:function(){null!==t&&($(t).fullCalendar("destroy"),t=null),t=$(".m-calendar__container").fullCalendar(e),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success)},error:function(){toastr.error("Tienes citas pendientes sin cerrar",_app.constants.toastr.title.error)}})}))},firstDay:1,header:{left:"prev,next today",center:"title"},height:600,locale:"es",maxTime:"24:00:00",minTime:"06:00:00",monthNames:monthNames,dayNames:dayNames,monthNamesShort:monthNamesShort,dayNamesShort:dayNamesShort,buttonText:{today:"hoy",month:"mes",week:"semana",day:"día"},slotDuration:"00:10:00",timeFormat:"h(:mm)A"};t=$(".m-calendar__container").fullCalendar(e)}))}}}();$((function(){MedicalAppointment.init()}));