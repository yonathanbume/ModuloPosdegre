var MeritTable=function(){var e=null,a=!1,t=!1,r=!1,c=getSimpleDataTableConfiguration({url:"/director-carrera/ranking/cuadro-meritos/get".proto().parseURL(),data:function(e){delete e.columns;var a=$(".select2-terms").val(),t=$(".select2-campuses").val(),r=$(".select2-careers").val(),c=$(".select2-academicPrograms").val();r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,c=c===_app.constants.guid.empty?null:c,e.termId=a,e.careerId=r,e.campusId=t,e.academicProgramId=c,e.search=$("#search").val()},pageLength:10,orderable:[],columns:[{title:"Posición",data:"position",orderable:!1},{title:"Ciclo",data:"academicYear",orderable:!1},{title:"Código",data:"code",orderable:!1},{title:"Apellidos, Nombres",data:"name",orderable:!1},{title:"Carrera",data:"career",orderable:!1},{title:"Sede",data:"campus",orderable:!1},{title:"Promedio",data:"weightedAverageGrade",orderable:!1},{title:"Créditos",data:"credits",orderable:!1},{title:"Orden de Mérito",data:"meritType",orderable:!1}]}),i=function(){a&&t&&r&&(null===e?e=$(".students-datatable").DataTable(c):e.ajax.reload())},n=function(){$("#search").doneTyping((function(){i()}))},s={init:function(){this.terms.init(),this.campuses.init()},terms:{init:function(){$.ajax({url:"/director-carrera/ranking/periodos/get".proto().parseURL()}).done((function(e){$(".select2-terms").select2({data:e}).on("change",(function(){a=!0,$(".select2-careers").empty(),$(".select2-academicPrograms").empty(),$(".select2-campuses").empty(),t=!1,!1,r=!1})),s.careers.init(),a=!0})),$(".select2-careers").select2(),$(".select2-academicPrograms").select2()}},careers:{init:function(){$(".select2-careers").select2({ajax:{url:"/director-carrera/ranking/carreras/get".proto().parseURL(),delay:300},minimumInputLength:0,placeholder:"Carreras",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(t=!0,!1,r=!1,$(".select2-academicPrograms").empty(),$(".select2-campuses").empty(),s.academicPrograms.init())}))}},academicPrograms:{init:function(){$(".select2-academicPrograms").select2({ajax:{url:"/director-carrera/ranking/especialidades/get".proto().parseURL(),delay:300,data:function(e){return{q:e.term,cid:$(".select2-careers").val()}}},minimumInputLength:0,placeholder:"Programa Académico",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(!0,r=!1,$(".select2-campuses").empty(),s.campuses.init())}))}},campuses:{init:function(){$(".select2-campuses").select2({ajax:{url:"/director-carrera/ranking/sedes/get".proto().parseURL(),delay:300},minimumInputLength:0,placeholder:"Campus",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(r=!0,i())}))}}},o=function(){$(".btn-report").on("click",(function(){var e=$(this),a=$(".select2-terms").val(),t=$(".select2-campuses").val(),r=$(".select2-careers").val();return r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,e.addLoader(),$.fileDownload(`${location.pathname}/pdf/get?termId=${a}&careerId=${r}&campusId=${t}`.proto().parseURL()).always((function(){e.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")})),!1}))};return{init:function(){s.init(),n(),o()}}}();$((function(){MeritTable.init()}));