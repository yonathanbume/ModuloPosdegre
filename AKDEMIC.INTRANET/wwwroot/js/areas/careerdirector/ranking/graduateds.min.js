var Graduateds=function(){var e=null,a=!1,r=!1,t=getSimpleDataTableConfiguration({url:"/director-carrera/ranking/egresados/get".proto().parseURL(),data:function(e){delete e.columns;var a=$("#admission-term").val(),r=$("#graduation-term").val(),t=$(".select2-careers").val(),n=$(".select2-academicPrograms").val();a=a===_app.constants.guid.empty?null:a,r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,n=n===_app.constants.guid.empty?null:n,e.academicProgramId=n,e.admissionTermId=a,e.graduationTermId=r,e.careerId=t,e.search=$("#search").val()},columns:[{title:"Posición",data:"position",orderable:!1},{title:"Código",data:"code",orderable:!1},{title:"DNI",data:"dni",orderable:!1},{title:"Apellidos, Nombres",data:"name",orderable:!1},{title:"Semestre de Ingreso",data:"admissionTerm",orderable:!1},{title:"Semestre de Egreso",data:"graduationTerm",orderable:!1},{title:"Promedio Ponderado",data:"weightedAverageGrade",orderable:!1},{title:"Orden de Mérito",data:"meritType",orderable:!1}]}),n=function(){a&&r&&(null===e?e=$(".students-datatable").DataTable(t):e.ajax.reload())},i=function(){$("#search").doneTyping((function(){n()}))},o={init:function(){this.terms.init()},terms:{init:function(){$.ajax({url:"/director-carrera/ranking/periodos/get".proto().parseURL()}).done((function(e){$(".select2-terms").select2({data:e}).on("change",(function(){$(".select2-careers").empty(),$(".select2-academicPrograms").empty(),r=!1,!1})),o.careers.init(),a=!0})),$(".select2-careers").select2(),$(".select2-academicPrograms").select2()}},careers:{init:function(){$(".select2-careers").select2({ajax:{url:"/director-carrera/ranking/carreras/get".proto().parseURL(),delay:300},minimumInputLength:0,placeholder:"Carreras",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(r=!0,!1,$(".select2-academicPrograms").empty(),o.academicPrograms.init())}))}},academicPrograms:{init:function(){$(".select2-academicPrograms").select2({ajax:{url:"/director-carrera/ranking/especialidades/get".proto().parseURL(),delay:300,data:function(e){return{q:e.term,cid:$(".select2-careers").val()}}},minimumInputLength:0,placeholder:"Programa Académico",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(!0,n())}))}}},c=function(){$(".btn-report").on("click",(function(){var e=$(this),a=$("#admission-term").val(),r=$("#graduation-term").val(),t=$(".select2-careers").val();return a=a===_app.constants.guid.empty?null:a,r=r===_app.constants.guid.empty?null:r,t=t===_app.constants.guid.empty?null:t,e.addLoader(),$.fileDownload(`${location.pathname}/pdf/get?admissionTermId=${a}&graduationTermId=${r}&careerId=${t}`.proto().parseURL()).always((function(){e.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")})),!1}))};return{init:function(){o.init(),i(),c()}}}();$((function(){Graduateds.init()}));