var NewStudents=function(){var e=null,a=!1,t=!1,r=getSimpleDataTableConfiguration({url:"/director-carrera/ranking/ingresantes/get".proto().parseURL(),data:function(e){delete e.columns;var a=$(".select2-terms").val(),t=$(".select2-careers").val(),r=$(".select2-status").val(),i=$(".select2-academicPrograms").val();a=a===_app.constants.guid.empty?null:a,t=t===_app.constants.guid.empty?null:t,i=i===_app.constants.guid.empty?null:i,r=0==r?null:r,e.admissionTermId=a,e.careerId=t,e.status=r,e.academicProgramId=i,e.search=$("#search").val()},pageLength:10,orderable:[],columns:[{title:"Posición",data:"position",orderable:!1},{title:"Código",data:"code",orderable:!1},{title:"DNI",data:"dni",orderable:!1},{title:"Apellidos, Nombres",data:"name",orderable:!1},{title:"Carr.",data:"careerCode",orderable:!1},{title:"Curr.",data:"curriculumCode",orderable:!1},{title:"Sede Ingr.",data:"firstCampus",orderable:!1},{title:"Sede Actu.",data:"currentCampus",orderable:!1},{title:"Sem. de Ingreso",data:"admissionTerm",orderable:!1},{title:"Sem. Ultimo",data:"lastTerm",orderable:!1},{title:"Promedio Ultimo",data:"lastWeightedAverageGrade",orderable:!1},{title:"Sem. de Egreso",data:"graduationTerm",orderable:!1},{title:"Prom. de Egreso",data:"meritType",orderable:!1},{title:"Estado",data:"status",orderable:!1},{title:"Cicl. Actual",data:"currentAcademicYear",orderable:!1},{title:"Orden de Mer.",data:"meritType",orderable:!1}]}),i=function(){a&&t&&(null===e?e=$(".students-datatable").DataTable(r):e.ajax.reload())},n=function(){$("#search").doneTyping((function(){i()}))},o={init:function(){this.terms.init(),this.status.init()},terms:{init:function(){$.ajax({url:"/director-carrera/ranking/periodos/get".proto().parseURL()}).done((function(e){$(".select2-terms").select2({data:e}).on("change",(function(){$(".select2-careers").empty(),$(".select2-academicPrograms").empty(),t=!1,!1})),a=!0,o.careers.init()})),$(".select2-careers").select2(),$(".select2-academicPrograms").select2()}},careers:{init:function(){$(".select2-careers").select2({ajax:{url:"/director-carrera/ranking/carreras/get".proto().parseURL(),delay:300},minimumInputLength:0,placeholder:"Carreras",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(t=!0,!1,$(".select2-academicPrograms").empty(),o.academicPrograms.init())}))}},academicPrograms:{init:function(){$(".select2-academicPrograms").select2({ajax:{url:"/director-carrera/ranking/especialidades/get".proto().parseURL(),data:function(e){return{q:e.term,cid:$(".select2-careers").val()}},delay:300},minimumInputLength:0,placeholder:"Programa Académico",allowClear:!0}).on("change",(function(){""!==$(this).val()&&(!0,i())}))}},status:{init:function(){$(".select2-status").select2().on("change",(function(){i()}))}}},c=function(){$(".btn-report").on("click",(function(){var e=$(this),a=$(".select2-terms").val(),t=$(".select2-careers").val(),r=$(".select2-academicPrograms").val(),i=$(".select2-status").val();return a=a===_app.constants.guid.empty?null:a,t=t===_app.constants.guid.empty?null:t,i=0==i?null:i,e.addLoader(),$.fileDownload(`${location.pathname}/pdf/get?admissionTermId=${a}&careerId=${t}&academicProgramId=${r}&status=${i}`.proto().parseURL()).always((function(){e.removeLoader()})).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(){toastr.error("No se pudo descargar el archivo","Error")})),!1}))};return{init:function(){o.init(),n(),c()}}}();$((function(){NewStudents.init()}));