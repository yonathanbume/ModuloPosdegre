var InitApp=function(){var a={ajax:{type:"GET",dataType:"JSON",url:"/coordinador-academico/visualizador-actas/get".proto().parseURL(),data:function(a){a.courseName=$("#courseName").val(),a.careerId=$("#careerId").val(),a.academicProgramId=$("#academicProgramId").val(),a.curriculumId=$("#curriculumId").val(),a.evaluationCode=$("#evaluation_report_code").val(),a.termId=$("#term_select").val()}},columns:[{data:"career",title:"Escuela",orderable:!1},{data:"course",title:"Curso",orderable:!1},{data:"section",title:"Secci√≥n",width:100,orderable:!1},{data:"teachers",title:"Profesor(es)",orderable:!1},{data:"evaluationReportCode",title:"Acta",width:100,orderable:!1},{data:null,title:"Detalle",orderable:!1,render:function(a){return`<button data-id=${a.id} class="btn btn-primary btn-sm m-btn m-btn--icon btn-preview-details"><i class="la la-eye"></i></button> `}}],rowGroup:{dataSrc:"academicYearName"}},e={reports:{object:null,init:function(){$("#data-table").on("click",".btn-preview-details",(function(){var a=$(this).data("id");$("#preview-datatable").html(""),$("#previewView").modal("show"),mApp.block("#preview-datatable"),$.ajax({url:`/coordinador-academico/visualizador-actas/obtener-vista-previa/${a}`.proto().parseURL(),type:"GET",dataType:"html",contextType:"application/json"}).done((function(a){console.log(a),$("#preview-datatable").html(a)})).fail((function(a){console.log(a),toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)})).always((function(){mApp.unblock("#preview-datatable")}))})),$("#courseName").doneTyping((function(){e.reports.reload()}))},reload:function(){null==e.reports.object?e.reports.object=$("#data-table").DataTable(a):e.reports.object.ajax.reload()}}},t={career:{events:{load:function(){$.ajax({url:"/carreras/v3/get".proto().parseURL()}).done((function(a){$("#careerId").select2({data:a.items,allowClear:!0,placeholder:"Seleccione Escuela Profesional"}),$("#careerId").prepend($("<option>",{value:_app.constants.guid.empty,text:"Todas"})),$("#careerId").val(_app.constants.guid.empty).trigger("change")}))},onChange:function(){},init:function(){this.load(),this.onChange()}}},curriculum:{events:{load:function(a){$("#curriculumId").empty(),a==_app.constants.guid.empty?($("#curriculumId").select2({allowClear:!0,placeholder:"Seleccione Escuela Profesional"}),$("#curriculumId").prepend($("<option>",{value:_app.constants.guid.empty,text:"Todas"})),$("#curriculumId").val(_app.constants.guid.empty).trigger("change")):$.ajax({url:`/planes-estudio/${a}/get`.proto().parseURL()}).done((function(a){$("#curriculumId").select2({data:a.items}),$("#curriculumId").prepend($("<option>",{value:_app.constants.guid.empty,text:"Todas"})),$("#curriculumId").val($("#curriculumId").val()).trigger("change")}))},onChange:function(){},init:function(){this.load(),this.onChange()}}},academicProgram:{events:{load:function(a){$("#academicProgramId").empty(),a==_app.constants.guid.empty?($("#academicProgramId").select2({allowClear:!0,placeholder:"Seleccione Programa/Especialidad"}),$("#academicProgramId").prepend($("<option>",{value:_app.constants.guid.empty,text:"Todas"})),$("#academicProgramId").val($("#academicProgramId").val()).trigger("change")):$.ajax({url:`/programas-por-plan/${a}`.proto().parseURL()}).done((function(a){$("#academicProgramId").select2({data:a}),$("#academicProgramId").val($("#academicProgramId").val()).trigger("change")}))},onChange:function(){},init:function(){this.load(),this.onChange()}}},term:{events:{load:function(){$.ajax({url:"/coordinador-academico/visualizador-actas/get-periodos".proto().parseURL()}).done((function(a){$("#term_select").select2({data:a})}))},init:function(){this.load()}},init:function(){this.events.init()}},init:function(){t.term.init(),t.career.events.init(),$("#careerId").on("change",(function(){var a=$(this).val();t.curriculum.events.load(a)})),$("#curriculumId").on("change",(function(){var a=$(this).val();t.academicProgram.events.load(a)})),$("#academicProgramId").on("change",(function(){}))}};return{init:function(){$("#search_by_code").on("click",(function(){e.reports.reload()})),$("#search_all").on("click",(function(){e.reports.reload()})),t.init(),e.reports.init()}}}();$((function(){InitApp.init()}));