var reportApprovedCourses=function(){var e=null,r=getSimpleDataTableConfiguration({url:"/director-carrera/reporte-aprobados-desaprobados-cursos/get".proto().parseURL(),data:function(e){e.cid=$("#select_courses").val(),e.pid=$("#select_terms").val(),e.carId=$("#select_careers").val(),e.curId=$("#select_curriculums").val(),e.name=$("#search").val()},pageLength:10,orderable:[],columns:[{data:"name",title:"Nombres Completos"},{data:"code",title:"Código"},{data:"career",title:"Carrera"},{data:"academicProgram",title:"Especialidad"},{data:"intents",title:"Veces"},{data:"grade",title:"Nota"},{data:"approbed",title:"Estado",render:function(e){return!0===e?'<span class="m-badge  m-badge--success m-badge--wide">Aprobado</span>':'<span class="m-badge  m-badge--danger m-badge--wide">Desaprobado</span>'}}]}),a=function(){var e=$("#select_careers").val();$.ajax({url:`/carreras/${e}/planestudio/get`.proto().parseURL()}).done((function(e){$("#select_curriculums").empty(),$("#select_curriculums").select2({data:e.items,placeholder:"Planes de estudio"}).trigger("change")})),$("#select_curriculums").on("change",(function(){t?(t=!1,o.init()):o.load()}))},t=!0,o={init:function(){var e=$("#select_curriculums").val();$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#select_courses").empty(),$("#select_courses").select2({data:e.items,placeholder:"Cursos"}),o.event(),$("#select_courses").trigger("change")}))},event:function(){$("#select_courses").on("change",(function(){l(),s()}))},load:function(){var e=$("#select_curriculums").val();$.ajax({url:`/curriculum/${e}/cursos/get`.proto().parseURL()}).done((function(e){$("#select_courses").empty(),$("#select_courses").select2({data:e.items,placeholder:"Cursos"}).trigger("change")}))}},s=function(){null===e?e=$("#datatable_index").DataTable(r):e.ajax.reload()},c=function(){$.when(($.ajax({url:"/carreras/v2/get".proto().parseURL()}).done((function(e){$("#select_careers").empty(),$("#select_careers").select2({data:e.items,placeholder:"Escuelas"})})),$("#select_careers").on("change",(function(){a()})),void $("#select_careers").trigger("change")),void $("#select_terms").select2({ajax:{url:"/director-carrera/reporte-aprobados-desaprobados-cursos/periodos/get".proto().parseURL(),delay:300,processResults:function(e){return{results:e.results}}},minimumInputLength:0,placeholder:"Periodo Académico",allowClear:!0}).on("change",(function(){l(),s()}))).done((function(){var e;l(),s(),e=0,$("#search").keyup((function(){clearTimeout(e),e=setTimeout((function(){s()}),500)}))}))},l=function(){google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback((function(){var e=$("#select_terms").val(),r=$("#select_courses").val(),a=$("#select_careers").val(),t=$("#select_curriculums").val();$.ajax({type:"GET",url:`/director-carrera/reporte-aprobados-desaprobados-cursos/chart/${a}/${t}/${r}/${e}`.proto().parseURL(),error:function(e,r,a){toastr.error(err.message)},success:function(e){e.length>0?function(e){var r=[["",""]];$.each(e,(function(e,a){r.push([a.approbedname,a.approbeds]),r.push([a.disapprobedname,a.disapprobeds])})),e=google.visualization.arrayToDataTable(r);var a={title:"Aprobados vs desaprobados",height:400,width:700,colors:["#D32F2F","#43A047"],titleFontSize:20,is3D:!0};new google.visualization.PieChart(document.getElementById("chart_div_report_approbed_disapprobed_courses")).draw(e,a)}(e):document.getElementById("chart_div_report_approbed_disapprobed_courses").innerHTML=""}})}))};return{load:function(){c()}}}();$((function(){reportApprovedCourses.load()}));