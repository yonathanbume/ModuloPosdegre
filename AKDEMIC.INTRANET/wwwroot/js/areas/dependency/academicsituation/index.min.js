var AcademicSituation=function(){var t=null,e={responsive:!0,processing:!0,serverSide:!0,ajax:{url:"/dependencia/situacion-academica/get".proto().parseURL(),data:function(t){t.fid=$(".select2-faculties").val(),t.cid=$(".select2-careers").val(),t.academicOrder=$(".select2-orders ").val()}},columns:[{title:"Nombre y Apellidos",data:"name"},{title:"Carrera",data:"career"},{title:"Órden de Mérito",data:"lastOrder"},{title:"Promedio Ponderado",data:"lastGrade"},{title:"Clasificación",data:null,render:function(t,e,a){if(null!==a.lastMeritOrder&&-1!==a.lastMeritOrder){var i={0:{text:_app.constants.academicOrder.upperThird.text,value:_app.constants.academicOrder.upperThird.value,class:"m-badge--metal"},1:{text:_app.constants.academicOrder.upperFifth.text,value:_app.constants.academicOrder.upperFifth.value,class:"m-badge--accent"},2:{text:_app.constants.academicOrder.upperTenth.text,value:_app.constants.academicOrder.upperTenth.value,class:"m-badge--focus"}};return"<span class='m-badge "+i[a.lastMeritOrder].class+" m-badge--wide'>"+i[a.lastMeritOrder].text+"</span>"}return"Ninguno"}},{title:"Créditos Aprobados",data:"approvedCredits"},{title:"Opciones",data:null,orderable:!1,render:function(t,e,a){return`<button data-id="${a.id}" class="btn btn-info btn-sm m-btn m-btn--icon btn-record" title="Record Académico"><span><i class="flaticon-interface-7"></i><span>Record</span></span></button> <button data-id="${a.id}" class="btn btn-brand btn-sm m-btn m-btn--icon btn-situation" title="Situación Académica"><span><i class="flaticon-statistics"></i><span>Situación</span></span></button>`}}]},a={init:function(){this.faculties.init(),this.careers.initEvents(),this.orders.init()},faculties:{init:function(){$.ajax({url:"/facultades/get".proto().parseURL()}).done((function(t){$(".select2-faculties").select2({data:t.items,placeholder:"Facultad"}).on("change",(function(){a.careers.init($(this).val())})).trigger("change")}))}},careers:{initEvents:function(){$(".select2-careers").on("change",(function(){i.init()}))},init:function(t){$(".select2-careers").prop("disabled",!0),$.ajax({url:`/carreras/get?fid=${t}`.proto().parseURL()}).done((function(t){$(".select2-careers").empty(),t.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$(".select2-careers").select2({data:t.items,placeholder:"Carrera"}),t.items.length>1&&$(".select2-careers").prop("disabled",!1),$(".select2-careers").trigger("change")}))}},orders:{init:function(){$(".select2-orders").select2().on("change",(function(){i.init()}))}}},i={init:function(a,i,n){null===t?(t=$(".students-datatable").DataTable(e),this.initEvents()):t.ajax.reload()},initEvents:function(){t.on("click",".btn-situation",(function(){var t=$(this).data("id");location.href=`/dependencia/situacion-academica/${t}/situacion`.proto().parseURL()})),t.on("click",".btn-record",(function(){var t=$(this).data("id");location.href=`/dependencia/situacion-academica/${t}/historial`.proto().parseURL()}))}};return{init:function(){a.init()}}}();$((function(){AcademicSituation.init()}));