var index=function(){var t=null,e={sections:{object:null,options:{ajax:{url:"/reporte/descarga-silabo/get-seciones-datatable",type:"GET",data:function(t){t.termId=$("#term_select").val(),t.careerId=$("#career_select").val(),t.search=$("#search").val()}},columns:[{data:"courseCode",title:"Código"},{data:"courseName",title:"Curso"},{data:"code",title:"Sección"},{data:"enrolled",title:"Cantidad matriculados"},{data:null,title:"Opciones",render:function(t){var e="";return e+=`<button type="button" data-id="${t.id}" class="btn btn-students btn-primary btn-sm m-btn  m-btn m-btn--icon"><span><i class="la la-eye"></i><span>Estudiantes</span></span></button>`}}]},events:{onView:function(){$("#sections_datatable").on("click",".btn-students",(function(){t=$(this).data("id"),e.students.reload(),$("#modal_students").modal("show")}))},init:function(){this.onView()}},reload:function(){null!=this.object?e.sections.object.ajax.reload():e.sections.object=$("#sections_datatable").DataTable(e.sections.options)},init:function(){this.events.init()}},students:{object:null,options:{ajax:{url:"/reporte/descarga-silabo/get-datatable",type:"GET",data:function(e){e.sectionId=t,e.search=$("#search_student").val()}},pageLength:10,columns:[{data:"userName",title:"Usuario"},{data:"fullName",title:"Nombre Completo"},{data:null,title:"Estado",render:function(t){var e="";return null!=t.syllabusDownloadDate?e+='<span class="m-badge m-badge--primary m-badge--wide">Descargado</span>':e+='<span class="m-badge m-badge--metal m-badge--wide">Pendiente</span>',e}},{data:null,title:"Fecha Descarga",render:function(t){var e="-";return null!=t.syllabusDownloadDate&&(e=t.syllabusDownloadDate),e}}]},reload:function(){null!=this.object?e.students.object.ajax.reload():e.students.object=$("#students_datatable").DataTable(e.students.options)}},init:function(){e.sections.init()}},n={term:{init:function(){$.ajax({url:"/periodos/get"}).done((function(t){$("#term_select").select2({data:t.items}),$("#term_select").on("change",(function(){e.sections.reload()})),$("#term_select").val(t.selected).trigger("change")}))}},career:{init:function(){$.ajax({url:"/carreras/get"}).done((function(t){$("#career_select").select2({data:t.items,allowClear:!0,placeholder:"Seleccionar escuela profesinal"}),$("#career_select").val(null).trigger("change"),$("#career_select").on("change",(function(){e.sections.reload()}))}))}},init:function(){n.career.init(),n.term.init()}},a={onSearch:function(){$("#search").doneTyping((function(){e.sections.reload()})),$("#search_student").doneTyping((function(){e.students.reload()}))},init:function(){this.onSearch()}};return{init:function(){n.init(),a.init(),e.init()}}}();$((()=>{index.init()}));