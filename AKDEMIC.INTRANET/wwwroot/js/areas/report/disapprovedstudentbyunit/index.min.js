var InitApp=function(){var e={students:{object:null,options:{serverSide:!1,ajax:{url:"/reporte/desaprobados-unidad/get",type:"GET",data:function(e){e.careerId=$("#career_select").val(),e.curriculumId=$("#curriculum_select").val(),e.academicYear=$("#academicyear_select").val(),e.unit=$("#unit_select").val(),e.search=$("#search").val()}},columns:[{data:"userName",title:"Usuario"},{data:"fullName",title:"Estudiante"},{data:"unit",title:"Unidad"},{data:"count",title:"Cursos desaprobados"}],dom:"Bfrtip",buttons:["excel"]},reload:function(){null==this.object||null==this.object?this.object=$("#data-table").DataTable(this.options):this.object.ajax.reload()},init:function(){}},init:function(){e.students.init()}},t={term:{init:function(){$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(e){$("#term_select").select2({data:e.items,disabled:!0}),null!==e.selected?$("#term_select").val(e.selected).trigger("change"):$("#term_select").val(null).trigger("change")}))}},careers:{init:function(){$.ajax({url:"/carreras/get"}).done((function(e){$("#career_select").select2({data:e.items,disabled:!1}),$("#career_select").on("change",(function(){var e=$(this).val();t.curriculum.load(e)}))}))}},curriculum:{load:function(e){$("#curriculum_select").empty(),null===e||e===_app.constants.guid.empty||"Todos"===e?$("#curriculum_select").select2({disabled:!0,placeholder:"Seleccionar plan de estudio"}):$.ajax({url:`/carreras/${e}/planestudio/get`}).done((function(e){$("#curriculum_select").select2({data:e.items,disabled:!1}).trigger("change")}))},init:function(){$("#curriculum_select").select2({disabled:!0,placeholder:"Seleccionar plan de estudio"}),$("#curriculum_select").on("change",(function(){var e=$(this).val();t.academicYear.load(e)}))}},academicYear:{load:function(e){$("#academicyear_select").empty(),null===e||e===_app.constants.guid.empty?$("#academicyear_select").select2({disabled:!0,placeholder:"Ciclo"}):$.ajax({url:`/planes-estudio/${e}/niveles/get`}).done((function(e){$("#academicyear_select").select2({data:e.items,disabled:!1}).trigger("change")}))},onChange:function(){$("#academicyear_select").on("change",(function(){var e=$(this).val(),a=$("#curriculum_select").val();t.unit.load(a,e)}))},init:function(){$("#academicyear_select").select2({disabled:!0,placeholder:"Ciclo"}),this.onChange()}},unit:{load:function(e,t){$("#unit_select").empty(),$.ajax({url:"/reporte/desaprobados-unidad/get-unidades",data:{curriculumId:e,academicYear:t}}).done((function(e){$("#unit_select").select2({data:e.items,disabled:!1}).trigger("change")}))},init:function(){$("#unit_select").select2({disabled:!0,placeholder:"Unidad"})}},init:function(){t.term.init(),t.careers.init(),t.curriculum.init(),t.academicYear.init(),t.unit.init()}},a=function(){$(".btn-search").on("click",(function(){var t=$("#career_select").val(),a=$("#curriculum_select").val(),c=$("#academicyear_select").val(),i=$("#unit_select").val();if(null==t||""==t||null==a||""==a||null==c||""==c||null==i||""==i)return toastr.error("Debe completar todos los campos","Error"),!1;e.students.reload()}))};return{init:function(){t.init(),a()}}}();$((function(){InitApp.init()}));