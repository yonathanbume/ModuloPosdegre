var InitApp=function(){var e={students:{object:null,options:{serverSide:!1,filter:!1,lengthChange:!1,ajax:{url:"/reporte/estudiantes-promedios-del-periodo/datatable/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){e.search=$("#search").val(),e.termId=$("#termId").val(),e.academicYear=$("#academicYear").val(),e.careerId=$("#careerId").val(),e.facultyId=$("#facultyId").val()}},pageLength:50,orderable:[],columns:[{title:"Usuario",data:"userName"},{title:"Apellido Paterno",data:"paternalSurname"},{title:"Apellido Materno",data:"maternalSurname"},{title:"Nombres",data:"name"},{title:"Escuela Profesional",data:"career"},{title:"Promedio Ponderado",data:"weightedAverageGrade"},{title:"Promedio Aritmetico",data:"arithmeticAverageGrade"}],dom:"Bfrtip",buttons:[{extend:"excel",title:"Reporte de promedios de estudiante por periodo académico"},{extend:"pdf",title:"Reporte de promedios de estudiante por periodo académico"}]},reload:function(){null==this.object?this.object=$("#data-table").DataTable(this.options):this.object.ajax.reload()}}},t=function(){$("#btn-search").on("click",(function(){null==$("#termId").val()||""==$("#termId").val()||"undefined"==$("#termId").val()||"0"==$("#termId").val()||null==$("#facultyId").val()||""==$("#facultyId").val()||"undefined"==$("#facultyId").val()||"0"==$("#facultyId").val()?showToastrFail("Debe escoger un Periodo y una Facultad al menos"):e.students.reload()}))},a={init:function(){this.terms.init(),this.academicYears.init(),this.faculties.init(),this.careers.init()},terms:{init:function(){$("#termId").select2(),this.load()},load:function(){$.ajax({url:"/periodos/get".proto().parseURL(),type:"GET"}).done((function(e){$("#termId").select2({data:e.items}),null!=e.selected&&$("#termId").val(e.selected).trigger("change")}))}},academicYears:{init:function(){$("#academicYear").select2(),this.load()},load:function(){$.ajax({url:"/ciclos/numeros-romanos/get".proto().parseURL(),type:"GET"}).done((function(e){$("#academicYear").select2({data:e})}))}},careers:{init:function(){$("#careerId").select2()},load:function(e){$("#careerId").prop("disabled",!1),$("#careerId").empty(),$("#careerId").html('<option value="0" selected>Todas</option>'),$.ajax({url:`/facultades/${e}/carreras/get`.proto().parseURL(),type:"GET"}).done((function(e){$("#careerId").select2({data:e.items})}))}},faculties:{init:function(){$("#facultyId").select2(),this.load(),this.events()},load:function(){$.ajax({url:"/facultades/get".proto().parseURL(),type:"GET"}).done((function(e){$("#facultyId").select2({data:e.items})}))},events:function(){$("#facultyId").on("change",(function(){let e=$(this).val();a.careers.load(e)}))}}};return{init:function(){t(),a.init()}}}();$((function(){InitApp.init()}));