var InitApp=function(){var e={students:{object:null,options:{bInfo:!0,columnDefs:[{orderable:!1,targets:[]}],ajax:{url:"/reporte/estudiantes-condicionados/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns,e.termId=$("#term_select").val(),e.careerId=$("#career_select").val(),e.conditionType=$("#type_select").val(),e.search=$("#search").val()}},order:[[1,"asc"]],columns:[{title:"Código",data:"userName",width:"50px"},{title:"Nombre completo",data:"fullName"},{title:"Escuela Profesional",data:"career"},{title:"Curso",data:"course"},{title:"Nro de Intento",data:"try",width:"150px",render:function(e){return e}},{title:"Periodo",orderable:!1,data:"term"}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(){var e=$(this)[0].node;$(e).addClass("m-loader m-loader--right m-loader--primary").attr("disabled",!0),$.fileDownload("/reporte/estudiantes-condicionados/reporte-excel".proto().parseURL(),{httpMethod:"GET",data:{termId:$("#term_select").val(),careerId:$("#career_select").val(),conditionType:$("#type_select").val(),search:$("#search").val()},successCallback:function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")}}).done((function(){})).fail((function(){toastr.error("Error al descargar el archivo","Error")})).always((function(){$(e).removeClass("m-loader m-loader--right m-loader--primary").attr("disabled",!1)}))}},{extend:"pdfHtml5",title:"Estudiantes desaprobados por Nro de intento",exportOptions:{columns:":visible"}}]},init:function(){this.object=$("#students_table").DataTable(this.options)},load:function(){this.object.ajax.reload()}}},t={term:{init:function(){$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(t){$("#term_select").select2({data:t.items}),null!==t.selected&&($("#term_select").val(t.selected),$("#term_select").trigger("change.select2")),e.students.init(),$("#term_select").on("change",(function(t){e.students.load()}))}))}},career:{init:function(){$.ajax({url:"/carreras/get".proto().parseURL()}).done((function(t){t.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$("#career_select").select2({placeholder:"Seleccione una Escuela",data:t.items,minimumResultsForSearch:10,disabled:!1}),$("#career_select").on("change",(function(){e.students.load()}))}))}},type:{init:function(){$("#type_select").select2(),$("#type_select").on("change",(function(){e.students.load()}))}},init:function(){t.term.init(),t.career.init(),t.type.init()}},a=function(){$("#search").doneTyping((function(){e.students.load()}))};return{init:function(){t.init(),a()}}}();jQuery(document).ready((function(){InitApp.init()}));