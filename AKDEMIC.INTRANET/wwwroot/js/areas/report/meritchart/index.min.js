var InitApp=function(){var e={init:function(){this.campus.init(),this.academicYears.init(),this.careers.init(),this.terms.init(),$("#type_select").select2()},terms:{init:function(){$.ajax({url:"/reporte/cuadro-merito/periodos/get".proto().parseURL()}).done((function(r){$("#term_select").select2({data:r.items}),null!==r.selected&&$("#term_select").val(r.selected),$("#term_select").on("change",(function(){var r=$("#term_select").val();e.careers.load(r)})),$("#term_select").trigger("change",[!0])}))}},careers:{init:function(){$("#career_select").select2({placeholder:"Seleccione una escuela",disabled:!0}),$("#career_select").on("change",(function(){var r=$("#term_select").val(),t=$("#career_select").val();e.academicYears.load(r,t),e.campus.load(r,t),e.years.load(r,t)}))},load:function(e){if(null==e)return!1;$.ajax({url:`/reporte/cuadro-merito/periodos/${e}/carreras/get`.proto().parseURL()}).done((function(e){$("#career_select").empty(),$("#career_select").select2({placeholder:"Seleccione una escuela",data:e.items,minimumResultsForSearch:10,disabled:!1}),$("#career_select").trigger("change",[!0])}))}},academicYears:{init:function(){$("#cycle_select").select2({placeholder:"Seleccione un ciclo",disabled:!0})},load:function(e,r){$.ajax({url:`/reporte/cuadro-merito/periodos/${e}/carrera/${r}/ciclos/get`.proto().parseURL()}).done((function(e){$("#cycle_select").empty(),$("#cycle_select").select2({placeholder:"Seleccione una ciclo",data:e.items,minimumResultsForSearch:10,disabled:!1})}))}},campus:{init:function(){console.log("test"),$("#campus_select").select2({placeholder:"Seleccione una sede",disabled:!0})},load:function(e,r){$.ajax({url:`/reporte/cuadro-merito/periodos/${e}/carrera/${r}/sedes/get`.proto().parseURL()}).done((function(e){$("#campus_select").empty(),$("#campus_select").select2({placeholder:"Seleccione una sede",data:e.items,minimumResultsForSearch:10,disabled:!1})}))}},years:{init:function(){console.log("test"),$("#year_select").select2({placeholder:"Seleccione un año",disabled:!0})},load:function(e,r){$.ajax({url:`/reporte/cuadro-merito/periodos/${e}/carrera/${r}/anios/get`.proto().parseURL()}).done((function(e){$("#year_select").empty(),$("#year_select").select2({placeholder:"Seleccione un año",data:e.items,minimumResultsForSearch:10,disabled:!1})}))}}},r=function(){$(".btn-report").on("click",(function(){if(null==$("#term_select").val()||null==$("#career_select").val())return toastr.error("Debe seleccionar todos los campos","Error"),!1;if($("#cycle_select").length&&null==$("#cycle_select").val())return toastr.error("Debe seleccionar todos los campos","Error"),!1;if($("#campus_select").length&&null==$("#campus_select").val())return toastr.error("Debe seleccionar todos los campos","Error"),!1;var e=$(this);e.addClass("m-loader m-loader--right m-loader--primary").attr("disabled",!0),$.fileDownload("/reporte/cuadro-merito/calcular-orden-merito".proto().parseURL(),{httpMethod:"GET",data:{termId:$("#term_select").val(),careerId:$("#career_select").val(),academicYear:$("#cycle_select").val(),type:$("#type_select").val(),campusId:$("#campus_select").val(),year:$("#year_select").val()}}).done((function(){toastr.success("Archivo descargado satisfactoriamente","Éxito")})).fail((function(e){toastr.error($(e).text(),"Error")})).always((function(){e.removeClass("m-loader m-loader--right m-loader--primary").attr("disabled",!1)}))}))};return{init:function(){r(),e.init()}}}();$((function(){InitApp.init()}));