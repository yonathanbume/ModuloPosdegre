var InitApp=function(){var e={students:{object:null,options:{columnDefs:[{orderable:!1,targets:[]}],ajax:{url:"/reporte/rendimiento-tutorados/get".proto().parseURL(),type:"GET",dataType:"JSON",data:function(e){delete e.columns,e.termId=$("#term-select").val(),e.careerId=$("#career-select").val(),e.search=$("#search").val(),e.onlyDisapproved=$("#onlydisapproved-switch").is(":checked")}},columns:[{data:"tutor"},{data:"code",width:"100px"},{data:"name"},{data:"career"},{data:"prevTotalCredits",orderable:!1,className:"text-right"},{data:null,orderable:!1,render:function(e){return $("#prev-term-title").html(`Periodo ${e.prevTermName}`),`<a href="javascript:void(0);" class="show-grades" data-student="${e.id}" data-term="${e.prevTerm}" style="color: cornflowerblue;text-decoration: underline;">${e.prevDisapprovedCredits}</a>`},className:"text-right"},{data:"prevGrade",orderable:!1,className:"text-right",render:function(e){return e.toFixed(2)}},{data:"totalCredits",orderable:!1,className:"text-right"},{data:null,orderable:!1,render:function(e){return $("#term-title").html(`Periodo ${e.termName}`),`<a href="javascript:void(0);" class="show-grades" data-student="${e.id}" data-term="${e.term}" style="color: cornflowerblue;text-decoration: underline;">${e.disapprovedCredits}</a>`},className:"text-right"},{data:null,render:function(e){return e.grade>e.prevGrade?`<i class="la la-angle-double-up m--font-success"></i> ${e.grade.toFixed(2)}`:e.grade==e.prevGrade?`<i class="la la-bars"></i> ${e.grade.toFixed(2)}`:`<i class="la la-angle-double-down m--font-danger"></i> ${e.grade.toFixed(2)}`},orderable:!1,className:"text-right"}]},init:function(){e.students.object=$("#data-table").DataTable(e.students.options),e.students.object.on("click",".show-grades",(function(){console.log("entro");var t=$(this).data("student"),a=$(this).data("term");e.courses.load(t,a)}))},reload:function(){$("#prev-term-title").html("Periodo"),$("#term-title").html("Periodo"),e.students.object.ajax.reload()}},courses:{object:null,options:{serverSide:!1,ajax:{url:"/reporte/rendimiento-tutorados/cursos-desaprobados/get".proto().parseURL(),type:"GET",dataType:"JSON",dataSrc:""},columns:[{title:"Curso",data:"course"},{title:"Cr√©ditos",data:"credits",width:"100px"},{title:"Intento",data:"try"},{title:"Nota",data:"finalGrade"}]},load:function(e,t){$("#grades-modal").modal("toggle");var a=`/reporte/rendimiento-tutorados/cursos-desaprobados/get?studentId=${e}&termId=${t}`.proto().parseURL(),r=this.options;r.ajax.url=a,null!=this.object&&this.object.destroy(),this.object=$("#grades-table").DataTable(r)}}},t={term:{init:function(){$.ajax({url:"/periodos/get".proto().parseURL()}).done((function(t){$("#term-select").select2({data:t.items}),null!==t.selected&&($("#term-select").val(t.selected),$("#term-select").trigger("change.select2")),e.students.init(),$("#term-select").on("change",(function(t){e.students.reload()}))}))}},career:{init:function(){$.ajax({url:"/carreras/get".proto().parseURL()}).done((function(t){t.items.unshift({id:_app.constants.guid.empty,text:"Todas"}),$("#career-select").select2({placeholder:"Seleccione una Escuela",data:t.items,minimumResultsForSearch:10}),$("#career-select").on("change",(function(){e.students.reload()}))}))}},init:function(){t.term.init(),t.career.init()}},a=function(){$("#search").doneTyping((function(){e.students.reload()})),$("#onlydisapproved-switch").change((function(){e.students.reload()}))};return{init:function(){t.init(),a()}}}();jQuery(document).ready((function(){InitApp.init()}));