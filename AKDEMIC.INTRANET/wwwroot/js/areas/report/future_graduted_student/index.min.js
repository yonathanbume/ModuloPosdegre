var index=function(){var t={graduated:{object:null,options:{ajax:{url:"/reporte/estudiantes-por-egresar/get",type:"GET",data:function(t){t.careerId=$("#career_select").val(),t.curriculumId=$("#curriculum_select").val(),t.search=$("#search").val()}},columns:[{data:"userName",title:"Usuario"},{data:"fullName",title:"Estudiante"},{data:"career",title:"Escuela profesional"},{title:"Opciones",data:null,render:function(t){var e="";return e+=`<button data-id="${t.id}" class="ml-1 btn btn-info btn-sm m-btn m-btn--icon btn-history"><span><i class="la la-list-ul"></i><span>Historial</span></span></button>`}}],dom:"Bfrtip",buttons:[{text:"Excel",action:function(t,e,a,n){var r=`/reporte/estudiantes-por-egresar/get-excel?careerId=${$("#career_select").val()}&curriculumId=${$("#curriculum_select").val()}`;window.open(r,"_blank")}}]},events:{onHistory:function(){$("#data-table").on("click",".btn-history",(function(){var t=$(this).data("id");e.history.show(t)}))},init:function(){this.onHistory()}},reload:function(){t.graduated.object.ajax.reload()},init:function(){t.graduated.object=$("#data-table").DataTable(t.graduated.options),t.graduated.events.init()}},history:{object:null,options:{pageLength:20,responsive:!0,processing:!0,serverSide:!1,filter:!0,lengthChange:!1,paging:!1,ordering:!1,orderMulti:!1,columnDefs:[{orderable:!1,targets:[]}],ajax:{url:"/reporte/estudiantes-por-egresar/historial-academico/alumno",type:"GET",data:function(t){t.studentId=$("#StudentId").val()}},columns:[{data:"year",title:"Ciclo"},{data:"code",title:"Código"},{data:"course",title:"Curso"},{data:"credits",searchable:!1,title:"Créditos"},{title:"N° veces",searchable:!1,data:null,render:function(t){return 0===t.tries?" - ":t.tries}},{title:"Nota",searchable:!1,data:null,render:function(t){return t.validated?t.grade<=0?`<a href="#" data-id="${t.id}" class="show-equiv"><span class="m--font-info"> CE </span></a>`:`<a href="#" data-id="${t.id}" class="show-equiv"><span class="m--font-info"> ${t.grade} </span></a>`:0===t.tries?" - ":t.grade<11?`<span style="color: red;">${t.grade}</span>`:t.grade}},{title:"Semestre",searchable:!1,data:null,render:function(t){return 0===t.tries?" - ":t.term}},{title:"Estado",searchable:!1,data:"status"}]},reload:function(){null===t.history.object?t.history.object=$("#student_history").DataTable(t.history.options):t.history.object.ajax.reload()},init:function(){$("#history-search").on("keyup",(function(){t.history.object.search(this.value).draw()}))}},student_sections:{object:null,options:{ajax:{url:"/reporte/estudiantes-por-egresar/cursos-matriculados/alumno",type:"GET",data:function(t){t.studentId=$("#StudentId").val()}},columns:[{data:"course",title:"CUrso"},{data:"section",title:"Sección"},{data:"credits",title:"Credits"},{data:"status",title:"Estado",render:function(t){return 0===t?"En Curso":1===t?"Aprobado":2===t?"Desaprobado":3===t?"Retirado":"-"}}]},reload:function(){null===t.student_sections.object?t.student_sections.object=$("#student_sections_datatable").DataTable(t.student_sections.options):t.student_sections.object.ajax.reload()}},init:function(){t.graduated.init(),t.history.init()}},e={history:{object:$("#modal_student_history"),show:function(a){$("#StudentId").val(a),t.history.reload(),t.student_sections.reload(),n.getApprovedCredits(a),n.getEnrolledCredits(a),e.history.object.modal("show")}}},a={careers:{load:function(t){$.ajax({url:"/carreras/get"}).done((function(t){$("#career_select").select2({data:t.items,disabled:!1})}))},onChange:function(){$("#career_select").on("change",(function(){var e=$(this).val();a.curriculum.load(e),t.graduated.reload()}))},init:function(){this.load(),this.onChange()}},curriculum:{load:function(t){$("#curriculum_select").empty(),null===t||t===_app.constants.guid.empty||"Todos"===t?$("#curriculum_select").select2({disabled:!0,placeholder:"Seleccionar plan de estudio"}):$.ajax({url:`/carreras/${t}/planestudio/get`}).done((function(t){$("#curriculum_select").select2({data:t.items,disabled:!1}).trigger("change")}))},onChange:function(){$("curriculum_select").on("change",(function(){t.graduated.reload()}))},init:function(){$("#curriculum_select").select2({disabled:!0,placeholder:"Seleccionar plan de estudio"}),this.onChange()}},init:function(){a.careers.init(),a.curriculum.init()}},n={getApprovedCredits:function(t){$.ajax({url:"/reporte/estudiantes-por-egresar/creditos-aprobados/alumno?studentId="+t,type:"GET"}).done((function(t){$("#credit_approved").text(t)}))},getEnrolledCredits:function(t){$.ajax({url:"/reporte/estudiantes-por-egresar/creditos-matriculados/alumno?studentId="+t,type:"GET"}).done((function(t){$("#enrollment_credits").text(t)}))},onSearch:function(){$("#search").doneTyping((function(){t.graduated.reload()}))},init:function(){this.onSearch()}};return{init:function(){t.init(),a.init()}}}();$((()=>{index.init()}));