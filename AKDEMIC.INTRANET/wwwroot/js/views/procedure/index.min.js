var index=function(){var e={available_procedures:{object:null,options:{ajax:{url:"/tramites/get-tramites-disponibles/datatable",data:function(e){e.search=$("#search_available_procedures").val()}},columns:[{data:"name",orderable:!1,title:"Nombre"},{data:"amount",orderable:!1,title:"Monto"},{data:null,title:"Opciones",orderable:!1,render:function(e){var t="";return t+=`<a href="/tramites/detalles/${e.id}" class="btn btn-primary m-btn btn-sm m-btn m-btn--icon"><span><i class="la la-eye"></i><span>Detalle</span></span></a>`}}]},reload:function(){e.available_procedures.object.ajax.reload()},init:function(){e.available_procedures.object=$("#table_available_procedures").DataTable(e.available_procedures.options)}},procedures_in_process:{object:null,options:{ajax:{url:"/tramites/get-tramites-en-proceso/datatable"},columns:[{data:"createdAt",orderable:!1,title:"Fec. Solicitud"},{data:"procedure",orderable:!1,title:"Trámite"},{data:"status",orderable:!1,title:"Estado"},{data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="/tramites/detalles-solicitud/${e.id}" class="btn btn-primary m-btn btn-sm m-btn m-btn--icon"><span><i class="la la-eye"></i><span>Detalle</span></span></a> `,t+=`<button data-id="${e.id}" class="btn-delete btn btn-danger m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-trash" title="Eliminar"></i></button>`}}]},events:{onDelete:function(){$("#table_procedures_in_process").on("click",".btn-delete",(function(){var t=$(this).data("id");swal({title:"¿Está seguro?",text:"La solicitud será eliminada permanentemente",type:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminarla",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,allowOutsideClick:()=>!swal.isLoading(),preConfirm:()=>new Promise((a=>{$.ajax({url:`/tramites/eliminar-tramite?id=${t}`,type:"POST"}).done((function(t){e.procedures_in_process.object.ajax.reload(),swal({type:"success",title:"Completado",text:"La solicitud ha sido eliminada con éxito",confirmButtonText:"Excelente"})})).fail((function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Entendido",text:502===e.status?"No hay respuesta del servidor":e.responseText})}))}))})}))},init:function(){this.onDelete()}},reload:function(){e.procedures_in_process.object.ajax.reload()},init:function(){e.procedures_in_process.object=$("#table_procedures_in_process").DataTable(e.procedures_in_process.options),e.procedures_in_process.events.init()}},completed_procedures:{object:null,options:{ajax:{url:"/tramites/get-tramites-finalizados/datatable"},columns:[{data:"createdAt",title:"Fec. Solicitud",orderable:!1},{data:"procedure",title:"Trámites",orderable:!1},{data:"total",title:"Costo Total",orderable:!1},{data:"status",title:"Estado",orderable:!1},{data:null,orderable:!1,render:function(e){var t="";return t+=`<a href="/tramites/detalles-solicitud/${e.id}" class="btn btn-primary m-btn btn-sm m-btn m-btn--icon"><span><i class="la la-eye"></i><span>Detalle</span></span></a> `,""!=e.recordHistoryId&&null!=e.recordHistoryId&&(null!=e.recordHistoryFileUrl&&""!=e.recordHistoryFileUrl?t+=`<a target='_blank' href="/documentos/${e.recordHistoryFileUrl}" class="btn btn-primary btn-sm m-btn  m-btn m-btn--icon"><span><i class="la la-download"></i><span>Descargar</span></span></a>`:t+=`<a target='_blank' href="/registrosacademicos/solicitudes/imprimir/${e.recordHistoryId}?userProcedureId=${e.id}" class="btn btn-primary btn-sm m-btn  m-btn m-btn--icon"><span><i class="la la-download"></i><span>Descargar</span></span></a>`),t}}]},reload:function(){e.completed_procedures.object.ajax.reload()},init:function(){e.completed_procedures.object=$("#table_completed_procedures").DataTable(e.completed_procedures.options)}},init:function(){e.available_procedures.init(),e.procedures_in_process.init(),e.completed_procedures.init()}},t={onSearch:function(){$("#search_available_procedures").doneTyping((function(){e.available_procedures.reload()}))},init:function(){t.onSearch()}};return{init:function(){e.init(),t.init()}}}();$((()=>{index.init()}));