var index=function(){var e={userRequirementFiles:{object:null,options:{bPaginate:!1,bLengthChange:!1,bFilter:!1,bInfo:!1,ajax:{url:"/tramites/get-archivos-usuario-tramite",dataSrc:"",data:function(e){e.userProcedureId=$("#Id").val()}},columns:[{title:"Requisito",data:"name",orderable:!1},{title:"Estado",data:"status",orderable:!1,render:function(e){return 3==e?'<span class="m-badge m-badge--metal m-badge--wide">Observado</span>':'<span class="m-badge m-badge--primary m-badge--wide">Enviado</span>'}},{title:"Opciones",data:null,orderable:!1,render:function(e){var t="";return 3==e.status&&(t+=`<button data-id="${e.id}" class="btn btn-primary m-btn m-btn--icon btn-sm m-btn--icon-only btn-user-requirement-file-upload"><i class="la la-upload"></i></button> `),t+=`<a href="/pdf/${e.url}" target="_blank" class="btn btn-primary m-btn m-btn--icon btn-sm m-btn--icon-only"><i class="la la-download"></i></a>`}}]},events:{onUploadFile:function(){$("#user_requirement_files_datatable").on("click",".btn-user-requirement-file-upload",(function(){var e=$(this).data("id");t.userRequirementFileUpload.show(e)}))},init:function(){this.onUploadFile()}},reload:function(){e.userRequirementFiles.object.ajax.reload()},init:function(){e.userRequirementFiles.object=$("#user_requirement_files_datatable").DataTable(e.userRequirementFiles.options),this.events.init()}},init:function(){e.userRequirementFiles.init()}},t={userRequirementFileUpload:{object:$("#user_requirement_files_upload_modal"),form:{object:$("#user_requirement_files_upload_form").validate({submitHandler:function(i,n){n.preventDefault();var a=new FormData(i);$("#user_requirement_files_upload_modal").find(":input").attr("disabled",!0),$.ajax({url:"/tramites/archivo-usuario-tramite/actualizar",type:"POST",data:a,contentType:!1,processData:!1}).done((function(i){e.userRequirementFiles.reload(),t.userRequirementFileUpload.object.modal("hide"),swal({type:"success",title:"Completado",text:"Archivo actualizado con Ã©xito.",confirmButtonText:"Aceptar",allowOutsideClick:!1})})).fail((function(e){swal({type:"error",title:"Error",confirmButtonClass:"btn btn-danger m-btn m-btn--custom",confirmButtonText:"Aceptar",text:502===e.status?"No hay respuesta del servidor":e.responseText})})).always((function(){$("#user_requirement_files_upload_modal").find(":input").attr("disabled",!1)}))}})},show:function(e){t.userRequirementFileUpload.object.find("[name='Id']").val(e),t.userRequirementFileUpload.object.modal("show")},events:{onHidden:function(){t.userRequirementFileUpload.object.on("hidden.bs.modal",(function(e){t.userRequirementFileUpload.object.find("[name='File']").val(null).trigger("change"),t.userRequirementFileUpload.object.find(".custom-file-label").text("Seleccione un archivo"),t.userRequirementFileUpload.form.object.resetForm()}))},init:function(){this.onHidden()}},init:function(){this.events.init()}},init:function(){t.userRequirementFileUpload.init()}};return{init:function(){e.init(),t.init()}}}();$((()=>{index.init()}));