var procedureDependency=function(){var t={datatable:{load:{get:function(){t.datatable.objects["procedure-dependency-datatable-get"]=$("#procedure-dependency-datatable-get").mDatatable({data:{source:{read:{method:"GET",url:`/dependencia/tramites/dependencias/${procedureId}/get`.proto().parseURL()}}},columns:[{field:"",title:"#",width:20,template:function(t,e,n){return e+1+(n.getCurrentPage()-1)*n.getPageSize()}},{field:"dependency.name",title:"Nombre de la Dependencia"}]})}},objects:{}}};return{datatable:{getObject:function(e){return t.datatable.objects[e]}},init:function(){t.datatable.load.get()}}}(),userProcedureDerivation=function(){var t={ajax:{objects:{}},datatable:{load:{documentFiles:function(){t.datatable.objects["user-procedure-derivation-modal-document-files-datatable-document-files"]=$("#user-procedure-derivation-modal-document-files-datatable-document-files").DataTable({data:t.other.filteredUserProcedureDerivationFiles,columns:[{data:"fileName",title:"Nombre del Archivo"},{data:"size",title:"Tamaño",render:function(t,e,n,r){return _app.modules.unit.bytesToSize(n.size)}},{orderable:!1,render:function(t,e,n,r){return`\n\t\t\t\t\t\t\t\t\t\t<a href="${n.path}" class="btn btn-primary m-btn m-btn--icon m-btn--icon-only">\n\t\t\t\t\t\t\t\t\t\t\t<i class="la la-download"></i>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t`},title:"Opciones"}],lengthChange:!1,lengthMenu:[3],processing:!1,serverSide:!1})}},finish:{documentFiles:function(){t.datatable.objects["user-procedure-finish-modal-document-files-datatable-document-files"]=$("#user-procedure-finish-modal-document-files-datatable-document-files").DataTable({data:t.other.filteredUserProcedureFinishFiles,columns:[{data:"fileName",title:"Nombre del Archivo"},{data:"size",title:"Tamaño",render:function(t,e,n,r){return _app.modules.unit.bytesToSize(n.size)}},{orderable:!1,render:function(t,e,n,r){return`\n\t\t\t\t\t\t\t\t\t\t<a href="${`/pdf/${n.path}`.proto().parseURL()}" target="_blank" class="btn btn-primary m-btn m-btn--icon m-btn--icon-only">\n\t\t\t\t\t\t\t\t\t\t\t<i class="la la-download"></i>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t`},title:"Opciones"}],lengthChange:!1,lengthMenu:[3],processing:!1,serverSide:!1})}},objects:{}},modal:{objects:{}},other:{filteredUserProcedureDerivationFiles:null,userProcedureDerivationId:null,userProcedureDerivationFiles:null,filteredUserProcedureFinishFiles:null,userProcedureFinishId:null,userProcedureFinishFiles:null}};return{ajax:{getObject:function(e){return t.ajax.objects[e]},load:{userProcedureDerivation:function(){t.ajax.objects["user-procedure-derivation-ajax-user-procedure-derivation"]=$.ajax({type:"GET",url:`/tramites/usuarios/derivaciones/todos/${id}/get`.proto().parseURL()}).done((function(t,e,n){var r="";if(r+='\n\t\t\t\t\t\t\t\t\t<div class="m-timeline-3">\n\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__items">\n\t\t\t\t\t\t\t\t',t.derivationList.length>0){if(t.itsFinished)for(var o=0;o<t.derivationFinishedList.lengh;o++){var a=t.derivationFinishedList[o];r+=`<div class="m-timeline-3__item m-timeline-3__item--${["danger","info","primary","success","warning"].proto().random()}">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-time">${a.parsedCreatedAt}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item-desc">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-text">Finalizado por la dependencia ${a.dependency.name} - ${a.user.fullName}</span><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-user-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="documentos"  class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.documentFiles(this, event, '${a.proto().encode()}')"><i class="la la-files-o"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="observaciones" class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.observation(this, event, '${a.proto().encode()}')"><i class="la la-comment"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>`}for(o=0;o<t.derivationList.length;o++){a=t.derivationList[o];r+=`\n\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item m-timeline-3__item--${["danger","info","primary","success","warning"].proto().random()}">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-time">${a.parsedCreatedAt}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item-desc">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-text">Derivado a : ${a.dependency.name} por ${a.user.name} (${a.dependencyFrom.name})</span><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-user-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="documentos"  class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.load.documentFiles(this, event, '${a.proto().encode()}')"><i class="la la-files-o"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="observaciones" class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.load.observation(this, event, '${a.proto().encode()}')"><i class="la la-comment"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t`}r+="\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"}else{if(t.itsFinished)for(o=0;o<t.derivationFinishedList.length;o++){a=t.derivationFinishedList[o];r+=`<div class="m-timeline-3__item m-timeline-3__item--${["danger","info","primary","success","warning"].proto().random()}">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-time">${a.parsedCreatedAt}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item-desc">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-text">Finalizado por la dependencia ${a.dependency.name} - ${a.user.fullName}</span><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-user-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="documentos"  class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.documentFiles(this, event, '${a.proto().encode()}')"><i class="la la-files-o"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="observaciones" class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.observation(this, event, '${a.proto().encode()}')"><i class="la la-comment"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>`}else r+='\n\t\t\t\t\t\t\t\t\t<div class="alert alert-dismissible fade show   m-alert m-alert--outline m-alert--air" role="alert">\n\t\t\t\t\t\t\t\t\t\t<div class="m-alert__text">\n\t\t\t\t\t\t\t\t\t\t\tNo hay datos disponibles\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t';r+="\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"}document.getElementById("user-procedure-derivation-content").innerHTML=r})).fail((function(t,e,n){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))},userProcedureDerivationFile:function(){t.ajax.objects["user-procedure-derivation-ajax-user-procedure-derivation"]=$.ajax({type:"GET",url:`/tramites/usuarios/archivos/${id}/get`.proto().parseURL()}).done((function(e,n,r){t.other.userProcedureDerivationFiles=e})).fail((function(t,e,n){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}},finish:{userProcedureFinish:function(){t.ajax.objects["user-procedure-finish-ajax-user-procedure-finish"]=$.ajax({type:"GET",url:`/tramites/usuarios/finalizado/${id}/get`.proto().parseURL()}).done((function(t,e,n){var r="";if(t.length>0){r+='\n\t\t\t\t\t\t\t\t\t<div class="m-timeline-3">\n\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__items">\n\t\t\t\t\t\t\t\t';for(var o=0;o<t.length;o++){var a=t[o];r+=`\n\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item m-timeline-3__item--${["danger","info","primary","success","warning"].proto().random()}">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-time">${a.parsedCreatedAt}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="m-timeline-3__item-desc">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-text">Finalizado por la dependencia ${a.dependency.name} - ${a.user.fullName}</span><br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="m-timeline-3__item-user-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="documentos" class="btn btn-secondary m-btn  btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.documentFiles(this, event, '${a.proto().encode()}')"><i class="la la-files-o"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type="button" title="observaciones" class="btn btn-secondary m-btn btn-sm m-btn--icon" onclick="userProcedureDerivation.modal.finish.observation(this, event, '${a.proto().encode()}')"><i class="la la-comment"></i></button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t`}r+="\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"}else r+='\n\t\t\t\t\t\t\t\t\t<div class="alert alert-dismissible fade show   m-alert m-alert--outline m-alert--air" role="alert">\n\t\t\t\t\t\t\t\t\t\t<div class="m-alert__text">\n\t\t\t\t\t\t\t\t\t\t\tNo hay datos disponibles\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t';document.getElementById("user-procedure-finish-content").innerHTML=r})).fail((function(t,e,n){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))},userProcedureFinishFile:function(){t.ajax.objects["user-procedure-finish-ajax-user-procedure-finish"]=$.ajax({type:"GET",url:`/tramites/usuarios/get-observation-file/${id}`.proto().parseURL()}).done((function(e,n,r){t.other.userProcedureFinishFiles=e})).fail((function(t,e,n){toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}},datatable:{getObject:function(e){return t.datatable.objects[e]},reset:function(t,e){t.clear(),t.rows.add(e),t.draw()}},init:function(){t.datatable.load.documentFiles(),userProcedureDerivation.ajax.load.userProcedureDerivation(),userProcedureDerivation.ajax.load.userProcedureDerivationFile(),t.datatable.finish.documentFiles(),userProcedureDerivation.ajax.finish.userProcedureFinishFile()},modal:{getObject:function(e){return t.modal.objects[e]},load:{documentFiles:function(e,n,r){r=r.proto().decode(),t.other.userProcedureDerivationId=r.id,userProcedureDerivation.other.generateUserProcedureDerivationFiles(),userProcedureDerivation.datatable.reset(userProcedureDerivation.datatable.getObject("user-procedure-derivation-modal-document-files-datatable-document-files"),userProcedureDerivation.other.getFilteredUserProcedureDerivationFiles()),t.modal.objects["user-procedure-derivation-modal-document-files"]=$("#user-procedure-derivation-modal-document-files").modal("show")},observation:function(e,n,r){var o="";o+=`<p>${(r=r.proto().decode()).observation}</p>`,document.getElementById("user-procedure-derivation-modal-observation-content").innerHTML=o,t.modal.objects["user-procedure-derivation-modal-observation"]=$("#user-procedure-derivation-modal-observation").modal("show")}},finish:{documentFiles:function(e,n,r){r=r.proto().decode(),t.other.userProcedureFinishId=r.id,userProcedureDerivation.other.generateUserProcedureFinishFiles(),userProcedureDerivation.datatable.reset(userProcedureDerivation.datatable.getObject("user-procedure-finish-modal-document-files-datatable-document-files"),userProcedureDerivation.other.getFilteredUserProcedureFinishFiles()),t.modal.objects["user-procedure-finish-modal-document-files"]=$("#user-procedure-finish-modal-document-files").modal("show")},observation:function(e,n,r){var o="";o+=`<p>${(r=r.proto().decode()).observationStatus}</p>`,document.getElementById("user-procedure-finish-modal-observation-content").innerHTML=o,t.modal.objects["user-procedure-finish-modal-observation"]=$("#user-procedure-finish-modal-observation").modal("show")}}},other:{getFilteredUserProcedureDerivationFiles:function(){return t.other.filteredUserProcedureDerivationFiles},getUserProcedureDerivationId:function(){return t.other.userProcedureDerivationId},getUserProcedureDerivationFiles:function(){return t.other.userProcedureDerivationFiles},generateUserProcedureDerivationFiles:function(){t.other.filteredUserProcedureDerivationFiles=[];for(var e=0;e<t.other.userProcedureDerivationFiles.length;e++){var n=t.other.userProcedureDerivationFiles[e];n.userProcedureDerivationId==t.other.userProcedureDerivationId&&t.other.filteredUserProcedureDerivationFiles.push(n)}},getFilteredUserProcedureFinishFiles:function(){return t.other.filteredUserProcedureFinishFiles},getUserProcedureFinishId:function(){return t.other.userProcedureFinishId},getUserProcedureFinishFiles:function(){return t.other.userProcedureFinishFiles},generateUserProcedureFinishFiles:function(){t.other.filteredUserProcedureFinishFiles=[];for(var e=0;e<t.other.userProcedureFinishFiles.length;e++){var n=t.other.userProcedureFinishFiles[e];n.userProcedureId==t.other.userProcedureFinishId&&t.other.filteredUserProcedureFinishFiles.push(n)}}}}}(),InitApp=function(){var t={ajax:{objects:{}},other:{dependencyNames:null,documentFiles:null,documentFiles2:null,filteredProcedureDependencies:null,procedureDependencies:null,procedureId:null},swal:{objects:{}},datatable:{load:{documentFiles:function(){t.datatable.objects["active-user-procedure-modal-derive-form-datatable-document-files"]=$("#active-user-procedure-modal-derive-form-datatable-document-files").DataTable({data:t.other.documentFiles,columns:[{data:"fileName",title:"Nombre del Archivo"},{data:"size",title:"Tamaño",render:function(t,e,n,r){return _app.modules.unit.bytesToSize(t)}},{orderable:!1,render:function(t,e,n,r){return`\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger m-btn btn-sm m-btn--icon" onclick="InitApp.swal.load.deleteDocumentFile(this, event, '${n.proto().encode()}')"><i class="la la-trash"></i></button>\n\t\t\t\t\t\t\t\t\t`},title:"Opciones"}],lengthChange:!1,lengthMenu:[3],processing:!1,serverSide:!1})}},status:{documentFiles2:function(){t.datatable.objects["status-user-procedure-modal-derive-form-datatable-document-files"]=$("#status-user-procedure-modal-derive-form-datatable-document-files").DataTable({data:t.other.documentFiles2,columns:[{data:"fileName",title:"Nombre del Archivo"},{data:"size",title:"Tamaño",render:function(t,e,n,r){return _app.modules.unit.bytesToSize(t)}},{orderable:!1,render:function(t,e,n,r){return`\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger m-btn btn-sm m-btn--icon" onclick="InitApp.swal.load.deleteDocumentFile2(this, event, '${n.proto().encode()}')"><i class="la la-trash"></i></button>\n\t\t\t\t\t\t\t\t\t`},title:"Opciones"}],lengthChange:!1,lengthMenu:[3],processing:!1,serverSide:!1})}},objects:{}}},e=$("#Id").val(),n={req:{object:null,options:{responsive:!0,serverSide:!0,pageLength:10,ordering:!0,orderMulti:!1,order:[[0,"desc"]],language:{lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/dependencia/tramites/usuarios/get-req/${e}`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){}},columns:[{title:"Nombre de Archivo",data:"filename"},{title:"Tamaño",data:null,render:function(t){var e=t.filesize;return _app.modules.file.getFormattedFileSize(e)}},{title:"Opciones",data:null,render:function(t){return`<a href="${`/pdf/${t.path}`.proto().parseURL()}" class="btn btn-primary btn-sm m-btn m-btn--icon" target="_blank"><i class="la la-download"></i></a>`}}]},init:function(){n.req.object=$("#data-table").DataTable(n.req.options)},reload:function(){n.req.object.ajax.reload()}},fileObservation:{object:null,options:{responsive:!0,serverSide:!0,pageLength:10,ordering:!0,orderMulti:!1,order:[[0,"desc"]],language:{lengthMenu:"",infoEmpty:"",zeroRecords:"No existen registros",info:"",infoFiltered:"_MAX_ / _TOTAL_",paginate:{next:">>",previous:"<<"}},ajax:{url:`/dependencia/tramites/usuarios/get-observation-file/${e}`.proto().parseURL(),type:"GET",dataType:"JSON",data:function(t){}},columns:[{title:"Nombre de Archivo",data:"filename"},{title:"Tamaño",data:null,render:function(t){var e=t.filesize;return _app.modules.file.getFormattedFileSize(e)}},{title:"Opciones",data:null,render:function(t){return`<a href="${`/pdf/${t.path}`.proto().parseURL()}" class="btn btn-primary btn-sm m-btn m-btn--icon" target="_blank"><i class="la la-download"></i></a>`}}]},init:function(){n.req.object=$("#data-table").DataTable(n.req.options)},reload:function(){n.req.object.ajax.reload()}},init:function(){n.req.init(),n.fileObservation.init()}},r={show:function(){$("#active-user-procedure-modal-derive").modal("show"),$("#active-user-procedure-modal-derive").one("hidden.bs.modal")},submit:function(n,r){var o=n.elements,a=new FormData,i=InitApp.other.getDocumentFiles();$("#active-user-procedure-modal-derive-form").find(".btn-submit").addLoader(),$("#active-user-procedure-modal-derive-form").attr("disabled",!0),a.append("DependencyId",o["UserProcedureDerivationViewModel.DependencyId"].value),a.append("UserProcedureId",e),a.append("Observation",o["UserProcedureDerivationViewModel.Observation"].value),a.append("UserDependencyId",o["UserProcedureDerivationViewModel.UserDependencyId"].value),a.append("ActivityProcedureId",o["UserProcedureDerivationViewModel.ActivityProcedureId"].value),a.proto().appendFiles(i,"DocumentFiles","file"),t.ajax.objects["active-user-procedure-ajax-derive"]=$.ajax({contentType:!1,data:a,processData:!1,type:n.method,url:n.action,xhr:function(){var t=new window.XMLHttpRequest;return i.length>0&&($(o.DocumentFiles).parent().addProgressBar(),t.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;$(n).find(".progress-bar").width(`${e}%`)}}),t}}).always((function(t,e,n){$("#active-user-procedure-modal-derive-form").find(".btn-submit").removeLoader(),$("#active-user-procedure-modal-derive-form select").attr("disabled",!1),$(o.DocumentFiles).parent().removeProgressBar()})).done((function(t,e,n){$("#active-user-procedure-modal-derive").modal("hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),window.location.href="/dependencia/tramites/usuarios"})).fail((function(t,e,n){var r=t.responseText;""!=r&&400==t.status?toastr.error(r,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}},o={finish:{show:function(){$("#statusModal").modal("show"),$(".finish").show(),$("#statusModal").one("hidden.bs.modal")},submit:function(n,r){var o=n.elements,i=new FormData,s=InitApp.other.getDocumentFiles2();$("#status-user-procedure-modal-form").find(".btn-submit").addLoader(),$("#status-user-procedure-modal-form").attr("disabled",!0),i.append("UserProcedureId",e),i.append("Status",a),i.append("Observation",o.Observation.value),9==a&&i.proto().appendFiles(s,"DocumentFiles","file"),t.ajax.objects["status-user-procedure-ajax"]=$.ajax({contentType:!1,data:i,processData:!1,type:n.method,url:n.action,xhr:function(){var t=new window.XMLHttpRequest;return 9==a&&s.length>0&&($(o.DocumentFiles).parent().addProgressBar(),t.upload.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;$(n).find(".progress-bar").width(`${e}%`)}}),t}}).always((function(t,e,n){$("#status-user-procedure-modal-form").find(".btn-submit").removeLoader(),$("#status-user-procedure-modal-form select").attr("disabled",!1),$(o.DocumentFiles).parent().removeProgressBar()})).done((function(t,e,n){$("#statusModal").modal("hide"),9==a&&$("#btnSend").hide(),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),location.reload()})).fail((function(t,e,n){var r=t.responseText;""!=r&&400==t.status?toastr.error(r,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}},observation:{show:function(){$("#statusModal").modal("show"),$(".finish").hide(),$("#statusModal").one("hidden.bs.modal")},submit:function(n,r){var o=n.elements,i=new FormData;$("#status-user-procedure-modal-form").find(".btn-submit").addLoader(),$("#status-user-procedure-modal-form").attr("disabled",!0),i.append("UserProcedureId",e),i.append("Status",a),t.ajax.objects["status-user-procedure-ajax"]=$.ajax({contentType:!1,data:i,processData:!1,type:n.method,url:n.action}).always((function(t,e,n){$("#status-user-procedure-modal-form").find(".btn-submit").removeLoader(),$("#status-user-procedure-modal-form select").attr("disabled",!1),$(o.DocumentFiles).parent().removeProgressBar()})).done((function(t,e,n){$("#statusModal").modal("hide"),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),location.reload()})).fail((function(t,e,n){var r=t.responseText;""!=r&&400==t.status?toastr.error(r,_app.constants.toastr.title.error):toastr.error(_app.constants.toastr.message.error.task,_app.constants.toastr.title.error)}))}}},a=null,i={init:function(){this.dependency.init(),this.status.init(),this.status.change(),this.activity.init()},dependency:{init:function(){$(".dependency-select2").prop("disabled",!0),$.ajax({url:"/dependencias/get".proto().parseURL()}).done((function(t){$(".dependency-select2").select2({data:t.items}),$(".dependency-select2").on("change",(function(){i.userDependency.init(this.value)})).trigger("change"),$(".dependency-select2").prop("disabled",!1)}))}},userDependency:{init:function(t){$(".dependency-user-select2").attr("disabled",!0),$.ajax({url:`/usuarios/get/${t}`.proto().parseURL()}).done((function(t){$(".dependency-user-select2").select2({data:t.items}),$(".dependency-user-select2").on("change",(function(){})).trigger("change"),$(".dependency-user-select2").attr("disabled",!1)}))}},status:{init:function(){$.ajax({url:"/status/get".proto().parseURL()}).done((function(t){$(".status-select2").select2({data:t.items}),$(".status-select2").on("change",(function(){9==this.value&&(o.finish.show(),a=9),7==this.value&&(o.observation.show(),a=7)}))}))},change:function(){}},activity:{init:function(){$(".activity-select2").prop("disabled",!0),$.ajax({url:"/tareas/get".proto().parseURL()}).done((function(t){$(".activity-select2").select2({data:t.items}),$(".activity-select2").on("change",(function(){})).trigger("change"),$(".activity-select2").prop("disabled",!1)}))}}},s=function(){createForm=$("#active-user-procedure-modal-derive-form").validate({submitHandler:function(t,e){e.preventDefault(),r.submit(t)}}),createForm=$("#status-user-procedure-modal-form").validate({submitHandler:function(t,e){e.preventDefault(),o.finish.submit(t)}})},d=function(){$("#btnSend").on("click",(function(){r.show()})),$("#Status").on("click",(function(){2}))};return{init:function(){t.datatable.load.documentFiles(),t.datatable.status.documentFiles2(),n.req.init(),d(),s(),i.init()},file:{load:{documentFiles:function(e,n){var r=(n.target||window.event.srcElement).files,o=r.length;if(t.other.documentFiles=[],FileReader&&r&&o>0){for(var a=0;a<o;a++){var i=r[a];t.other.documentFiles.push({id:a,file:i,fileName:i.name,type:i.type,size:i.size})}e.value=null,e.nextElementSibling.innerHTML=`${o} archivo${1!=o?"s":""} seleccionado${1!=o?"s":""}`}InitApp.datatable.reset(InitApp.datatable.getObject("active-user-procedure-modal-derive-form-datatable-document-files"),InitApp.other.getDocumentFiles()),n.stopImmediatePropagation()}},status:{documentFiles:function(e,n){var r=(n.target||window.event.srcElement).files,o=r.length;if(t.other.documentFiles2=[],FileReader&&r&&o>0){for(var a=0;a<o;a++){var i=r[a];t.other.documentFiles2.push({id:a,file:i,fileName:i.name,type:i.type,size:i.size})}e.value=null,e.nextElementSibling.innerHTML=`${o} archivo${1!=o?"s":""} seleccionado${1!=o?"s":""}`}InitApp.datatable.reset(InitApp.datatable.getObject("status-user-procedure-modal-derive-form-datatable-document-files"),InitApp.other.getDocumentFiles2()),n.stopImmediatePropagation()}}},other:{getDocumentFiles:function(){return t.other.documentFiles},getDocumentFiles2:function(){return t.other.documentFiles2}},datatable:{getObject:function(e){return t.datatable.objects[e]},reset:function(t,e){t.clear(),t.rows.add(e),t.draw()}},swal:{getObject:function(e){return t.swal.objects[e]},load:{deleteDocumentFile:function(e,n,r){r=r.proto().decode(),t.swal.objects["active-user-procedure-modal-derive-form-swal-delete-document-file"]=swal({preConfirm:function(){return new Promise((function(e,n){for(var o=InitApp.other.getDocumentFiles(),a=0;a<o.length;a++)if(o[a].id==r.id){t.other.documentFiles.splice(a,1);break}var i=document.getElementById("active-user-procedure-modal-derive-form"),s=o.length;i.DocumentFiles.nextElementSibling.innerHTML=s<=0?"Seleccione archivos":`${s} archivo${1!=s?"s":""} seleccionado${1!=s?"s":""}`,InitApp.datatable.reset(InitApp.datatable.getObject("active-user-procedure-modal-derive-form-datatable-document-files"),o),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),swal.close()}))},title:`¿Desea eliminar el archivo "${r.fileName}?"`,type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0})},deleteDocumentFile2:function(e,n,r){r=r.proto().decode(),t.swal.objects["status-user-procedure-modal-derive-form-swal-delete-document-file"]=swal({preConfirm:function(){return new Promise((function(e,n){for(var o=InitApp.other.getDocumentFiles2(),a=0;a<o.length;a++)if(o[a].id==r.id){t.other.documentFiles2.splice(a,1);break}var i=document.getElementById("status-user-procedure-modal-form"),s=o.length;i.DocumentFiles.nextElementSibling.innerHTML=s<=0?"Seleccione archivos":`${s} archivo${1!=s?"s":""} seleccionado${1!=s?"s":""}`,InitApp.datatable.reset(InitApp.datatable.getObject("status-user-procedure-modal-derive-form-datatable-document-files"),o),toastr.success(_app.constants.toastr.message.success.task,_app.constants.toastr.title.success),swal.close()}))},title:`¿Desea eliminar el archivo "${r.fileName}?"`,type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0})},derive:function(e,n){var r=e.elements,o=r.DependencyId;t.swal.objects["active-user-procedure-swal-derive"]=swal({preConfirm:function(){return new Promise((function(t,r){InitApp.form.derive.submit(e,n)}))},title:`¿Está seguro de derivar el trámite "${r.UserProcedureProcedureName.value}" a la dependencia "${o.options[o.selectedIndex].text}"?`,type:"warning",showCancelButton:!0,showLoaderOnConfirm:!0})}}}}}();$((function(){procedureDependency.init(),userProcedureDerivation.init(),InitApp.init(),$(".nav-link.m-tabs__link").on("shown.bs.tab",(function(t){procedureDependency.datatable.getObject("procedure-dependency-datatable-get").adjustCellsWidth()}))}));