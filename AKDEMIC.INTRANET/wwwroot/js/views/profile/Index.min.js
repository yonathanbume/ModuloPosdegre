var personalInformation=function(){var e=function(){$("#CurrentPasswordEye").on("click",(function(){"password"===$("#CurrentPassword").attr("type")?(console.log("ISÄSS"),$("#CurrentPassword").attr("type","text")):$("#CurrentPassword").attr("type","password")}))},t={init:function(){this.districts.init(),this.provinces.init(),this.departments.init()},departments:{init:function(){$.ajax({url:"/departamentos/get".proto().parseURL()}).done((function(e){$(".select2-departments").select2({placeholder:"Departamentos",minimumResultsForSearch:-1,data:e.items}),""!=$("#departmentId").val()&&null!=$("#departmentId").val()&&($(".select2-departments").val($("#departmentId").val()).trigger("change"),$.ajax({url:`/departamentos/${$("#departmentId").val()}/provincias/get`.proto().parseURL()}).done((function(e){$(".select2-provinces").empty(),$(".select2-provinces").select2({placeholder:"Provincias",minimumResultsForSearch:-1,data:e.items,disabled:!1}),""!=$("#provinceId").val()&&null!=$("#provinceId").val()&&($(".select2-provinces").val($("#provinceId").val()).trigger("change"),$.ajax({url:`/departamentos/${$("#departmentId").val()}/provincias/${$("#provinceId").val()}/distritos/get`.proto().parseURL()}).done((function(e){$(".select2-districts").empty(),$(".select2-districts").select2({placeholder:"Distritos",minimumResultsForSearch:-1,data:e.items,disabled:!1}),""!=$("#districtId").val()&&null!=$("#districtId").val()&&$(".select2-districts").val($("#districtId").val()).trigger("change")})))}))),$(".select2-departments").on("change",(function(){t.provinces.load($(this).val())})),$(".select2-provinces").on("change",(function(){t.districts.load($(this).val())}))}))}},provinces:{init:function(){$(".select2-provinces").select2({placeholder:"Seleccione un departamento",disabled:!0})},load:function(e){$.ajax({url:`/departamentos/${e}/provincias/get`.proto().parseURL()}).done((function(e){$(".select2-provinces").empty(),$(".select2-provinces").select2({placeholder:"Provincias",minimumResultsForSearch:-1,data:e.items,disabled:!1}).trigger("change")}))}},districts:{init:function(){$(".select2-districts").select2({placeholder:"Seleccione una provincia",disabled:!0})},load:function(e){var t=$("#department-select").val();$.ajax({url:`/departamentos/${t}/provincias/${e}/distritos/get`.proto().parseURL()}).done((function(e){$(".select2-districts").empty(),$(".select2-districts").select2({placeholder:"Distritos",minimumResultsForSearch:-1,data:e.items,disabled:!1})}))}}};return{ajax:{list:{},load:{update:function(e,t){var a=e.elements;personalInformation.ajax.list["personal-information-ajax-update"]=$.ajax({data:{PhoneNumber:a.PhoneNumber.value,Email:a.Email.value,DepartmentId:a.DepartmentId.value,ProvinceId:a.ProvinceId.value,DistrictId:a.DistrictId.value,Address:a.Address.value},type:e.method,url:e.action,beforeSend:function(t,a){$(e).addLoader()},complete:function(t,a){$(e).removeLoader()},error:function(e,t,a){toastr.error(_app.constants.toastr.message.error.create,_app.constants.toastr.title.error)},success:function(e,t,a){toastr.success("Se actualizaron los datos correctamente",_app.constants.toastr.title.success)}})}}},validate:{list:{},load:{create:function(){personalInformation.validate.list["persona-information-update"]=$("#formPersonal-information-update").validate({submitHandler:function(e,t){personalInformation.ajax.load.update(e,t)}}),t.init(),e()}},extra:{numbers_validations:function(){$("#formPersonal-information-update input[name='PhoneNumber']").keypress((function(e){(46===e.which||e.which<48||e.which>57)&&e.preventDefault()})).on("paste",(function(e){e.preventDefault()})),$("#formPersonal-information-update input[name='PhoneNumber']").attr("maxlength","9")}}}}}(),changePassword={ajax:{list:{},load:{create:function(e,t){var a=e.elements;a.NewPassword.value===a.RepeatPassword.value?changePassword.ajax.list["form-password-ajax-change"]=$.ajax({data:{CurrentPassword:a.CurrentPassword.value,NewPassword:a.NewPassword.value},type:e.method,url:e.action,beforeSend:function(t,a){$(e).addLoader()},complete:function(t,a){$(e).removeLoader()},error:function(e,t,a){toastr.error("No se pudo actualizar la contraseña","Error")},success:function(e,t,a){toastr.success(_app.constants.toastr.message.success.create,_app.constants.toastr.title.success),window.location.href="/"}}):toastr.error("Las contraseñas deben ser iguales","Error")}}},validate:{list:{},load:{create:function(){changePassword.validate.list["form-password-change"]=$("#form-password-change").validate({submitHandler:function(e,t){changePassword.ajax.load.create(e,t)}})}}}};$((function(){personalInformation.validate.load.create(),personalInformation.validate.extra.numbers_validations(),changePassword.validate.load.create()}));